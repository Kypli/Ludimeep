<div class='col-12 mb-4'>
	<h4 class="radius-short offset-2 col-8 d-none d-lg-block d-xl-block">Mini-tchat</h4>
	<h4 class="radius-long offset-2 col-8 d-none d-lg-none d-xl-none d-sm-block d-md-block">Mini-tchat</h4>

	<div class='card tchat'>
		<div class="row">
			{% if tchats is not empty %}
				<ul>
					{% for t in tchats %}

					<li>
							<div class="row">

								{# SIZE #}
								{% set lengthLog = t.login|length  %}
								{% set sizeAuteur = lengthLog >= 12 ? '5' : lengthLog >= 8 ? '4' : lengthLog >= 4 ? '3' : '2' %}
								{% set sizeContent = lengthLog >= 12 ? '6' : lengthLog >= 8 ? '7' : lengthLog >= 4 ? '8' : '9' %}

								{# AUTEUR #}
								<div class="col-{{ sizeAuteur }} pl-1">
									<span
										class="tchat-auteur"
										title="{{ t.nom is not empty and t.prenom is not empty
											? t.nom|upper ~  ' ' ~  t.prenom|capitalize ~  ' : '
											: '' 
										}}{{ t.date|date('d/m/Y H:i:s') }}"
									>
										{{ t.login|capitalize }}:
									</span>
								</div>

								{# CONTENT #}
								<div class="col-{{ sizeContent }} p-0 pt-1">
									<span class='tchat-content'>
										{{ t.content }}
									</span>
								</div>
							</div>
						</li>
					{% endfor %}
				</ul>
			{% else %}
				<div class="row">
					<div class="offset-1 col-10">
						Pas de messages
					</div>
				</div>
			{% endif %}

			{# FORM #}
			{% if is_granted('ROLE_USER') %}
				{{ form_start(form_tchat) }}

					<div class="row">

						<div class="offset-1 col-8 p-0">
							{{ form_widget(form_tchat.content) }}
						</div>
						<div class="col-1">
							<button class="btn btn-success input-valid">
								<i class="far fa-comment-dots"></i>
								{{ button_label|default('') }}
							</button>
						</div>
					</div>

				{{ form_end(form_tchat) }}
			{% endif %}
		</div>
	</div>
</div>