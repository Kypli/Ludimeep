/* Shield UI Lite 1.7.31 | Copyright 2013-2017 Shield UI Ltd. | https://www.shieldui.com */

/*Shield UI Lite

Copyright (c) 2013-2017 ShieldUI Ltd., https://www.shieldui.com

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

====

All files located in the node_modules, bower_components and external 
directories are externally maintained libraries used by this software which 
have their own licenses; we recommend you read them, as their terms may 
differ from the terms above.
*/

!function(a,c,g,p){var t,m,l,n=c.ui.Widget,r=c.Class,b=document,k=c.is,y=(c.get,c.format,c.to["int"]),d=(Math.abs,a.each,a.proxy),h=(a.extend,a.map,k.undefined),x=g.opera,A=navigator.userAgent,w=/msie/i.test(A)&&!x,q=(w&&7===b.documentMode,"keydown"),s="click",o="mousedown",u="change",e="select",v="cancel",j="display",i="none",z=function(a){return k.string(a)?a.replace(/^\s+/,"").replace(/\s+$/,""):a};t={cls:p,palette:"basic",basicPalette:{columns:10,tileSize:{width:16,height:16},tileBorderWidth:0,palette:["#FFFFFF","#FFCCCC","#FFCC99","#FFFF99","#FFFFCC","#99FF99","#99FFFF","#CCFFFF","#CCCCFF","#FFCCFF","#CCCCCC","#FF6666","#FF9966","#FFFF66","#FFFF33","#66FF99","#33FFFF","#66FFFF","#9999FF","#FF99FF","#BBBBBB","#FF0000","#FF9900","#FFCC66","#FFFF00","#33FF33","#66CCCC","#33CCFF","#6666CC","#CC66CC","#999999","#CC0000","#FF6600","#FFCC33","#FFCC00","#33CC00","#00CCCC","#3366FF","#6633FF","#CC33CC","#666666","#990000","#CC6600","#CC9933","#999900","#009900","#339999","#3333FF","#6600CC","#993399","#333333","#660000","#993300","#996633","#666600","#006600","#336666","#000099","#333399","#663366","#000000","#330000","#663300","#663333","#333300","#003300","#003333","#000066","#330099","#330033"]},advancedPalette:{type:"hex",buttons:!0,messages:{apply:"Apply",cancel:"Cancel"}},displayInline:!1,showLetter:!1,value:p,valueTemplate:function(a){return a?a.hex?a.hex():a.toRGB().hex():null}},m=n.extend({init:function(q,h){n.fn.init.apply(this,arguments);var g,c=this,e=c.options,l=e.cls,m=k.defined(e.value)?e.value:c._value();if(arguments.length>1&&(h=arguments[1],h.basicPalette&&h.basicPalette.palette&&(e.basicPalette.palette=h.basicPalette.palette)),c.element.css(j,i),c._enabled=!0,c.currentColor=new f({color:m}),e.displayInline)c._buildPalette(),l&&c._picker.addClass(l);else{if(c._picker=g=a('<span class="sui-color-picker-dropdown" tabindex="0"><span class="sui-color-cell sui-unselectable" unselectable="on">&nbsp;</span><span class="sui-caret-container sui-unselectable" unselectable="on"><span class="sui-caret" unselectable="on"></span></span></span>').insertAfter(c.element),l&&c._picker.addClass(l),e.showLetter){var p=g.find(".sui-color-cell");a('<span class="sui-tool-letter">A<span class="sui-selected-color"></span></span>').appendTo(p),g.find(".sui-selected-color").css("background-color",c.currentColor.color.cssa())}else g.find(".sui-color-cell").css("background-color",c.currentColor.color.cssa());g.on(s,c._pickerClicked=d(c._pickerClickedHandler,c)),a(b).on(o+".shieldColorPicker"+c.getInstanceId(),d(c._hidePopup,c))}c.currentColor.color.cssa?c._oldColor=c.currentColor.color.cssa():c._oldColor=c.currentColor.color.toRGB().cssa(),c._changed()},hidePalette:function(){this._hidePopup({})},hide:function(){var b=this;b.options.displayInline?a(b.wrapperDiv).hide():(a(b._picker).hide(),b._hidePopup({}))},show:function(){var b=this;b.options.displayInline?a(b.wrapperDiv).hide():a(b._picker).show()},isVisible:function(){var b=this;return b.options.displayInline?a(b.wrapperDiv).is(":visible"):a(b._picker).is(":visible")},_changed:function(){var a=this;a._value(c.format.call(a,a.options.valueTemplate,a.currentColor.color))},_value:function(){return this.element.attr.apply(this.element,["value"].concat([].slice.call(arguments)))},_buildPalette:function(){var a=this;"basic"==a.options.palette?a._buildBasicPalette():(a._buildAdvancedPalette(),a._changeAdvancedPaletteColor())},_changeAdvancedPaletteColor:function(){var a=this,b=a.currentColor.color.toHSV();a.wrapperDiv&&(a._hue=b.hue,a._isHsl?(b=a.currentColor.color.toHSL(),a._XY(a,{pointer:a.wrapperDiv.find(".sui-color-palette .pointer").get(0),x:b.hue,y:1-b.saturation}),a._Z(a,1-b.lightness,a.wrapperDiv.find(".sui-color-scale .pointer").get(0))):(a._XY(a,{pointer:a.wrapperDiv.find(".sui-color-palette .pointer").get(0),x:b.saturation,y:1-b.value}),a._Z(a,b.hue,a.wrapperDiv.find(".sui-color-scale .pointer").get(0))))},_pickerClickedHandler:function(){var a=this;a.wrapperDiv||a._buildPalette(),a._showPopup()},_showPopup:function(){var c=this,e=c._picker.offset(),l=e.top-a(b).scrollTop(),h=c._picker.height(),m=a(g).height();if("advanced"===c.options.palette&&(c.currentColor.color.cssa?c._oldColor=c.currentColor.color.cssa():c._oldColor=c.currentColor.color.toRGB().cssa()),!c.wrapperDiv||c.wrapperDiv.css(j)==i){c._popupIsOver=!1;var d=e.top+h+1,k=e.left,f=c.wrapperDiv.height();f+l+h>m?d=e.top-f-1:d++,(0>d||a(b).scrollTop()>d)&&(d=e.top+h+1),e.top>d?c._popupIsOver=!0:c._popupIsOver=!1,c.wrapperDiv||this._buildPalette(),c._popupIsOver?(c.wrapperDiv.css({position:"absolute",zIndex:10002,top:d+f,left:k,height:0,display:""}),c.wrapperDiv.animate({height:f,top:d},150)):(c.wrapperDiv.css({position:"absolute",zIndex:10002,top:d-1,left:k}),c.wrapperDiv.slideDown(150,function(){}))}},_hidePopup:function(k){var e,b=this,c=b.options,g=a(k.target);if(("basic"==c.palette||!(g.hasClass("sui-colorpicker")||g.parents(".sui-colorpicker").length>0))&&b.wrapperDiv&&b.wrapperDiv.css(j)!=i){if("basic"===c.palette){var d=b._picker.find(".sui-tool-letter > .sui-selected-color");0===d.length&&(d=b._picker.find(".sui-color-cell")),d.css("background-color",b.currentColor.color.css())}b._popupIsOver?(e=b.wrapperDiv.height(),b.wrapperDiv.animate({height:0,top:b._picker.offset().top},150,function(){a(this).css(j,i).css("height",e)})):b.wrapperDiv.slideUp(150,function(){});var h;h=b.currentColor.color.cssa?b.currentColor.color.cssa():b.currentColor.color.toRGB().cssa(),"basic"!=c.palette&&(c.advancedPalette.buttons?h!==b._oldColor?(b.currentColor=new f({color:b._oldColor}),setTimeout(function(){b._update(),b.trigger(v)},200)):b._changed():(b._changeSelectedColorCell(),b._changed(),b.trigger(u)))}},_buildBasicPalette:function(){var f,e=this,l=e.options,c=l.basicPalette,h=c.palette,k=c.tileSize,m=0,n=a("<div class='sui-colorpicker sui-colorpicker-basic-palette'/>");f=l.displayInline?n.insertAfter(e.element):n.appendTo(b.body).css(j,i);for(var g=0;g<h.length;g++)a("<div class='sui-palette-tile'/>").css({backgroundColor:h[g],width:k.width,height:k.height,borderWidth:c.tileBorderWidth,margin:"0 "+c.tileBorderWidth+"px "+c.tileBorderWidth+"px 0"}).on(o,e._tileClicked=d(e._tileClickedHandler,e)).appendTo(f).addClass(e.currentColor.color.hex().toUpperCase()==h[g].toUpperCase()?"sui-palette-tile-selected":"");m=c.columns*y(k.width)+c.columns*c.tileBorderWidth,f.css("width",m+"px"),e.wrapperDiv=f},_tileClickedHandler:function(c){var b=this;if(b._enabled){b.wrapperDiv.find(".sui-palette-tile-selected").removeClass("sui-palette-tile-selected"),a(c.target).addClass("sui-palette-tile-selected");var d=a(c.target).css("background-color");b.currentColor=new f({color:d}),b.trigger(e),b._changed()}},_buildAdvancedPalette:function(){var k,m,f,e=this,h=e.options;f=h.displayInline?a("<div/>").insertAfter(e.element).addClass("sui-colorpicker"):a("<div/>").appendTo(b.body).addClass("sui-colorpicker").css(j,i),e.wrapperDiv=f,m=a("<div class='sui-hex-wrapper'/>").appendTo(f),e.colorDiv=a("<div class='sui-color-div'/>").appendTo(m),"hsl"==h.advancedPalette.type?e.colorInput=a("<input class='sui-alpha-input'/>").appendTo(m):e.colorInput=a("<input class='sui-hex-input'/>").appendTo(m),e.colorInput.on(q,e._colorInputKeyDown=d(e._colorInputKeyDownHandler,e));var n="<div class='sui-color-palette'><div class='pointer'><div class='shape shape1'></div><div class='shape shape2'></div></div><div class='bg bg1'></div><div class='bg bg2'></div></div><div class='sui-color-scale'><div class='pointer'><div class='shape'></div></div><div class='bg'></div></div>";a(n).appendTo(f);var o=new l({twod:f.find(".sui-color-palette").get(0),pointer:f.find(".sui-color-palette .pointer").get(0),oned:f.find(".sui-color-scale").get(0),isXYslider:!0,cbs:{begin:e._changeXY,change:e._changeXY,end:e._done}},e);e.xy=o;var p=new l({twod:f.find(".sui-color-palette").get(0),pointer:f.find(".sui-color-scale .pointer").get(0),oned:f.find(".sui-color-scale").get(0),isXYslider:!1,cbs:{begin:e._changeZ,change:e._changeZ,end:e._done}},e);if(e.z=p,"rgb"==h.advancedPalette.type){k="<div class='extras'/>";var g=a(k).appendTo(f);a("<span class='sui-r-text'>R:</span>").appendTo(g),e.rInput=a("<input class='sui-r-input'/>").appendTo(g),e._rInputKeyDown=d(e._rInputKeyDownHandler,e),a("<span class='sui-g-text'>G:</span>").appendTo(g),e.gInput=a("<input class='sui-g-input'/>").appendTo(g),e._gInputKeyDown=d(e._gInputKeyDownHandler,e),a("<span class='sui-b-text'>B:</span>").appendTo(g),e.bInput=a("<input class='sui-b-input'/>").appendTo(g),e._bInputKeyDown=d(e._bInputKeyDownHandler,e),c.ui.NumericTextBox&&(e.rInput=new c.ui.NumericTextBox(e.rInput,{min:0,max:255,step:.01,spinners:!1,cls:"rgbInputs",events:{change:e._rInputKeyDown}}),e.gInput=new c.ui.NumericTextBox(e.gInput,{min:0,max:255,step:.01,spinners:!1,cls:"rgbInputs",events:{change:e._gInputKeyDown}}),e.bInput=new c.ui.NumericTextBox(e.bInput,{min:0,max:255,step:.01,spinners:!1,cls:"rgbInputs",events:{change:e._bInputKeyDown}}))}if("hsl"==h.advancedPalette.type){e._isHsl=!0,k="<div class='sui-transparent-slider'><div class='sui-color-scale alpha'><div class='pointer' style='top: 0%;'><div class='shape'></div></div><div class='bg'></div></div></div>",f.addClass("sui-hsl"),a(k).appendTo(f);var r=new l({twod:f.find(".alpha").get(0),pointer:f.find(".alpha .pointer").get(0),oned:f.find(".alpha").get(0),isXYslider:!1,cbs:{begin:e._changeA,change:e._changeA,end:e._done}},e);e.a=r}h.advancedPalette.buttons&&e._buildButtons()},_buildButtons:function(){var b=this,e=this.options.advancedPalette.messages,f=a("<div class='sui-buttons-wrapper'/>").appendTo(this.wrapperDiv);if(c.ui.Button){var g=a("<button type='button'>"+e.apply+"</button>").appendTo(f),h=new c.ui.Button(g,{cls:"sui-apply",events:{click:d(b._applyHandler,this)}});b._applyButton=h;var i=a("<button type='button'>"+e.cancel+"</button>").appendTo(f),j=new c.ui.Button(i,{cls:"sui-cancel",events:{click:d(b._cancelHandler,this)}});b._cancelButton=j}},_applyHandler:function(b){var a=this;a.currentColor.color.cssa?a._oldColor=a.currentColor.color.cssa():a._oldColor=a.currentColor.color.toRGB().cssa(),a._changeSelectedColorCell(),a.options.displayInline||a._hidePopup(b),a._changed(),a.trigger(u)},_changeSelectedColorCell:function(){var b,a=this,c=a.options,d=a._picker;b=a.currentColor.color.cssa?a.currentColor.color.cssa():a.currentColor.color.toRGB().cssa(),c.displayInline||(c.showLetter?d.find(".sui-selected-color").css("background-color",b):d.find(".sui-color-cell").css("background-color",b))},_cancelHandler:function(b){var a=this;a.options.displayInline?(a.currentColor=new f({color:a._oldColor}),setTimeout(function(){a._update(),a.trigger(v)},200)):a._hidePopup(b)},_update:function(){var b,a=this,c=a._shouldUpdateMainInput,d=a._shouldUpdateRgbInputs;a._isHsl?(b=a.currentColor.color.toHSL(),a._XY(a,{pointer:a.wrapperDiv.find(".sui-color-palette .pointer").get(0),x:b.hue,y:1-b.saturation}),a._shouldUpdateMainInput=c,a._Z(a,1-b.lightness,a.wrapperDiv.find(".sui-color-scale .pointer").get(0)),a.Y(a.wrapperDiv.find(".alpha .pointer").get(0),(1-b.alpha).toFixed(2))):(b=a.currentColor.color.toHSV(),a._XY(a,{pointer:a.wrapperDiv.find(".sui-color-palette .pointer").get(0),x:b.saturation,y:1-b.value}),a._shouldUpdateMainInput=c,a._shouldUpdateRgbInputs=d,a._Z(a,b.hue,a.wrapperDiv.find(".sui-color-scale .pointer").get(0)))},_rInputKeyDownHandler:function(b){var a=this;setTimeout(function(){var c=b.value;a.currentColor.color.red=parseFloat(c)/255,a._shouldUpdateRgbInputs=!1,a._update(),a.trigger(e)},1)},_gInputKeyDownHandler:function(b){var a=this;setTimeout(function(){var c=b.value;a.currentColor.color.green=parseFloat(c)/255,a._shouldUpdateRgbInputs=!1,a._update(),a.trigger(e)},1)},_bInputKeyDownHandler:function(b){var a=this;setTimeout(function(){var c=b.value;a.currentColor.color.blue=parseFloat(c)/255,a._shouldUpdateRgbInputs=!1,a._update(),a.trigger(e)},1)},_colorInputKeyDownHandler:function(b){var a=this;b.ctrlKey||setTimeout(function(){var c=b.currentTarget,d=c.value,g=a.currentColor;a.currentColor=new f({color:d}),k.object(a.currentColor.color)?(a._shouldUpdateRgbInputs=!0,a._shouldUpdateMainInput=!1,a._update()):a.currentColor=g,a.trigger(e)},1)},_changeA:function(a,b){if(a.colorPicker._enabled){a.colorPicker.colorInput.val("rgba(0,0,0,1)");a.colorPicker._A(a.colorPicker,a.colorPicker.clamp(b.y,0,1),a.colorPicker.a.pointer)}},_changeZ:function(a,b){if(a.colorPicker._enabled){a.colorPicker._isHsl?a.colorPicker.colorInput.val("rgba(0,0,0,1)"):a.colorPicker.colorInput.val("#000000");a.colorPicker._Z(a.colorPicker,a.colorPicker.clamp(b.y,0,1),a.colorPicker.z.pointer);a.colorPicker.trigger(e)}},_changeXY:function(a,b){if(a.colorPicker._enabled){a.colorPicker._isHsl?a.colorPicker.colorInput.val("rgba(0,0,0,1)"):a.colorPicker.colorInput.val("#000000");a.colorPicker._XY(a.colorPicker,{x:a.colorPicker.clamp(b.x,0,1),y:a.colorPicker.clamp(b.y,0,1),pointer:b.pointer},a.colorPicker.xy);a.colorPicker.X(b.pointer,b.x),a.colorPicker.Y(b.pointer,b.y),a.colorPicker.trigger(e)}},_XY:function(a,b){var c,d=this;if(a._enabled){if(a.X(b.pointer,b.x),a.Y(b.pointer,b.y),d._isHsl){c=a.currentColor.color.toHSL?a.currentColor.color.toHSL():a.currentColor.color,c.hue=b.x,c.saturation=1-b.y;var g=c.lightness;c.lightness=.5,d.wrapperDiv.find(".sui-color-scale").css("background-color",c.toRGB().cssa()),c.lightness=g}else c=a.currentColor.color.toHSV(),b.x>1&&(b.x=1),b.x<0&&(b.x=0),b.y<0&&(b.y=0),b.y>1&&(b.y=1),c.saturation=b.x,c.value=1-b.y,0===c.hue&&(c.hue=d._hue);var e=c.toRGB(),f=a.colorInput.val();f!=e.hex()&&(d._shouldUpdateMainInput?(f.length>4||0===f.length)&&(d._isHsl?a.colorInput.val(e.cssa()):a.colorInput.val(e.hex())):d._shouldUpdateMainInput=!0),a.rInput&&(d._shouldUpdateRgbInputs?(a.rInput.value((255*e.red).toFixed(2)),a.gInput.value((255*e.green).toFixed(2)),a.bInput.value((255*e.blue).toFixed(2))):d._shouldUpdateRgbInputs=!0),a.colorDiv.get(0).style.background=e.cssa(),a.currentColor.color=e}},_Z:function(a,f,g){var b,c=this,e=a.colorInput.val();if(c._isHsl)b=a.currentColor.color.toHSL?a.currentColor.color.toHSL():a.currentColor.color,a.Y(g,f),b.lightness=1-f,a.colorDiv.get(0).style.background=b.toRGB().cssa(),a.currentColor.color=b,e!=b.toRGB().hex()&&(c._shouldUpdateMainInput?(e.length>4||0===e.length)&&(c._isHsl?a.colorInput.val(b.toRGB().cssa()):a.colorInput.val(b.toRGB().hex())):c._shouldUpdateMainInput=!0);else{b=a.currentColor.color.toHSV(),a.Y(g,f),a._rgbBg(a,a.wrapperDiv.find(".sui-color-palette").get(0),f),c._hue=b.hue=f;var d=b.toRGB();e!=d.hex()&&(e.length>4||0===e.length)&&(c._isHsl?a.colorInput.val(d.cssa()):a.colorInput.val(d.hex())),a.rInput&&(c._shouldUpdateRgbInputs?(a.rInput.value((255*d.red).toFixed(2)),a.gInput.value((255*d.green).toFixed(2)),a.bInput.value((255*d.blue).toFixed(2))):c._shouldUpdateRgbInputs=!0),a.colorDiv.get(0).style.background=d.cssa(),a.currentColor.color=d}},_A:function(a,f,g){var b,c=this,d=a.colorInput.val();b=a.currentColor.color.toHSL?a.currentColor.color.toHSL():a.currentColor.color,a.Y(g,f),b.alpha=(1-f).toFixed(2),a.colorDiv.get(0).style.background=b.toRGB().cssa(),a.currentColor.color=b,d!=b.toRGB().hex()&&(c._shouldUpdateMainInput?(d.length>4||0===d.length)&&(a.colorInput.val(b.toRGB().cssa()),c.trigger(e)):c._shouldUpdateMainInput=!0)},_rgbBg:function(a,b,c){var d=new f({}).HSV(c,1,1).toRGB().cssa();a.BG(b,d)},clamp:function(a,b,c){return Math.min(Math.max(a,b),c)},X:function(a,b){a.style.left=this.clamp(100*b,0,100)+"%"},Y:function(a,b){a.style.top=this.clamp(100*b,0,100)+"%"},BG:function(a,b){a.style.background=b},_done:function(){},enabled:function(){var b,a=this,c=(a.options,[].slice.call(arguments));return c.length>0?(b=c[0],b?(a._picker&&a._picker.removeClass("sui-colorpicker-disabled"),a.wrapperDiv&&a.wrapperDiv.removeClass("sui-colorpicker-disabled")):(a._picker&&a._picker.addClass("sui-colorpicker-disabled"),a.wrapperDiv&&a.wrapperDiv.addClass("sui-colorpicker-disabled")),a._applyButton&&a._applyButton.enabled(b),a._cancelButton&&a._cancelButton.enabled(b),b?(a.colorInput&&a.colorInput.removeAttr("readonly"),a.rInput&&(a.rInput.enable(!0),a.gInput.enable(!0),a.bInput.enable(!0))):(a.colorInput&&a.colorInput.attr("readonly","readonly"),a.rInput&&(a.rInput.enable(!1),a.gInput.enable(!1),a.bInput.enable(!1))),a._enabled=b,void 0):a._enabled},value:function(){var c,b=this,g=b.options,h=[].slice.call(arguments);if(!(h.length>0))return c=b.currentColor.color,c.css||(c=c.toRGB()),c;if(c=h[0],b.currentColor=new f({color:c}),"basic"==g.palette){var i=b.currentColor.color.css();if(b.wrapperDiv)for(var d=b.wrapperDiv.find(".sui-palette-tile"),e=0;e<d.length;e++)d[e].style.backgroundColor.replace(/\s+/g,"")===i.replace(/\s+/g,"")&&(d.removeClass("sui-palette-tile-selected"),a(d[e]).addClass("sui-palette-tile-selected"))}else b._changeAdvancedPaletteColor();if(!g.displayInline)if(g.showLetter){b._picker.find(".sui-color-cell");b._picker.find(".sui-selected-color").css("background-color",b.currentColor.color.cssa())}else b._picker.find(".sui-color-cell").css("background-color",b.currentColor.color.cssa());b._changed()},destroy:function(){var c=this;c.element.show(),c.wrapperDiv.remove(),c.colorInput&&c.colorInput.off(q,c._colorInputKeyDown),c.rInput&&(c.rInput.destroy(),c.gInput.destroy(),c.bInput.destroy()),c.options.displayInline&&"basic"==c.options.palette&&(c.wrapperDiv.find(".sui-palette-tile").off(s,c._tileClicked),c.wrapperDiv.remove()),c._applyButton&&c._applyButton.destroy(),c._cancelButton&&c._cancelButton.destroy(),a(b).off(o+".shieldColorPicker"+c.getInstanceId()),c._tileClicked=c._rInputKeyDown=c._gInputKeyDown=c._bInputKeyDown=c._hidePopupDelegate=c._picker=c._applyButton=c._cancelButton=c._isHsl=c.currentColor=c.wrapperDiv=c.colorInput=c.colorDiv=c.rInput=c.gInput=c._enabled=c._popupIsOver=c.bInput=null,n.fn.destroy.call(c)}}),l=r.extend({init:function(b,g){var a=this,h=b.isXYslider,d=b.cbs,e=b.twod,c=b.pointer,f=b.oned;return a.colorPicker=g,h?(a.drag(e,a.attachPointer(a,d,c)),{background:e,pointer:c}):(a.drag(f,a.attachPointer(a,d,c)),{background:f,pointer:c})},drag:function(a,b){return a?void(this.isTouch()?this.dragTemplate(a,b,"touchstart","touchmove","touchend"):this.dragTemplate(a,b,"mousedown","mousemove","mouseup")):void console.warn("drag is missing elem!")},attachPointer:function(f,a,d){function e(a){return function(c,b){b.pointer=d,a(c,b)}}var c={};for(var b in a)a.hasOwnProperty(b)&&(c[b]=e(a[b]));return c},isTouch:function(){return"undefined"!=typeof g.ontouchstart},dragTemplate:function(d,c,h,e,f){var a=this,g=!1;c=a.getCbs(c);var i=c.begin,j=c.change,k=c.end;a.on(d,h,function(c){function h(){g=!1,a.off(b,e,l),a.off(b,f,h),a.callCb(k,d,c)}g=!0;var l=a.partial(a,a.callCb,j,d);a.on(b,e,l),a.on(b,f,h),a.callCb(i,d,c)})},on:function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)},off:function(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent&&a.detachEvent("on"+b,c)},getCbs:function(a){if(a)return{begin:a.begin||function(){},change:a.change||function(){},end:a.end||function(){}};var b,c;return{begin:function(a){b={x:a.elem.offsetLeft,y:a.elem.offsetTop},c=a.cursor},change:function(a){a.elem.style.left=b.x+a.cursor.x-c.x+"px",a.elem.style.top=b.y+a.cursor.y-c.y+"px"},end:function(){}}},callCb:function(i,b,c){var e=this;c.preventDefault();var f=a(b).offset(),j=b.clientWidth,k=b.clientHeight,d={x:e.cursorX(b,c),y:e.cursorY(b,c)},g=(d.x-f.left)/j,h=(d.y-f.top)/k;i(this,{x:isNaN(g)?0:g,y:isNaN(h)?0:h,cursor:d,elem:b,e:c})},partial:function(e,b){var a=Array.prototype.slice,c=a.apply(arguments,[2]),d=this;return function(){return b.apply(d,c.concat(a.apply(arguments)))}},cursorX:function(c,a){var d=this;if(d.isFixed(c)){var e=parseInt(d.getStyle(b.body,"marginLeft"),10)-d.calc(c,"scrollLeft")+g.pageXOffset+c.style.marginLeft;return a.clientX-e}return a.pageX?a.pageX:a.clientX?a.clientX+b.body.scrollLeft:void 0},cursorY:function(c,a){var d=this;if(d.isFixed(c)){var e=parseInt(d.getStyle(b.body,"marginTop"),10)-d.calc(c,"scrollTop")+g.pageYOffset+c.style.marginTop;return a.clientY-e}return a.pageY?a.pageY:a.clientY?a.clientY+b.body.scrollTop:void 0},calc:function(a,c){for(var b=0;"HTML"!=a.nodeName;)b+=a[c],a=a.parentNode;return b},isFixed:function(a){for(;"HTML"!=a.nodeName&&"fixed"!=this.usedStyle(a,"position");)a=a.parentNode;return"HTML"==a.nodeName?!1:!0},getStyle:function(a,c){return a.currentStyle?a.currentStyle[c]:b.defaultView&&b.defaultView.getComputedStyle?b.defaultView.getComputedStyle(a,"")[c]:a.style[c]},usedStyle:function(a,c){var b;return b=g.getComputedStyle?g.getComputedStyle(a,null):a.currentStyle,b[c]}});var f=r.extend({init:function(e){var a=this,b=e.color;if(h(b)||null===b||""===z(b))a.color=a.getColor("#000");else if(k.integer(b)){var c=b+0,d=[(16711680&c)>>16,(65280&c)>>8,255&c];a.color=a.getColor("rgb("+d[2]+","+d[1]+","+d[0]+")")}else a.color=a.getColor(b)},getColor:function(b){var g,a,c,f=this,d=/\s*(\.\d+|\d+(?:\.\d+)?)(%)?\s*/,j=/\s*(\.\d+|\d+(?:\.\d+)?)\s*/,o=new RegExp("^(rgb|hsl|hsv)a?\\("+d.source+","+d.source+","+d.source+"(?:,"+j.source+")?\\)$","i");if(g=b.toLowerCase(),"transparent"===g&&(b="rgba(0,0,0,0)"),a=b.match(o)){var i=a[1].toUpperCase(),k=h(a[8])?a[8]:parseFloat(a[8]),e="H"===i[0],m=a[3]?100:e?360:255,n=a[5]||e?100:255,l=a[7]||e?100:255;return f[i](parseFloat(a[2])/m,parseFloat(a[4])/n,parseFloat(a[6])/l,k)}return b.length<6&&(b=b.replace(/^#?([0-9a-f])([0-9a-f])([0-9a-f])$/i,"$1$1$2$2$3$3")),c=b.match(/^#?([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])$/i),c?f.RGB(parseInt(c[1],16)/255,parseInt(c[2],16)/255,parseInt(c[3],16)/255):b},RGB:function(c,d,e,a){var b=this;return{red:c,green:d,blue:e,alpha:h(a)?1:a,hex:function(){var a=(65536*Math.round(255*this.red)+256*Math.round(255*this.green)+Math.round(255*this.blue)).toString(16);return"#"+"00000".substr(0,6-a.length)+a},hexa:function(){var a=Math.round(255*this.alpha).toString(16);return"#"+"00".substr(0,2-a.length)+a+this.hex().substr(1,6)},css:function(){return"rgb("+Math.round(255*this.red)+","+Math.round(255*this.green)+","+Math.round(255*this.blue)+")"},cssa:function(){return"rgba("+Math.round(255*this.red)+","+Math.round(255*this.green)+","+Math.round(255*this.blue)+","+this.alpha+")"},toHSV:function(){var e,f=this.red,c=this.green,d=this.blue,g=Math.max(f,c,d),i=Math.min(f,c,d),h=g-i,j=0===g?0:h/g,k=g;if(0===h)e=0;else switch(g){case f:e=(c-d)/h/6+(d>c?1:0);break;case c:e=(d-f)/h/6+1/3;break;case d:e=(f-c)/h/6+2/3}return b.HSV(e,j,k,a)},toHSL:function(){var a=this.toHSV();return b.HSV(a.hue,a.saturation,a.value,a.alpha).toHSL()},toCMYK:function(){var g=this.red,h=this.green,i=this.blue,d=1-g,e=1-h,f=1-i,c=1;return g||h||i?(c=Math.min(d,Math.min(e,f)),d=(d-c)/(1-c),e=(e-c)/(1-c),f=(f-c)/(1-c)):c=1,b.CMYK(d,e,f,c,a)}}},HSV:function(c,d,e,a){var b=this;return{hue:c,saturation:d,value:e,alpha:h(a)?1:a,toRGB:function(){var d,f,e,k=this.hue,h=this.saturation,c=this.value,l=Math.min(5,Math.floor(6*k)),m=6*k-l,g=c*(1-h),i=c*(1-m*h),j=c*(1-(1-m)*h);switch(l){case 0:d=c,f=j,e=g;break;case 1:d=i,f=c,e=g;break;case 2:d=g,f=c,e=j;break;case 3:d=g,f=i,e=c;break;case 4:d=j,f=g,e=c;break;case 5:d=c,f=g,e=i}return b.RGB(d,f,e,a)},toHSL:function(){var c,a=(2-this.saturation)*this.value,e=this.saturation*this.value,d=1>=a?a:2-a;return c=1e-9>d?0:e/d,b.HSL(this.hue,c,a/2,this.alpha)}}},HSL:function(b,c,d,a){var e=this;return{hue:b,saturation:c,lightness:d,alpha:h(a)?1:a,toHSV:function(){var c,a=2*this.lightness,b=this.saturation*(1>=a?a:2-a);return c=1e-9>a+b?0:2*b/(a+b),e.HSV(this.hue,c,(a+b)/2,this.alpha)},toRGB:function(){return this.toHSV().toRGB()}}},CMYK:function(b,c,d,e,a){var f=this;return{cyan:b,magenta:c,yellow:d,black:e,alpha:h(a)?1:a,toRGB:function(){return f.RGB(1-this.cyan*(1-this.black)-this.black,1-this.magenta*(1-this.black)-this.black,1-this.yellow*(1-this.black)-this.black,this.alpha)}}},destroy:function(){this.color=null}});m.defaults=t,c.ui.plugin("ColorPicker",m),c.ui.ColorPicker=m}(jQuery,shield,this);