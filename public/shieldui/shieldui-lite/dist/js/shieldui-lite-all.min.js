/* Shield UI Lite 1.7.31 | Copyright 2013-2017 Shield UI Ltd. | https://www.shieldui.com */

/*Shield UI Lite

Copyright (c) 2013-2017 ShieldUI Ltd., https://www.shieldui.com

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

====

All files located in the node_modules, bower_components and external 
directories are externally maintained libraries used by this software which 
have their own licenses; we recommend you read them, as their terms may 
differ from the terms above.
*/

!function(b,g,j){function aa(a){var b,c="";a=Math.abs(a);do b=a%26,c=String.fromCharCode(b+97)+c,a=(a-b)/26;while(a>0);return c}function V(){return E+aa(Q++)}function y(){return R++}function _(){var b=[8,9,"a","b"],a=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return a()+a()+"-"+a()+"-4"+a().substr(0,3)+"-"+b[Math.floor(4*Math.random())]+a().substr(0,3)+"-"+a()+a()+a()}function Y(a,b){return typeof Globalize===f&&typeof Globalize.format===f?Globalize.parseDate(a,b):new Date(a)}function X(b){var c;return c=a.defined(b)&&typeof Globalize===f&&typeof Globalize.parseFloat===f?Globalize.parseFloat(b):Number(b),isNaN(c)?null:c}function z(c){if(!a.defined(c)||""===c)return"";var d=/\{([\.\d\w\:\-\/\' \[\]]+)\}/g,b=arguments,e=b&&b.length>1&&typeof b[1]===s,g=typeof Globalize===f&&typeof Globalize.format===f;return c.replace(d,function(i,a){var c,d,f=a.indexOf(":");if(f>0){var h=a;a=h.substring(0,f),d=h.substring(f+1)}return c=e?/^\d+$/.test(a)?b[parseInt(a,10)+1]:C(b[1],a):b[parseInt(a,10)+1],d&&g&&(c=Globalize.format(c,d)),c})}function u(b){if(a.func(b)){var c=[].slice.call(arguments);return c.shift(),b.apply(this,c)}return z.apply(this,arguments)}function N(){return typeof Globalize===f&&Globalize.cultures&&Globalize.cultures[Globalize.cultureSelector]&&Globalize.cultures[Globalize.cultureSelector].calendar?Globalize.cultures[Globalize.cultureSelector].calendar:{days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},firstDay:0,months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]}}}function U(){return typeof Globalize===f&&Globalize.cultures&&Globalize.cultures[Globalize.cultureSelector]&&Globalize.cultures[Globalize.cultureSelector].numberFormat?Globalize.cultures[Globalize.cultureSelector].numberFormat.currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}}function T(a,b){if(b=b!==j?b:l.dieOnError)throw new Error(a);g.console&&(g.console.error?console.error(a):console.log(a))}function d(a){var b=Object.prototype.toString.call(a);return null===a?"null":a===j?"undefined":b.substr(8,b.length-9).toLowerCase()}function t(f){var g,h,e,i,c,l=Array.apply(null,arguments),m=a.array(f)&&f.length&&!q(f,function(b){return!a.func(b)}).length,d=l[1],n=function(a,b){return a instanceof b};if(!m)return k.apply(b,l);for(a.object(d)||a.array(d)||(d={}),h=2;h<l.length;h++)if(g=l[h])for(e in g)g.hasOwnProperty(e)&&(c=g[e],i=d[e],c&&q(f,A(n,null,c)).length?d[e]=c:a.object(c)||a.array(c)?(a.object(i)||(i=d[e]=a.array(c)?[]:{}),d[e]=t(f,i,c)):a.date(c)?d[e]=new Date(c.getTime()):c!==j&&(d[e]=c));return d}function B(b){var a,c=[];for(a in b)b.hasOwnProperty(a)&&c.push(a);return c}function C(d,b){var c;if(!a.string(b))throw new Error("shield.get: parameter 'path' must be a string.");if(b=F(b),c=x[b])return c(d);try{c=new Function("a","try{return a"+b+"}catch(e){return arguments[1];}")}catch(e){throw new Error("shield.get: invalid 'path' parameter")}return x[b]=c,c(d)}function S(d,b,e){var c;if(!a.string(b))throw new Error("shield.set: parameter 'path' must be a string");if(b=F(b),c=J[b])return c(d,e);try{c=new Function("obj,val","obj"+b+"=val;")}catch(f){throw new Error("shield.set: invalid 'path' parameter")}return J[b]=c,c(d,e),d}function F(g){var d,b,f,a,e,c=g.split(".");for(b=0,f=c.length;f>b;b++)a=c[b],d=a.indexOf("["),a&&(0>d?(e=a.indexOf("'")<0?"'":'"',a=c[b]="["+e+a+e+"]"):d>0&&(a=c[b]="."+a));return c.join("")}function H(d,e){var c,a,f=[],g=b(d).length,h=e?p+"-"+e:p;for(a=0;g>a;a++)c=b(b(d)[a]).data(h),c&&f.push(c);return f}function P(a,c){l.ui[a]=c,b.fn[E+a]=function(d){var e,g=this;return typeof d===G?(e=[].slice.call(arguments,1),this.each(function(){var c,h,i=b(this).data(p);if(!i)throw new Error(u("shield: cannot call method '{0}' on uninitialized {1}.",d,a));if(c=i[d],typeof c!==f)throw new Error(u("shield: cannot find method '{0}' of {1}",d,a));return h=c.apply(i,e),h!==j?(g=h,!1):void 0}),g):this.each(function(){var e=new c(this,d);b(this).data(p,e),b(this).data(p+"-"+a,e)})}}function i(a){a?e.onselectstart==i.handler&&(e.onselectstart=i.onselectstart,e.ondragstart=i.ondragstart):e.onselectstart!=i.handler&&(i.onselectstart=e.onselectstart,i.ondragstart=e.ondragstart,e.onselectstart=e.ondragstart=i.handler)}var l=g.shield=g.shield||{},k=b.extend,q=b.grep,A=b.proxy,c=navigator.userAgent,e=document,E="shield",p="shieldWidget",s="object",G="string",f="function",v="array",w="number",K="date",O="boolean",M="null",L="undefined",D="sui-vc-top",r=function(){},Q=100,R=1e3,h={},x={},J={},n=function(){},W={SVG_NS:"http://www.w3.org/2000/svg",XHTML_NS:"http://www.w3.org/1999/xhtml",KeyCode:{BACK:8,TAB:9,ENTER:13,CTRL:17,ESC:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DEL:46}};n.extend=function(a){var f,b,c,h,g=this,e=a&&a.init?a.init:function(){g.apply(this,arguments)},i=function(){};i.prototype=g.prototype,f=e.fn=e.prototype=new i;for(b in a)a.hasOwnProperty(b)&&(c=a[b],h=d(c),c&&typeof c===s?f[b]=k(!0,h===v?[]:{},g.prototype[b],c):f[b]=c);return f.constructor=e,e.extend=g.extend,e},Date.prototype.toISOString||!function(){function a(b){var a=String(b);return 1===a.length&&(a="0"+a),a}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}();var m=n.extend({init:function(b){var a,d=this,c=(b||{}).events;d.events={},b=b||{};for(a in c)typeof c[a]===f&&d.on(a,c[a])},on:function(b,f,m){var h,c,e,l,i,g=this,k=g.events,d=o.array(b),j=a.func(f);if(a.object(b)){d=[];for(i in b)b.hasOwnProperty(i)&&d.push(i);j=!1,f=b}for(e=0,l=d.length;l>e;e++)b=d[e],h=g._eventType(b),c=j?f:f[b],a.func(c)&&(m&&(c=g._one(b,c)),(k[h]||(k[h]=[])).push({name:b,handler:c}));return g},_one:function(b,c){var d=this,a=function(){d.off(b,a),c.apply(this,arguments)};return a},_eventType:function(a){var b=(a+="").indexOf(".");return b>-1?a.substring(0,b):a},_eventNameMatch:function(f,g){var d,c,h,e,j=this,k=j._eventType(f),i=j._eventType(g);if(f+="",g+="",(k===i||!i)&&(d=f.split("."),d.shift(),d=q(d,function(b){return a.string(b)&&b.length>0}),c=g.split("."),i&&c.shift(),c=q(c,function(b){return a.string(b)&&b.length>0}),d&&c)){for(h=0,e=0;e<c.length;e++)b.inArray(c[e],d)>-1&&h++;return h>=c.length}return!1},one:function(a,b){this.on(a,b,!0)},off:function(c,g){var e,d,f,k,b,m,i=this,h=i.events,l=o.array(c),n=a.func(g);if(a.object(c)){l=[];for(m in c)c.hasOwnProperty(m)&&l.push(m);n=!1,g=c}if(a.string(c)&&0===c.indexOf(".")){for(e in h)if(h.hasOwnProperty(e)){for(d=h[e]||[],f=n?g:g||j,b=d.length-1;b>=0;b--)!i._eventNameMatch(d[b].name,c)||a.defined(f)&&d[b].handler!==f||d.splice(b,1);d.length||delete h[e]}}else for(k=0;k<l.length;k++){for(c=l[k],e=i._eventType(c),d=h[e]||[],f=n?g:(g||{})[c],b=d.length-1;b>=0;b--)!i._eventNameMatch(d[b].name,c)||a.defined(f)&&d[b].handler!==f||d.splice(b,1);d.length||delete h[e]}return i},trigger:function(e,f){var a,c,b=this,g=b._eventType(e),d=(b.events[g]||[]).slice();for(a=0,c=d.length;c>a;a++)d[a].handler.apply(b,[].slice.call(arguments,1));return f},destroy:function(){this.events={}}}),I=n.extend({init:function(c){var a=!1,b=!1;k(this,{timeStamp:(new Date).getTime(),isDefaultPrevented:function(){return a},isPropagationStopped:function(){return b},preventDefault:function(){a=!0},stopPropagation:function(){b=!0}},c)}}),Z=m.extend({init:function(e,a){var c=this,d=c.constructor;a=a||{},c.element=b(e),c.initialOptions=a,c.options=k(!0,{},d.defaults,(d.themes||{})[a.theme],a),c._iid=y(),m.fn.init.call(c,a)},getInstanceId:function(){return this._iid},refresh:function(a){this.refreshWithElement(this.element,a)},refreshWithElement:function(b,c){var a=this,d=t([n],a.options,c);a.destroy(),a.init(b,d)},hide:function(){b(this.element).hide()},show:function(){b(this.element).show()},isVisible:function(){return b(this.element).is(":visible")},visible:function(){var a=this,b=[].slice.call(arguments);return b.length>0?void(b[0]?a.show():a.hide()):a.isVisible()},focus:function(){b(this.element).focus()},trigger:function(g,c,h){var d,e=this;return c=a.event(c)?{domEvent:c}:c,!c||!c.domEvent||c.domEvent instanceof b.Event||(c.domEvent=b.Event(c.domEvent)),d=new I(k({type:g,target:e},c)),m.fn.trigger.call(e,g,d),typeof h!==f||d.isDefaultPrevented()||h.call(e,d),d}}),$=m.extend({options:{total:0,pageBuffer:2,createContainer:r,getItems:r,eventNS:".shieldVirtualized",skipRender:!1},init:function(d,c){var a=this;c=a.options=k({},a.options,c),a.element=b(d),m.fn.init.call(a,c),c.skipRender||a.render()},_elements:function(){var c,e,a=this,f=a.element,d=a.options;c=a.wrapper=f.off(d.eventNS).empty().css({overflow:"auto",position:"relative"}).on("scroll"+d.eventNS,A(a.scroll,a)).append('<div class="sui-virtualized"/>').find(".sui-virtualized").css({position:"relative",overflow:"visible"}),e=a.container=b(d.createContainer(c)),c.children().css({position:"absolute",top:0}),a._positionedContainer=c.children().first()},_dimensions:function(){var c=this,d=c.options,e=d.total,a=d.itemHeight,f=Math.min(e*a,l.support.maxElementHeight),b=c.element.height(),g=Math.ceil(b/a),h=g*a,i=f-b;return{total:e,itemHeight:a,totalHeight:f,viewportHeight:b,itemsPerPage:g,pageHeight:h,totalScrollableHeight:i}},render:function(){var b,a=this,d=a.element,c=a.options;a._elements(),a.prevScroll=0,b=a.dimensions=a._dimensions(),d.find(".sui-virtualized").height(b.totalHeight),a._renderItems(0,Math.min(c.total,(c.pageBuffer+1)*b.itemsPerPage))},_renderItems:function(d,e,c){var b=this;b.options.getItems(d,e,function(f,d){var e,g=f.length;for(d=a.defined(d)?!!d:!0,d&&b.container.empty(),e=0;g>e;e++)b.container.append(f[e]);c&&c()})},scroll:function(){var e,i,j,b=this,m=b.options,d=m.pageBuffer,a=b.dimensions,f=b.element.scrollTop(),p=b.prevScroll,k=f-p,g=f/a.totalScrollableHeight,h=b._positionedContainer,l=h.data(D)||0,c=f-g*(a.pageHeight-a.viewportHeight),o=k>0&&c-l>(d/4+1)*a.pageHeight,n=0>k&&c-l<=d/4*a.pageHeight;(n||o)&&(i=Math.min(a.total,Math.floor(g*a.total-g*a.itemsPerPage)),e=Math.max(0,i-d/2*a.itemsPerPage),j=Math.min(a.total,e+(d+1)*a.itemsPerPage),c=Math.max(0,c-(i-e)*a.itemHeight),b._renderItems(e,j,function(){h.css("top",c),h.data(D,c)})),b.prevScroll=f},scrollTop:function(b){var d=this,c=d.element;return a.defined(b)?void c.scrollTop(b):c.scrollTop()},destroy:function(){var a=this,b=a.options;a.element.off(b.eventNS),a.element=null,b.createContainer=r,b.getItems=r,m.fn.destroy.call(a)}});b.fn.swidget=function(b){var a=H(this,b);return a.length?a.length>1?a:a[0]:null},b.fn.swidgets=function(a){return H(this,a)};var a={string:function(a){return d(a)===G},number:function(a){return d(a)===w},integer:function(a){return d(a)===w&&/^[\+\-]?\d+$/.test(a+"")},"float":function(a){return d(a)===w&&/^[\+\-]?\d+\.\d+$/.test(a+"")},func:function(a){return d(a)===f},object:function(a){return d(a)===s},array:function(a){return d(a)===v},date:function(a){return d(a)===K},"boolean":function(a){return d(a)===O},"null":function(a){return d(a)===M},undefined:function(a){return d(a)===L},defined:function(a){return a!==j&&null!==a},event:function(a){return typeof g.Event==f&&a instanceof g.Event||a&&a.altKey!==j}},o={"int":function(a,b){return parseInt(a,b||10)},"float":function(a){return parseFloat(a)},number:function(a){return X(a+"")},array:function(a){return a instanceof Array?a:a!==j?[a]:[]},string:function(a){return a+""},key:function(a){var g,c,e,f,h=d(a);switch(h){case M:case L:return h;case s:return g=B(a).sort(),c=[],b.each(g,function(d,b){c.push(b+":"+o.key(a[b]))}),"{"+c.join(",")+"}";case v:for(c="[",e=0,f=a.length;f>e;e++)c+=o.key(a[e]),f-1>e&&(c+=",");return c+="]";case K:return a.toISOString();default:return a+""}}};!function(){h.stableSort=function(){var a="abcdefghijklmnopqrstuvwxyz";return"xyzvwtursopqmnklhijfgdeabc"==a.split("").sort(function(b,c){return~~(a.indexOf(c)/2.3)-~~(a.indexOf(b)/2.3)}).join("")}(),h.scrollbar=function(){var b,a=e.createElement("div");return a.style.cssText="overflow:scroll;overflow-x:hidden;zoom:1;clear:both",a.innerHTML="&nbsp;",e.body.appendChild(a),b=a.offsetWidth-a.scrollWidth,e.body.removeChild(a),b},h.isRtl=function(a){return b(a).closest(".sui-rtl").length>0},h.transitions=function(){var b,c=(e.body||e.documentElement).style,d="Transition",f=["Moz","webkit","Webkit","Khtml","O","ms"];if(a.string(c[d.toLowerCase()]))return!0;for(b=0;b<f.length;b++)if(a.string(c[f[b]+d]))return!0;return!1}(),h.hasScrollbarY=function(c){var a=b(c).get(0);return a.scrollHeight>a.clientHeight},h.hasScrollbarX=function(c){var a=b(c).get(0);return a.scrollWidth>a.clientWidth}}(),function(){l.rAF=function(a){return(g.requestAnimationFrame||g.webkitRequestAnimationFrame||g.mozRequestAnimationFrame||function(a){return this.setTimeout(a,1e3/60)}).call(g,a)},l.cAF=function(a){return(g.cancelAnimationFrame||g.clearTimeout)(a)}}(),function(){var b=/MSIE/i.test(c),d=/Trident/i.test(c),e=/Firefox/i.test(c),f=/Opera/i.test(c),g=/Safari/i.test(c),a=/Chrome/i.test(c),i=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(c);h.browser={ie:b||d,firefox:e,opera:f,safari:!a&&g,chrome:a,mobile:i,version:b?parseInt(c.substr(c.indexOf("MSIE ")+5),10):d?parseInt(c.substr(c.indexOf("rv:")+3),10):e?parseInt(c.substr(c.indexOf("Firefox/")+8),10):f?parseInt(c.substr(c.indexOf("Version/")+8),10):a?parseInt(c.substr(c.indexOf("Chrome/")+7),10):g?parseInt(c.substr(c.indexOf("Version/")+8),10):0}}(),b(function(){for(var a,f=1e6,g=1e9,c=b('<div style="display:none;"/>').appendTo(e.body),d=f;;){if(a=d+f,c.css("height",a),a>g||c.height()!==a)break;d=a}c.remove(),h.maxElementHeight=d}),i.handler=function(){return!1},k(l,{Class:n,Dispatcher:m,Event:I,Constants:W,format:u,formatString:z,parseDate:Y,getCalendarInfo:N,getCurrencyInfo:U,error:T,dieOnError:!0,iid:y,strid:V,guid:_,support:h,extend:t,selection:i,type:d,is:a,to:o,keys:B,get:C,set:S,ui:k({},l.ui||{},{Widget:Z,VirtualizedContainer:$,plugin:P})})}(jQuery,this),function(d,i,W,f){function t(b,c){var a,d,e=[];if(b.map)return b.map(c);for(a=0,d=b.length;d>a;a++)e[a]=c(b[a],a,b);return e}function x(d,e,b,h){var a=g(d,e);return a===f?b&&(a=c.def(b,h,!0)):a=c.convert(a,b),a}var P,L,r,e,u,b,y,m,K,p,H,G,F,M,c,n=i.Class,o=i.Dispatcher,I=Math.min,z=Math.max,a=i.is,A=i.to,g=i.get,D=i.set,q=(i.support,i.type),E=function(){},h=d.extend,j=d.proxy,k=d.each,C=d.grep,J=d.inArray,w=d.Deferred,v="function",B="array",N="object",T="string",l="change",s="error",R="start",Q="complete",S="save",O="afterset",U="insert",V="remove";P=n.extend({init:function(a){this.data=a},read:function(c,a,d,b){return a(this.data,!1,b)},modify:function(c,a,d,b){a(b)}}),L=n.extend({init:function(a,b){this.options=a,this.cache=b},read:function(c,g,j,e){var i,l=this.options,b=l.read,k=this.cache;return a.func(b)?void b(c,g,j,e):(b=a.string(b)?{url:b}:h(!0,{},b),a.func(b.data)&&(c=b.data(c,e)),i=k.get(c),void(i!==f?g(i,!0,e):(b.data=c,b.error=j,b.success=function(a){k.set(c,a),g(a,!1,e)},d.ajax(b))))},modify:function(i,n,p,k){var c,b,m,f,e,q=this.options,l=q.modify||{},o=["create","update","remove"],r=["added","edited","removed"],g=[],s=function(a){return a.data};if(a.func(l))return void l(i,n,p,k);for(e=0;e<o.length;e++)m=o[e],f=r[e],b=l[m],i[f].length?(a.string(b)&&(b={url:b,type:"POST"}),a.func(b)?(c=g[e]=new w,b(i[f],j(c.resolve,c),j(c.reject,c),k)):a.object(b)?(b=h(!0,{},b),a.func(b.data)?b.data=b.data(i[f],k):(b.data={},b.data[f]=t(i[f],s)),c=g[e]=d.ajax(b)):(c=g[e]=new w,c.resolve())):(c=g[e]=new w,c.resolve());d.when.apply(d,g).then(n,p)}}),r=n.extend({init:function(){this.values={}},get:function(a){return this.values[A.key(a)]},set:function(b,a){return this.values[A.key(b)]=a,a},remove:function(b){var a=A.key(b),c=this.values[a];return delete this.values[a],c},clear:function(){this.values=[]}}),r.noop={get:E,set:E},u=n.extend({init:function(b,c){a.object(b)?b=A.array(b):a.string(b)&&(b=[{path:b,desc:!!c}]),this._expr=b},build:function(){var b=this._expr,c=u.cache;return a.func(b)?function(a){return function(b,c){var d=a(b.item,c.item);return 0!==d?d:b.index-c.index}}(b):a.array(b)?c.get(b)||c.set(b,function(b){return function(k,l){var i,e,f,h,m,c,d,j;for(h=0,m=b.length;m>h;h++)if(c=k.item,d=l.item,i=b[h]||{},e=i.path,f=i.desc?-1:1,a.string(e)?(c=g(c,e),d=g(d,e)):a.func(e)&&(c=e(c),d=e(d)),a.date(c)&&(c=c.getTime()),a.date(d)&&(d=d.getTime()),c!==d&&(null!=c||null!=d)){if(null==c)return-1*f;if(null==d)return 1*f;if(a.number(c)&&a.number(d)||(c=c.toString(),d=d.toString()),c.localeCompare){if(j=c.localeCompare(d),0===j)continue;return j*f}if(c>d)return 1*f;if(d>c)return-1*f}return k.index-l.index}}([].concat(b))):void 0}}),u.cache=new r,b=n.extend({init:function(a){this._expr=a||[]},build:function(){var c=this,e=b.cache,d=c._expr,a=c._func||(c._func=e.get(d));return a||(a=c._buildRecursive(d,!0),a&&e.set(d,a)),a},_single:function(c){var d;if(c){if(a.func(c.filter))return c.filter;if(d=b.filters[b.filterAliases[c.filter]])return function(a,b,c,d){return function(e){return b(g(e,a),c,d)}}(c.path,d,c.value,c.sensitive)}},_multiple:function(a,b){return function(e){var c,d=!0,f=a.length;for(c=0;f>c;c++)if(d=a[c](e),b){if(!d)break}else if(d)break;return d}},_buildRecursive:function(b,g){var c,f,d=this,e=[];if(a.array(b)){for(c=0,f=b.length;f>c;c++)e.push(d._buildRecursive(b[c]));return e.length>1?d._multiple(e,g):e[0]}return b.and||b.or?d._buildRecursive(b.and||b.or,!!b.and):d._single(b)}}),b.cache=new r,b.normalize={equatable:function(c,d,e){return a.date(c)?{a:c.getTime(),b:new Date(d).getTime()}:b.normalize.string(c,d,e)},string:function(a,b,c){return{a:c?a+"":(a+"").toLowerCase(),b:c?b+"":(b+"").toLowerCase()}},scalar:function(b,c){return a.date(b)?{a:b.getTime(),b:new Date(c).getTime()}:isNaN(parseFloat(b))?{a:b,b:c}:{a:parseFloat(b),b:parseFloat(c)}}},b.filters={eq:function(c,d,e){var a=b.normalize.equatable(c,d,e);return a.a===a.b},neq:function(c,d,e){var a=b.normalize.equatable(c,d,e);return a.a!==a.b},con:function(c,d,e){var a=b.normalize.string(c,d,e);return a.a.indexOf(a.b)>-1},notcon:function(c,d,e){var a=b.normalize.string(c,d,e);return a.a.indexOf(a.b)<0},starts:function(c,d,e){var a=b.normalize.string(c,d,e);return 0===a.a.indexOf(a.b)},ends:function(c,d,e){var a=b.normalize.string(c,d,e);return a.a.indexOf(a.b)===a.a.length-a.b.length},gt:function(c,d){var a=b.normalize.scalar(c,d);return a.a>a.b},lt:function(c,d){var a=b.normalize.scalar(c,d);return a.a<a.b},gte:function(c,d){var a=b.normalize.scalar(c,d);return a.a>=a.b},lte:function(c,d){var a=b.normalize.scalar(c,d);return a.a<=a.b},isnull:function(a){return null==a},notnull:function(a){return null!=a}},b.filterAliases={eq:"eq",equal:"eq",equals:"eq","==":"eq",neq:"neq",ne:"neq",doesnotequal:"neq",notequal:"neq",notequals:"neq","!=":"neq",con:"con",contains:"con",notcon:"notcon",doesnotcontain:"notcon",notcontains:"notcon",starts:"starts",startswith:"starts",ends:"ends",endswith:"ends",gt:"gt",greaterthan:"gt",">":"gt",lt:"lt",lessthan:"lt","<":"lt",gte:"gte",ge:"gte",greaterthanorequal:"gte",">=":"gte",lte:"lte",le:"lte",lessthanorequal:"lte","<=":"lte",isnull:"isnull","null":"isnull",notnull:"notnull",isnotnull:"notnull"},y=n.extend({init:function(){},build:function(b){var d=this,c=y.cache,a=c.get(b);return a||(a=d._build(b),a&&c.set(b,a)),a},_build:function(e){if(!e)return null;var g=e.field,d=e.aggregate,b=e.type||Number,h=function(a){return a===f?c.def(b):c.convert(a,b)};return a.func(d)?d:"count"==d?function(a){return a.length}:"sum"==d?function(e){var c,d,f=0,i=e.length;for(c=0;i>c;c++)d=x(e[c],g,b),f+=b==Date&&a.date(d)?d.getTime():d;return h(f)}:"average"==d?function(e){var c,d,f=0,i=e.length;for(c=0;i>c;c++)d=x(e[c],g,b),f+=b==Date&&a.date(d)?d.getTime():d;return h(f/i)}:"min"==d?function(a){return h(I.apply(null,t(a,function(a){return x(a,g,b)})))}:"max"==d?function(a){return h(z.apply(null,t(a,function(a){return x(a,g,b)})))}:f}}),y.cache=new r,e=n.extend({init:function(c,d,f,g,e){var b=this;b.data=c,b.total=null!=d?d:c?c.length:0,b.aggregates=f,b.groups=g,b.indices=a.array(e)?e.slice(0):t(c||[],function(b,a){return a})},filter:function(k){var c,h,f,a=this,i=new b(k).build(),g=a.data,d=[],j=[];if(i){for(c=0,h=g.length;h>c;c++)f=g[c],i(f)&&(d.push(f),j.push(a.indices[c]));a.indices=j}else d=g.slice(0);return new e(d,d.length,a.aggregates,a.groups,a.indices)},aggregate:function(c){var d,f,g,i,b=this,k=new y,j=b.data;for(a.array(c)||(c=[c]),b.aggregates=[],d=0;d<c.length;d++)f=c[d],g=k.build(f),g&&(i=g(j,f)),b.aggregates.push(h({},f,{value:i}));return new e(j.slice(0),b.total,b.aggregates,b.groups,b.indices)},aggregateGroups:function(c){var a=this,b=a.data.slice(0),d=new e(a._getInnerMostItems(b),null,null,null,null).aggregate(c);return new e(b,a.total,d.aggregates,a.groups,a.indices)},_getInnerMostItems:function(b){var a=[];return k(this._getInnerMostGroups(b),function(c,b){a=a.concat(b.items)}),a},_getInnerMostGroups:function(c){var b=this,a=[];return k(c||[],function(d,c){a=a.concat(b._hasInnerGroups(c)?b._getInnerMostGroups(c.items):c)}),a},_hasInnerGroups:function(b){return b&&b.items&&b.items.length>0?b.items[0].field&&a.array(b.items[0].items):!1},group:function(c){var d,b=this,f=b.data.slice(0);return a.array(c)||(c=[c]),c.length>0&&(d=b._groupData(c,f,b.indices),f=d[0],b.indices=d[1]),new e(f,b.total,b.aggregates,b.groups,b.indices)},_groupData:function(B,y,q){var r,j,o,b,d,z=this,c=[],m=[],l=B.slice(0),i=l.shift(),x=i.field,t=i.aggregate,v=i.order,w={};if(k(y,function(d,b){j=g(b,x),o=w[j],a.defined(o)?c[o].items.push({item:b,index:q[d]}):(w[j]=c.length,c.push(h({},i,{value:j,items:[{item:b,index:q[d]}]})))}),v&&(r=new u("value","desc"==v).build())){for(b=0;b<c.length;b++)c[b]={item:c[b],index:b};for(c.sort(r),b=0;b<c.length;b++)c[b]=c[b].item}for(b=0;b<c.length;b++)for(d=0;d<c[b].items.length;d++)m.push(c[b].items[d].index),c[b].items[d]=c[b].items[d].item;if(t&&k(c,function(a,b){c[a].aggregate=new e(b.items).aggregate(t).aggregates}),l&&l.length>0){var p=0,n=[];for(b=0;b<c.length;b++){var f=c[b],A=m.slice(p,p+(f.items?f.items.length:0)),s=z._groupData(l,f.items,A);c[b].items=s[0],n=n.concat(s[1]),p+=f.items?f.items.length:0}m=n}return[c,m]},sort:function(h,i){var a,b=this,f=new u(h,i).build(),c=b.data.slice(0),d=[],g=c?c.length:0,j=b.indices;if(f){for(a=0;g>a;a++)d.push({index:j[a],item:c[a]});for(d.sort(f),a=0;g>a;a++)c[a]=d[a].item,b.indices[a]=d[a].index}return new e(c,b.total,b.aggregates,b.groups,b.indices)},sortGroups:function(g,h){var b,a=this,f=a.data.slice(0),c=[],d=0;return b=function(f){if(a._hasInnerGroups(f))k(f.items,function(c,a){b(a)});else{var i=new e(f.items,null,null,null,a.indices.slice(d,d+(f.items?f.items.length:0))).sort(g,h);f.items=i.data,c=c.concat(i.indices),d+=f.items?f.items.length:0}},k(f,function(c,a){b(a)}),new e(f,a.total,a.aggregates,a.groups,c)},_sliceGroups:function(f,g,b,c){var d,l=this,h=0,i=[],e=[],j=a.defined(c);return 0!==b||j?(d=function(i){if(l._hasInnerGroups(i)){var q=[],r=0;return k(i.items,function(c,a){var b=d(a);b>0&&(q.push(a),r+=b)}),i.items=q,r}var m,n,f=h,o=i.items.length,p=f+o-1;return j?c-1>=p?p>=b&&(m=z(0,b-f),n=o):c-1>=f&&p>=b&&(m=z(0,b-f),n=I(o,c-f)):f>=b?(m=0,n=o):b>=f&&p>=b&&(m=z(0,b-f),n=o),a.defined(m)&&a.defined(n)&&n>m?(i.items=i.items.slice(m,n),e=e.concat(g.slice(f+m,f+n))):i.items=[],h+=o,i.items.length},k(f,function(c,a){var b=d(a);b>0&&i.push(a)}),[i,e]):[f.slice(0),g.slice(0)]},skip:function(b){var a=this;return new e(a.data.slice(b),a.total,a.aggregates,a.groups,a.indices.slice(b))},skipGroups:function(c){var a=this,b=a._sliceGroups(a.data,a.indices,c);return new e(b[0],a.total,a.aggregates,a.groups,b[1])},take:function(b){var a=this;return new e(a.data.slice(0,b),a.total,a.aggregates,a.groups,a.indices.slice(0,b))},takeGroups:function(c){var a=this,b=a._sliceGroups(a.data,a.indices,0,c);return new e(b[0],a.total,a.aggregates,a.groups,b[1])}}),e.create=function(c,a,d,f,g){a=a||{};var b=new e(c,d,f,g),h=a.remoteOperations||[],i=h.join(" "),j=i.indexOf("group")>-1;return a.group||j?(a.group?(a.filter&&(b=b.filter(a.filter)),b=b.group(a.group)):b.data=b.groups,a.aggregate&&(b=b.aggregateGroups(a.aggregate)),a.sort&&(b=b.sortGroups(a.sort)),a.skip&&(b=b.skipGroups(a.skip)),a.take&&(b=b.takeGroups(a.take))):(a.filter&&(b=b.filter(a.filter)),a.aggregate&&(b=b.aggregate(a.aggregate)),a.sort&&(b=b.sort(a.sort)),a.skip&&(b=b.skip(a.skip)),a.take&&(b=b.take(a.take))),b},m=o.extend({init:function(d){var b=this,c=b.options=a.array(d)?{data:d}:d||{},e=c.schema||{},f=m.schemas[e.type||"json"];b.data=null,b.filter=c.filter,b.sort=c.sort,b.skip=c.skip,b.take=c.take,b.group=c.group,b.aggregate=c.aggregate,b.schema=new f(e),b.remote=c.remote,b.cache=new r,b._recursive=!!c.resursive,o.fn.init.call(b,c)},isRecursive:function(){return this._recursive},trigger:i.ui.Widget.fn.trigger,_client:function(){var b=this,c=b.remote;return a.object(c)?new L(c,c.cache?b.cache:r.noop):new P(b.options.data)},_params:function(){var a,b=this,d=["filter","aggregate","group","sort","skip","take"],e=b.remote,f=b._remoteOperations().join(" "),c={local:{},remote:{}};return k(d,function(g,d){a=b[d],null!=a&&(e&&f.indexOf(d)>-1?c.remote[d]=a:c.local[d]=a)}),c},_remoteOperations:function(){var a=this.remote;return a&&a.read?a.read.operations||a.operations||[]:[]},_success:function(d,e,f,c,g){var a=this,h=a.schema,b=h.process(f);a.data=b.data,a._pTotal=b.total,a._pAggregates=b.aggregates,a._pGroups=b.groups,a._createView(b.data,e),a.trigger(Q),a.trigger(l,{fromCache:!!c,extra:g}),d.resolve(a.view,!!c)},_createView:function(c,d){var a=this,b=e.create(c,h({},d||a._params().local,{remoteOperations:a._remoteOperations()}),a._pTotal,a._pAggregates,a._pGroups);a.view=b.data,a.total=b.total,a._indices=b.indices,a.aggregates=b.aggregates},_error:function(c,d,e,a,f){var b=this;c.reject(a),d&&b.trigger(Q),b.trigger(s,{errorType:"transport",error:a,operation:e,extra:f})},read:function(d){var a=this,b=new w,c=a._params(),e=a.trigger(R,{params:c,extra:d});return e.isDefaultPrevented()?b.resolve():(a.cancel(),a._client().read(c.remote,j(a._success,a,b,c.local),j(a._error,a,b,!0,"read"),d)),b.promise()},_ensureTracker:function(){var b=this,c=b.tracker,d=b.data;if(!c){if(!d||!a.array(d))throw new Error("shield.DataSource: cannot modify when no data array is available.");c=b.tracker=new M({data:d,model:b.schema.model,events:{change:function(a){b._createView(b.data),a&&a.afterset||b.trigger(l)},error:function(a){b.trigger(s,{errorType:"tracker",path:a?a.path:"undefined path",value:a?a.value:"undefined value",error:a?a.reason:"undefined error",model:a?a.target:"undefined target model"})}}}),b.data=c.data}},getDataIndex:function(a){return this._indices[a]},add:function(a){return this._ensureTracker(),this.tracker.add(a)},insert:function(a,b){return this._ensureTracker(),this.tracker.insert(a,b)},remove:function(a){return this._ensureTracker(),this.tracker.remove(a)},removeAt:function(a){return this._ensureTracker(),this.tracker.removeAt(a)},edit:function(a){return this._ensureTracker(),this.tracker.edit(a)},insertView:function(a,b){return this.insert(this._indices[a],b)},removeAtView:function(a){return this.removeAt(this._indices[a])},editView:function(a){return this.edit(this._indices[a])},save:function(f,m){var h,g,e,k,b=this,d=b.tracker,i=d?d.changes:{added:[],edited:[],removed:[]},n=d&&b.trigger(S,{changes:i}),c=new w;if(f=a.defined(f)?!!f:!0,n&&!n.isDefaultPrevented()){for(h=b.data=d.original,g=d.data,h.length=0,e=0;e<g.length;e++)h[e]=g[e];b.options.data&&!a.func(b.options.data)&&c.done(j(b._syncLocalData,b)),b._client().modify(i,j(c.resolve,c),j(b._error,b,c,!1,"save"),m),d.destroy(),d=b.tracker=null}else c.resolve(i);return f&&(k=function(){b._createView(b.data),b.trigger(l,{extra:m})},c.then(k,k)),c.promise()},_syncLocalData:function(){var b,c=this,d=c.schema,f=(d.options.fields,c.data),e=[],g=a.array(d.getReverseDataFirstItem(c.options.data));for(b=0;b<f.length;b++)e[b]=g?[]:{},d.reverseFields(f[b],e[b]);d.reverseData(e,c.options.data)},cancel:function(){var b=this,a=b.tracker,c=a&&(a.changes.added.length||a.changes.edited.length||a.changes.removed.length);a&&(b.data=a.original,a.destroy(),a=b.tracker=null,c&&(b._createView(b.data),b.trigger(l)))},destroy:function(){var b,a=this,c=["options","data","total","aggregates","filter","sort","aggregate","group","skip","take","schema","remote","view","cache"];for(a.cancel(),a.cache&&a.cache.clear(),b=0;b<c.length;b++)delete a[c[b]];o.fn.destroy.call(a)}}),m.create=function(b,c){return b instanceof m?b:new m(a.array(b)?h({data:b},c):h({},b,c))},p=n.extend({init:function(a){this.options=a},parse:function(b){var c=this.options.parse;if(a.func(c))return c(b);if(a.string(b))try{b=d.parseJSON(b)}catch(e){}return b},data:function(c){var b=this.options.data;return a.func(b)?b(c):a.string(b)?g(c,b):c},aggregates:function(c){var b=this.options.aggregates;return a.func(b)?b(c):a.string(b)?g(c,b):f},groups:function(c){var b=this.options.groups;return a.func(b)?b(c):a.string(b)?g(c,b):f},reverseData:function(d,b){var c,e=this.options.data;if(a.func(e))e(d,b);else if(a.string(e))D(b,e,d);else if(a.array(b))for(b.length=0,c=0;c<d.length;c++)b[c]=d[c]},getReverseDataFirstItem:function(c){var b=this.data(c);return a.array(b)&&b.length>0?b[0]:f},total:function(b,d){var c=this.options.total;return b=b||[],d=d||[],a.func(c)?c(b):a.string(c)?g(b,c):d.length},fields:function(a){var b=this,d=b.options.fields,e=b.model=c.define(d);return d?t(a,function(a){return p.mapFields(a,e.fn.fields)}):a},reverseFields:function(){var c,d,b,j=this,e=j.options.fields,f=[].slice.call(arguments),g=f[0],i=f.length<=1,h=i?g:f[1];for(b in e)e.hasOwnProperty(b)&&(c=e[b],d=g[b],a.string(c.path)?D(h,c.path,d):a.func(c.path)?c.path(g,d):h[b]=d,i&&delete h[b])},process:function(b){var a=this,c=a.parse(b),e=a.aggregates(b),f=a.groups(b),d=a.fields(a.data(c));return{data:d,aggregates:e,groups:f,total:a.total(c,d)}}}),p.mapFields=function(e,i){var h,b,d,j={};e=e||{};for(h in i)i.hasOwnProperty(h)&&(b=i[h],a.string(b.path)?(d=g(e,b.path),d===f&&(d=g(e,h))):d=a.func(b.path)?b.path(e):e[h],d===f?b.type&&(d=c.def(b.type,b.def,b.nullable)):d=c.convert(d,b.type),j[h]=d);return j},H=p.extend({parse:function(b){var c=this,e=c.options;if(a.func(e.parse))b=e.parse(b);else if(a.string(b))try{b=d.parseXML(b)}catch(f){}return b&&9===b.nodeType&&(b=c._json(c._root(b))),b},_root:function(d){var a,c,b=d.childNodes;for(a=0,c=b.length;c>a;a++)if(1===b[a].nodeType)return b[a];return null},_json:function(g){var b,d,e,h,c={},i={},f="";for(e=0,h=g.attributes.length;h>e;e++)b=g.attributes[e],c["_"+b.nodeName]=b.nodeValue;for(e=0,h=g.childNodes.length;h>e;e++)switch(b=g.childNodes[e],d=b.nodeName,b.nodeType){case 1:i[d]?(a.array(c[d])||(c[d]=[c[d]]),c[d].push(this._json(b))):(c[d]=this._json(b),i[d]=!0);break;case 3:f+=b.nodeValue;break;case 4:c._cdata=b.nodeValue}return f=f.replace(/^\s+(.*)\s+$/gim,"$1"),f&&(c._text=f),c}}),G=p.extend({parse:function(c){var e,b=this.options,h=b.parse,f=d(c),g=[],i=[];if(a.func(h))return h(c);if(b.result)return b.result;if(!f[0]||"table"!==f[0].tagName.toLowerCase())return c;f.eq(0).find("thead th").each(function(){i.push(d(this).text())}).end().find("tbody tr").each(function(){e={},d(this).children().each(function(a){e[i[a]]=d(this).text()}),g.push(e)});return b.result=g,g}}),F=p.extend({parse:function(c){var b=this.options,g=b.parse,e=d(c),f=[];return a.func(g)?g(c):b.result?b.result:e[0]&&"select"===e[0].tagName.toLowerCase()?(e.find("option").each(function(b){var a=d(this);f.push({value:a.attr("value"),text:a.text(),selected:a.is(":selected")})}),b.result=f,f):c}}),m.schemas={json:p,xml:H,table:G,select:F},M=o.extend({init:function(a){var b=this;
b.original=a.data,b.data=Array.apply(null,a.data),b.model=a.model,b.changes={added:[],edited:[],removed:[]},o.fn.init.call(this,a)},_model:function(c){var a=this,b=new a.model(c);return b.on(l,j(a.trigger,a,l)),b.on(s,j(a.trigger,a,s)),b.on(O,j(a.trigger,a,l,{afterset:!0})),b},add:function(a){return this.insert(this.data.length,a)},insert:function(b,e){var a,c=this,d=c.data,f=c.changes;if(0>b||b>d.length)throw new Error("shield.DataSource: invalid item index.");return a=c._model(e),f.added.push(a),d.splice(b,0,a.data),c.trigger(l,{operation:U,index:b,model:a}),a},edit:function(a){var b,d=this,c=d.data,e=d.changes;if(isNaN(a)||0>a||a>=c.length)throw new Error("shield.DataSource: invalid item index.");return(b=C(e.added.concat(e.edited),function(b){return b.data===c[a]})[0])?b:(b=d._model(c[a]),e.edited.push(b),c[a]=b.data,b)},remove:function(d){var a=this,e=a.changes,f=C(e.added.concat(e.edited),function(a){return a===d})[0],b=-1;return d instanceof c?f&&(b=J(f.data,a.data)):b=J(d,a.data),b>-1?a.removeAt(b):void 0},removeAt:function(a){var c=this,d=c.data,e=c.changes,b=C(e.added.concat(e.edited),function(b){return b.data===d[a]})[0];if(0>a||a>d.length)throw new Error("shield.DataSource: invalid item index.");return b?b.destroy():b=new c.model(d[a]),e.removed.push(b),d.splice(a,1),c.trigger(l,{operation:V,index:a,model:b}),b},destroy:function(){var b,c=this,a=c.changes,d=a.added.concat(a.edited).concat(a.removed);for(b=0;b<d.length;b++)d[b].destroy();a.added.length=a.edited.length=a.removed.length=0,c.data=c.original=null,o.fn.destroy.call(c)}}),c=o.extend({init:function(b,c){var a=this;o.fn.init.call(a,c),a.fields=h(!0,{},a.constructor.prototype.fields),a.data=h(!0,{},b)},trigger:i.ui.Widget.fn.trigger,get:function(a){return g(this.data,a)},set:function(c,a){var b=this;a=b.validate(c,a),a!==f&&(D(b.data,c,a),b.trigger(O))},validate:function(e,a){var d,h,i=this,b=g(i.fields,e);if(!b)return a;if(q(b.validator)===v)d=b.validator;else if(q(b.type.validate)===v)d=b.type.validate;else{var j=b.type.toString().split("(")[0].split(" ")[1].toLowerCase();d=c.validators[j]}if(d){if(h=d(a),h===f)return void i.trigger(s,{errorType:"validation",path:e,value:a,error:"validation error"});a=h}return null===a&&b.nullable===!1?void i.trigger(s,{errorType:"validation",path:e,value:a,error:"null value not allowed"}):a}}),c.define=function(a){return c.extend({fields:c.normalize(h(!0,{},a))})},c.normalize=function(a){var b,c,d;a=a||{};for(b in a)a.hasOwnProperty(b)&&(c=a[b],d=q(c),d===v?a[b]={type:c}:d===B?a[b]={type:c}:d===T&&(a[b]={path:c}));return a},c.def=function(a,b,d){var c;return b!==f?q(b)===v?b():b:d?null:a===String?"":a===Number?0:a===Date?new Date:a===Boolean?!1:a===Array?[]:a===Object?{}:(c=q(a),c===B?[]:c===N?{}:c===v?a():null)},c.convert=function(b,d){var c;return null==b?b:d===String?b.toString():d===Number?(c=parseFloat(b),isNaN(c)?b:c):d===Date?(c=new Date(b),isNaN(c.getTime())?b:c):d===Boolean?a.string(b)?!/^(false|0)$/i.test(b):!!b:b},c.validators={string:function(a){return null==a?null:a.toString()},number:function(a){return null===a?null:isNaN(+a)?f:+a},date:function(a){return null===a?null:a instanceof Date?a:(a=new Date(a),isNaN(a.getTime())?f:a)},"boolean":function(a){return null===a?null:null==a?f:!!a},array:function(a){return null===a?null:q(a)===B?a:f},object:function(a){return null===a?null:q(a)===N?a:f}},K=m.extend({init:function(a){h(a,{resursive:!0}),m.fn.init.call(this,a)}}),h(i,{map:t,DataSource:m,RecursiveDataSource:K,DataQuery:e,Model:c})}(jQuery,shield,this),function(a,e,w,b){function $(){if(f(L))return L;var d,c,b=a('<div style="width:50px;position:absolute;overflow:hidden;height:50px;display:block;"><div style="width:auto;height:100px;"></div></div>'),e=b.children()[0];return a(g.body).append(b),d=e.offsetWidth,b.css(wa,I),c=e.offsetWidth,d===c&&(c=b[0].clientWidth),b.remove(),L=d-c}function Ta(a){var b=a.isWindow||a.isDocument?"":a.element.css(Ia),c=a.isWindow||a.isDocument?"":a.element.css(xa),d=b===I||b===sa&&a.width<a.element[0].scrollWidth,e=c===I||c===sa&&a.height<a.element[0].scrollHeight;return{width:e?$():0,height:d?$():0}}function ua(e){var b=a(e||w),c=la(b[0]),d=!!b[0]&&9===b[0].nodeType;return{element:b,isWindow:c,isDocument:d,offset:c?{left:0,top:0}:b.offset()||{left:0,top:0},scrollLeft:b.scrollLeft(),scrollTop:b.scrollTop(),width:c||d?b.width():b.outerWidth(),height:c||d?b.height():b.outerHeight()}}function U(a,b,c){return[T(a[0])*(Z.test(a[0])?b/100:1),T(a[1])*(Z.test(a[1])?c/100:1)]}function h(b,c){var a=b.css(c);return a?Ma(a)||0:0}function Sa(a){var b=a[0];return 9===b.nodeType?{width:a.width(),height:a.height(),offset:{top:0,left:0}}:la(b)?{width:a.width(),height:a.height(),offset:{top:a.scrollTop(),left:a.scrollLeft()}}:b.preventDefault?{width:0,height:0,offset:{top:b.pageY,left:b.pageX}}:{width:a.outerWidth(),height:a.outerHeight(),offset:a.offset()}}function na(c,d){var b=0,e=f(d)?a(d).find(c):a(c);return e.each(function(c){b=j(b,h(a(this),"z-index"))}),b}function qa(a){return a.pageX||a.pageY?{x:a.pageX,y:a.pageY}:{x:a.clientX+g.body.scrollLeft-g.body.clientLeft,y:a.clientY+g.body.scrollTop-g.body.clientTop}}var L,q,E,y,A,r,c,Q,Y,O,aa,N,ma,m=e.ui.Widget,Ra=(e.Class,e.Constants.KeyCode),Qa=e.error,g=document,d=Math.abs,D=Math.min,j=Math.max,ga=Math.round,ha=Math.floor,ia=a.extend,o=a.proxy,ka=a.each,la=a.isWindow,f=e.is.defined,z=e.is.func,Pa=e.is.number,M=e.is.object,Oa=(e.is["null"],e.is.string),Na=e.is.array,Ma=e.to["int"],T=e.to.number,La=e.to.string,V=/left|center|right/,W=/top|center|bottom/,X=/[\+\-]\d+(\.[\d]+)?%?/,va=/^\w+/,Z=/%$/,t="mousedown",_="mouseup",C="mousemove",Ka="keydown",ca="start",da="stop",Ja="resize",Ua="resized",Aa="drag",za="drop",ya="cancel",R="disabled",n="px",k="left",v="right",l="top",x="bottom",pa="middle",i="center",wa="overflow",sa="auto",p="position",B="absolute",ra="relative",Ia="overflow-x",xa="overflow-y",I="scroll",H="horizontal",G="vertical",Ba="my",Ca="at",Da="marginLeft",Ea="marginRight",Fa="marginTop",Ga="marginBottom",Ha="flip",fa="pointer",ea="fit",ba="intersect",J="sui-resizable",S=J+"-"+R,u="sui-draggable",ta=u+"-"+R,oa=u+"-dragging",s="sui-unselectable",F="sui-droppable",K=F+"-"+R,P=F+"-over",ja=0;y={},y.GetWithinInfo=ua,y.GetMaxZIndex=na,y.GetCoordinates=qa,e.ui.Util=y,q=function(){return ja++,E?E:(this.init(),void(E=this))},q.prototype={_pos:null,init:function(){var b=this;a(g).on(C+".suiMouseTracker",o(b._onMouseMove,b))},_onMouseMove:function(a){this._pos=this.getPosFromEvent(a)},getPosFromEvent:function(a){return qa(a)},getPosition:function(b){var a=this;return null===a._pos&&f(b)&&(a._pos=a.getPosFromEvent(b)),a._pos},isInWindow:function(g){var h=this,b=h.getPosition(g),c=b.x,d=b.y,e=a(w).scrollTop(),f=a(w).scrollLeft();return c>=f&&c<=f+a(w).width()&&d>=e&&d<=e+a(w).height()},destroy:function(){--ja>0||(a(g).off(C+".suiMouseTracker"),E=null)}},e.MouseTracker=q,A={},A.Set=function(J,C,n){if(!J||!C||!n)throw"Invalid arguments passed to Position.Set";var s,f,g,q,m,u,c={my:n.source,at:n.target,collision:n.overflow,inside:n.inside},B=a(C),E=ua(c.inside),D=Ta(E),t=(c.collision||Ha).split(" "),y={};u=Sa(B),B[0].preventDefault&&(c.at="left top"),f=u.width,g=u.height,q=u.offset,m=ia({},q),ka([Ba,Ca],function(){var b,d,e=this,a=(c[e]||"").split(" ");1===a.length&&(a=V.test(a[0])?a.concat([i]):W.test(a[0])?[i].concat(a):[i,i]),a[0]=V.test(a[0])?a[0]:i,a[1]=W.test(a[1])?a[1]:i,b=X.exec(a[0]),d=X.exec(a[1]),y[e]=[b?b[0]:0,d?d[0]:0],c[e]=[va.exec(a[0])[0],va.exec(a[1])[0]]}),1===t.length&&(t[1]=t[0]),c.at[0]===v?m.left+=f:c.at[0]===i&&(m.left+=f/2),c.at[1]===x?m.top+=g:c.at[1]===i&&(m.top+=g/2),s=U(y.at,f,g),m.left+=s[0],m.top+=s[1];var F,A,e=a(J),p=e.outerWidth(),o=e.outerHeight(),K=h(e,Da),I=h(e,Fa),M=p+K+h(e,Ea)+D.width,L=o+I+h(e,Ga)+D.height,b=ia({},m),w=U(y.my,e.outerWidth(),e.outerHeight());c.my[0]===v?b.left-=p:c.my[0]===i&&(b.left-=p/2),c.my[1]===x?b.top-=o:c.my[1]===i&&(b.top-=o/2),b.left+=w[0],b.top+=w[1],b.left=ga(b.left),b.top=ga(b.top),F={marginLeft:K,marginTop:I},ka([k,l],function(a,d){r[t[a]]&&r[t[a]][d](b,{targetWidth:f,targetHeight:g,elemWidth:p,elemHeight:o,collisionPosition:F,collisionWidth:M,collisionHeight:L,offset:[s[0]+w[0],s[1]+w[1]],my:c.my,at:c.at,within:E,elem:e})}),z(n.callback)&&(A=function(){var c=q.left-b.left,m=c+f-p,h=q.top-b.top,r=h+g-o,a={target:{element:B,left:q.left,top:q.top,width:f,height:g},element:{element:e,left:b.left,top:b.top,width:p,height:o},horizontal:0>m?k:c>0?v:i,vertical:0>r?l:h>0?x:pa};p>=f&&d(c+m)<=f&&(a.horizontal=i),o>=g&&d(h+r)<=g&&(a.vertical=pa),j(d(c),d(m))>j(d(h),d(r))?a.important=H:a.important=G,n.callback(a)}),e.offset(b),A&&A()},r={fit:{left:function(a,c){var i,f=c.within,d=f.isWindow?f.scrollLeft:f.offset.left,g=f.width,h=a.left-c.collisionPosition.marginLeft,b=d-h,e=h+c.collisionWidth-g-d;c.collisionWidth>g?b>0&&0>=e?(i=a.left+b+c.collisionWidth-g-d,a.left+=b-i):e>0&&0>=b?a.left=d:b>e?a.left=d+g-c.collisionWidth:a.left=d:b>0?a.left+=b:e>0?a.left-=e:a.left=j(a.left-h,a.left)},top:function(a,b){var i,g=b.within,d=g.isWindow?g.scrollTop:g.offset.top,f=b.within.height,h=a.top-b.collisionPosition.marginTop,c=d-h,e=h+b.collisionHeight-f-d;b.collisionHeight>f?c>0&&0>=e?(i=a.top+c+b.collisionHeight-f-d,a.top+=c-i):e>0&&0>=c?a.top=d:c>e?a.top=d+f-b.collisionHeight:a.top=d:c>0?a.top+=c:e>0?a.top-=e:a.top=j(a.top-h,a.top)}},flip:{left:function(c,a){var i,h,b=a.within,p=b.offset.left+b.scrollLeft,l=b.width,j=b.isWindow?b.scrollLeft:b.offset.left,m=c.left-a.collisionPosition.marginLeft,n=m-j,o=m+a.collisionWidth-l-j,e=a.my[0]===k?-a.elemWidth:a.my[0]===v?a.elemWidth:0,g=a.at[0]===k?a.targetWidth:a.at[0]===v?-a.targetWidth:0,f=-2*a.offset[0];0>n?(i=c.left+e+g+f+a.collisionWidth-l-p,(0>i||i<d(n))&&(c.left+=e+g+f)):o>0&&(h=c.left-a.collisionPosition.marginLeft+e+g+f-j,(h>0||d(h)<o)&&(c.left+=e+g+f))},top:function(b,a){var k,j,f=a.within,p=f.offset.top+f.scrollTop,n=f.height,m=f.isWindow?f.scrollTop:f.offset.top,o=b.top-a.collisionPosition.marginTop,h=o-m,i=o+a.collisionHeight-n-m,q=a.my[1]===l,e=q?-a.elemHeight:a.my[1]===x?a.elemHeight:0,c=a.at[1]===l?a.targetHeight:a.at[1]===x?-a.targetHeight:0,g=-2*a.offset[1];0>h?(j=b.top+e+c+g+a.collisionHeight-n-p,b.top+e+c+g>h&&(0>j||j<d(h))&&(b.top+=e+c+g)):i>0&&(k=b.top-a.collisionPosition.marginTop+e+c+g-m,b.top+e+c+g>i&&(k>0||d(k)<i)&&(b.top+=e+c+g))}},flipfit:{left:function(){r.flip.left.apply(this,arguments),r.fit.left.apply(this,arguments)},top:function(){r.flip.top.apply(this,arguments),r.fit.top.apply(this,arguments)}}},e.ui.Position=A,ma={enabled:!0,cls:b,iframeFix:!1,resizeCls:b,delta:1,handles:["e","w","n","s","se","sw","ne","nw"],handleWidth:8,handleZIndex:105,minHeight:16,minWidth:16,maxHeight:b,maxWidth:b,events:{}},N=m.extend({init:function(){m.fn.init.apply(this,arguments),f(this.initialOptions.handles)&&(this.options.handles=this.initialOptions.handles);var b=this,e=a(b.element),c=b.options,d=c.cls;b._eventNS=".shieldResizable"+b.getInstanceId(),b.mouseTracker=new q,e.addClass(J+(d?" "+d:"")),b._initHandles(),b.enabled(c.enabled)},_initHandles:function(){var h,d,e,b=this,l=a(b.element),p=(l.width(),l.height()),j=b.options,m=j.handles,k=j.handleWidth,i=k+n,f=k+2+n,c="-"+(k-2)+n,q=j.handleZIndex;for(b.handles=[],e=0;e<m.length;e++){switch(h=La(m[e]).toLowerCase(),d={},h){case"e":d={width:i,height:p+n,top:0,right:c};break;case"w":d={width:i,height:p+n,top:0,left:c};break;case"n":d={width:"100%",height:i,top:c};break;case"s":d={width:"100%",height:i,bottom:c};break;case"se":d={width:f,height:f,bottom:c,right:c};break;case"sw":d={width:f,height:f,bottom:c,left:c};break;case"ne":d={width:f,height:f,top:c,right:c};break;case"nw":d={width:f,height:f,top:c,left:c}}d.zIndex=q,b.handles[e]={type:h},b.handles[e][t]=o(b._handleMouseDown,b,e),b.handles[e].element=a('<div class="sui-resizable-handle sui-resizable-dir-'+h+'"></div>').appendTo(l).css(d).on(t,b.handles[e][t])}a(g).on(_+b._eventNS,o(b._handleMouseUp,b)).on(C+b._eventNS,o(b._handleMouseMove,b))},_destroyHandles:function(){var b,c=this,d=c.handles;for(a(g).off(c._eventNS),b=0;b<d.length;b++)a(c.handles[b].element).off(t,c.handles[b][t]).remove();c.handles=[]},_fixIframes:function(){var c,d=this,b=d.options.iframeFix;b&&(c=b===!0?"iframe":b,d._fixedFrames=a(g.body).find(c).map(function(){var b=a(this);return a("<div/>").css(p,B).appendTo(b.parent()).outerWidth(b.outerWidth()).outerHeight(b.outerHeight()).offset(b.offset())[0]}))},_unfixIframes:function(){var b=this;b._fixedFrames&&(a(b._fixedFrames).remove(),delete b._fixedFrames)},_handleMouseDown:function(c,d){var b=this;b._enabled&&!b.resizing&&(b.resizing=!0,b.resizingHandle=c,b.oldPos=b.mouseTracker.getPosition(d),b.startSent=!1,a(b.element).addClass(s),b._fixIframes())},_handleMouseMove:function(G){var s,x,y,m,j,c,b,i,g,v,w,q,o,t,e=this,p=a(e.element),r=e.options,u=r.delta,z=r.minWidth,A=r.maxWidth,B=r.minHeight,C=r.maxHeight,E=r.resizeCls,F=e.resizingHandle,D=e.handles,H=e.mouseTracker,I=e.oldPos;if(H.isInWindow(G)&&e.resizing&&f(F)&&(y=H.getPosition(G),m=y.x-I.x,j=y.y-I.y,s=D[F],x=s.type,d(m)>=u||d(j)>=u)){switch(/^(se|sw|ne|nw)$/i.test(x)||(/^(e|w)$/i.test(x)?j=0:m=0),d(m)<u&&(m=0),d(j)<u&&(j=0),c=m,b=j,i=0,g=0,x){case"w":c=-m,i=-c;break;case"n":b=-j,g=-b;break;case"nw":c=-m,b=-j,i=-c,g=-b;break;case"sw":c=-m,i=-c;break;case"ne":b=-j,g=-b}if(q=p.width(),o=p.height(),v=h(p,l),w=h(p,k),c>0?(f(A)&&q+c>A&&(c=A-q,0!==i&&(i=-c)),0>w+i&&(c-=w-i,i=-c)):0>c&&f(z)&&z>q+c&&(c=z-q,0!==i&&(i=-c)),b>0?(f(C)&&o+b>C&&(b=C-o,0!==g&&(g=-b)),0>v+g&&(b-=v-g,g=-b)):0>b&&f(B)&&B>o+b&&(b=B-o,0!==g&&(g=-b)),0!==c||0!==b){e.startSent||(e.startSent=!0,e.trigger(ca),E&&p.addClass(E));var J=e.trigger(Ja,{deltaX:c,deltaY:b});if(!J.isDefaultPrevented()){if(p.width(q+c).height(o+b),(0!==i||0!==g)&&p.css({top:v+g+n,left:w+i+n}),e.oldPos.x=e.oldPos.x+m,e.oldPos.y=e.oldPos.y+j,0!==j)for(t=0;t<D.length;t++)s=D[t],/^(e|w)$/i.test(s.type)&&a(s.element).height(o+b);e.trigger(Ua)}}}},_handleMouseUp:function(f){var c=this,e=!!c.startSent,d=c.options.resizeCls;c._unfixIframes(),c.resizing&&(c.resizing=!1,c.resizingHandle=b,c.oldPos=b,c.startSent=!1,e&&c.trigger(da),a(c.element).removeClass(s+(d?" "+d:"")))},resize:function(c,d){var e=this,b=e.options;c=j(D(c,b.maxWidth),b.minWidth),d=j(D(d,b.maxHeight),b.minHeight),a(e.element).width(c).height(d)},enabled:function(){var b,c=this,d=a(c.element),e=[].slice.call(arguments);return e.length>0?(b=!!e[0],b?d.removeClass(S):d.addClass(S),c._enabled=b,void 0):c._enabled},destroy:function(){var b=this,c=b.options.cls;b.mouseTracker.destroy(),b.mouseTracker=null,a(b.element).removeClass(J+(c?" "+c:"")),b._destroyHandles(),m.fn.destroy.call(b)}}),N.defaults=ma,e.ui.plugin("Resizable",N),c={droppables:{"default":[]},Register:function(b){var a=b.options.scope;c.droppables[a]=c.droppables[a]||[],c.droppables[a].push(b)},UnRegister:function(d){var a,e=d.options.scope,b=c.droppables[e];for(a=0;a<b.length;a++)b[a]===d&&b.splice(a,1)},PrepareOffsets:function(e,i){var f,g,b,d=c.droppables[e.options.scope]||[],h=a(e.helper||e.element);for(b=0;b<d.length;b++)f=d[b].enabled(),g=d[b].visible(),d[b].ddIsEnabled=f,d[b].ddIsVisible=g,!f||!g||e&&!d[b].accepts(e.element)||e&&e.element.get(0)===d[b].element.get(0)||(d[b].ddOffset=d[b].element.offset(),d[b].proportions({width:d[b].element[0].offsetWidth,height:d[b].element[0].offsetHeight}));e.proportions({width:h[0].offsetWidth,height:h[0].offsetHeight})},DragStart:function(a,b){c.PrepareOffsets(a,b)},Drag:function(d,e){var f,a,b=c.droppables[d.options.scope]||[],g=b.length;for(a=0;g>a;a++)!b[a].ddIsEnabled||!b[a].ddIsVisible||d&&!b[a].accepts(d.element)||d&&d.element.get(0)===b[a].element.get(0)||(f=c.Intersects(d,b[a],e),f?b[a].ddIsOver||(b[a].ddIsOver=!0,b[a].over(d,e)):b[a].ddIsOver&&(b[a].ddIsOver=!1,b[a].out(d,e)))},Drop:function(d,f){var g,a,h,i,e,b=c.droppables[d.options.scope]||[],j=b.length;for(a=0;j>a;a++)!b[a].ddIsEnabled||!b[a].ddIsVisible||d&&!b[a].accepts(d.element)||d&&d.element.get(0)===b[a].element.get(0)||(b[a].stop(),g=c.Intersects(d,b[a],f),b[a].ddIsOver=!1,g&&(e=b[a].drop(d,f),e.isDefaultPrevented()&&(h=!0),e.skipAnimation&&(i=!0)));return{cancelled:h,skipAnimation:i}},Intersects:function(m,s,x){var o,u,h,i,j,k,e,f,g,l=s.options.tolerance,t=M(l)?l.x:l,r=M(l)?l.y:l,w=s.proportions(),v=s.ddOffset,n=w.width,p=w.height,d=v.left,b=v.top;if(t==fa){var y=new q;g=y.getPosition(x),y.destroy(),o=d<=g.x&&d+n>=g.x}else h=m.proportions(),i=h.width,j=h.height,k=a(m.helper||m.element).offset(),e=k.left,f=k.top,o=t==ea?c._linesOverlap(e,e+i,d,d+n,i):t==ba?c._linesOverlap(e,e+i,d,d+n,i/2):c._linesOverlap(e,e+i,d,d+n,0);if(!o)return!1;if(r==fa){if(!g){var z=new q;g=z.getPosition(x),z.destroy()}u=b<=g.y&&b+p>=g.y}else h||(h=m.proportions(),i=h.width,j=h.height,k=a(m.helper||m.element).offset(),e=k.left,f=k.top),u=r==ea?c._linesOverlap(f,f+j,b,b+p,j):r==ba?c._linesOverlap(f,f+j,b,b+p,j/2):c._linesOverlap(f,f+j,b,b+p,0);return o&&u},_linesOverlap:function(b,c,d,e,a){return f(a)||(a=0),d>b&&e>c?c-d>a:b>d&&c>e?e-b>a:!0}},e.ui.DDManager=c,Y={enabled:!0,iframeFix:!1,cls:b,dragCls:b,scope:"default",handle:b,direction:b,min:b,max:b,step:b,allowedPositions:b,stack:!0,helper:b,appendTo:"parent",animation:{enabled:!0,revertDuration:200},events:{}},Q=m.extend({init:function(){m.fn.init.apply(this,arguments);var c,b=this,d=a(b.element),e=b.options,f=e.cls;b._eventNS=".shieldDraggable"+b.getInstanceId(),b.mouseTracker=new q,d.addClass(u+(f?" "+f:"")),c=d.css(p),c!==ra&&c!==B&&(b._origPosStyle=c,d.css(p,ra)),b.enabled(e.enabled),b.startSent=!1},proportions:function(){var a=this;return arguments.length>0?void(a._proportions=arguments[0]):a._proportions?a._proportions:a._proportions={width:a.element[0].offsetWidth,height:a.element[0].offsetHeight}},_fixIframes:function(){var c,d=this,b=d.options.iframeFix;b&&(c=b===!0?"iframe":b,d._fixedFrames=a(g.body).find(c).map(function(){var b=a(this);return a("<div/>").css(p,B).appendTo(b.parent()).outerWidth(b.outerWidth()).outerHeight(b.outerHeight()).offset(b.offset())[0]}))},_unfixIframes:function(){var b=this;b._fixedFrames&&(a(b._fixedFrames).remove(),delete b._fixedFrames)},_handleMouseDown:function(d){var b=this,c=b._eventNS;b._enabled&&!b._dragging&&(a(g.body).addClass(s),b._dragging=!0,b.startSent=!1,b.helper=b._isCustomHelper=null,b.stepPosition=b.mousePos=b.mouseTracker.getPosition(d),a(g).on(C+c,o(b._handleMouseMove,b)).on(_+c,o(b._handleMouseUp,b)).on(Ka+c,o(b._handleKeyDown,b)),b._fixIframes())},_initHelper:function(n){var b,c=this,e=c.element,f=c.options,d=f.helper,i=f.appendTo,j=f.cls,m=f.dragCls;c._helperInitialized||(d&&"original"!==d?(b=z(d)?d.call(c,{position:c.oriPosition,event:n}):"clone"==d?e.clone():a(d),b.parents("body").length||("parent"===i?e.after(b):i&&"body"!==i?b.appendTo(a(i)):b.appendTo(g.body)),/(fixed|absolute)/i.test(b.css(p))||b.css(p,B),A.Set(b,e,{source:"left top",target:"left top",overflow:"none"}),c._isCustomHelper=!0):(b=e,c._isCustomHelper=!1),c.helper=b,b.addClass(s+" "+u+(j?" "+j:"")+" "+oa+(m?" "+m:"")),c.oriPosition={left:h(b,k),top:h(b,l)},c._helperInitialized=!0)},_handleMouseMove:function(r){var u,q,p,C,A,n,o,i,m,g,O,N,e=this,B=e.options,E=B.step,I=B.direction,s=B.allowedPositions,U=s!==b&&s.length>0,v=B.min,w=B.max,T=e.mouseTracker,y=T.getPosition(r);if(T.isInWindow(r)&&e._dragging){if(e._initHelper(r),g=a(e.helper),O=g.width(),N=g.height(),C=h(g,l),A=h(g,k),U){var R,S,K,L,x,t,F=b,J=b,P=b,Q=b;for(R=y.x-e.stepPosition.x,S=y.y-e.stepPosition.y,K=A+R,L=C+S,x=0;x<s.length;x++)t=s[x],t.x!==b&&(P===b||P>d(K-t.x))&&(P=d(K-t.x),F=x),t.y!==b&&(Q===b||Q>d(L-t.y))&&(Q=d(L-t.y),J=x);n=A,o=C,F!==b&&(n=s[F].x,e.stepPosition.x+=s[F].x-A),J!==b&&(o=s[J].y,e.stepPosition.y+=s[J].y-C)}else{if(i=I==G?0:y.x-e.mousePos.x,m=I==H?0:y.y-e.mousePos.y,f(E)){if(u=z(E)?E.call(this,{deltaX:i,deltaY:m,element:g,domEvent:r,helperLeft:h(g,k),helperTop:h(g,l),mouse:y}):E,Pa(u)?q=p=u:M(u)&&(q=u.x,p=u.y),f(q)&&d(i)<q&&f(p)&&d(m)<p)return;f(q)&&q>1&&i%q!==0&&(i=(i>=0?1:-1)*ha(d(i)/q)*q),f(p)&&p>1&&m%p!==0&&(m=(m>=0?1:-1)*ha(d(m)/p)*p)}n=A+i,o=j(0,C+m)}I==H&&(v!==b&&(n=j(v,n),n===v&&(i=0)),w!==b&&(n=D(w-O,n),n===w-O&&(i=0))),I==G&&(v&&(o=j(v,o),o===v&&(m=0)),w&&(o=D(w-N,o),o===w-N&&(m=0))),g.css({left:n,top:o}),e.mousePos=y,e.startSent||(e.startSent=!0,e.trigger(ca,{element:g,domEvent:r}),e._adjustZIndex(),c.DragStart(e,r)),e.trigger(Aa,{deltaX:i,deltaY:m,element:g,domEvent:r}),c.Drag(e,r)}},_handleMouseUp:function(n){var e,j,f,i,b=this,p=b.element,d=b.helper,m=b.options.animation;b._unfixIframes(),a(g.body).removeClass(s),b._dragging&&(b.startSent?(j=c.Drop(b,n),f=j.cancelled,i=j.skipAnimation,e=b.trigger(da,{left:h(d,k),top:h(d,l),element:d,domEvent:n,cancelled:f,skipAnimation:i}),i=e.skipAnimation,f=e.cancelled,f===!0||e.isDefaultPrevented()?a(d).animate({left:b.oriPosition.left,top:b.oriPosition.top},!i&&m&&m.enabled?m.revertDuration:0,o(b._endDrag,b)):(b._isCustomHelper&&(A.Set(p,d,{source:"left top",target:"left top",overflow:"none"}),b._adjustZIndex(p)),b._endDrag())):b._endDrag())},_adjustZIndex:function(b){var d=this,c=d.options.stack;c!==!1&&(f(b)||(b=d.helper),a(b).css("z-index",na(c===!0?"."+u:c)+1))},_handleKeyDown:function(b){var a=this,c=b.keyCode;switch(c){case Ra.ESC:a._dragging&&(a.helper.css({left:a.oriPosition.left+n,top:a.oriPosition.top+n}),a.trigger(ya),a._unfixIframes(),a._endDrag())}},_endDrag:function(){var b=this,c=b.options.dragCls;b._dragging=!1,b._isCustomHelper?a(b.helper).remove():a(b.helper).removeClass(s+" "+oa+(c?" "+c:"")),a(g).off(b._eventNS),b.mousePos=b.oriPosition=b.helper=b._isCustomHelper=b._helperInitialized=null},enabled:function(){var c,b=this,d=a(b.element),e=b.options,f=e.handle?a(e.handle):d,g=[].slice.call(arguments);return g.length>0?(c=!!g[0],c?(d.removeClass(ta),b._mouseDownProxy||(b._mouseDownProxy=o(b._handleMouseDown,b),f.on(t,b._mouseDownProxy))):(d.addClass(ta),b._mouseDownProxy&&(f.off(t,b._mouseDownProxy),b._mouseDownProxy=null)),b._enabled=c,void 0):b._enabled},destroy:function(){var b=this,c=b.options.cls;b.mouseTracker&&(b.mouseTracker.destroy(),b.mouseTracker=null),a(b.element).removeClass(u+(c?" "+c:"")),b._origPosStyle&&(a(b.element).css(p,b._origPosStyle),b._origPosStyle=null),m.fn.destroy.call(b)}}),Q.defaults=Y,e.ui.plugin("Draggable",Q),aa={enabled:!0,accepts:"*",cls:b,hoverCls:b,tolerance:"intersect",scope:"default",events:{}},O=m.extend({init:function(){m.fn.init.apply(this,arguments);var b=this,g=a(b.element),d=b.options,h=d.dieOnError,e=d.accepts,f=d.cls;return Oa(e)||Na(e)||e instanceof a||z(e)?(b._eventNS=".shieldDroppable"+b.getInstanceId(),g.addClass(F+(f?" "+f:"")),c.Register(b),void b.enabled(d.enabled)):void Qa("shieldDroppable: The accepts option must be a string, array, function or jQuery object.",h)},accepts:function(c){var b=this.options.accepts;return z(b)?b.call(this,c):a(c).is(b)},proportions:function(){var a=this;return arguments.length>0?void(a._proportions=arguments[0]):a._proportions?a._proportions:a._proportions={width:a.element[0].offsetWidth,height:a.element[0].offsetHeight}},over:function(d,e){var b=this,c=b.options.hoverCls,f=b.trigger("over",{draggable:d.element,droppable:this.element,domEvent:e});f.isDefaultPrevented()||a(b.element).addClass(P+(c?" "+c:""))},out:function(d,e){var b=this,c=b.options.hoverCls;b.trigger("out",{draggable:d.element,droppable:this.element,domEvent:e}),a(b.element).removeClass(P+(c?" "+c:""))},stop:function(){var b=this.options.hoverCls;a(this.element).removeClass(P+(b?" "+b:""))},drop:function(b,a){return this.trigger(za,{draggable:b.element,droppable:this.element,cancelled:a.cancelled,skipAnimation:a.skipAnimation,domEvent:a})},enabled:function(){var c,b=this,d=[].slice.call(arguments);return d.length>0?(c=!!d[0],c?a(b.element).removeClass(K):a(b.element).addClass(K),b._enabled=c,void 0):b._enabled},destroy:function(){var d=this,e=d.options.cls;c.UnRegister(d),a(d.element).removeClass(F+K+s+(e?" "+e:"")),d._enabled=d._proportions=b,m.fn.destroy.call(d)}}),O.defaults=aa,e.ui.plugin("Droppable",O)}(jQuery,shield,this);
shield.version='1.7.31';
!function(n,d,B,A){var l=d.ui.Widget,t=d.Constants,o=d.Class,e=document,r=t.SVG_NS,s=!!e.createElementNS&&!!e.createElementNS(r,"svg").createSVGRect,k=n.map,a=d.to["int"],i=d.error,c=function(b){return a(b,10).toString(2)},z=function(b){return a(b,2)},b=function(a,b){for(a+="";a.length<b;)a="0"+a;return a},q=function(a,b){for(a+="";a.length<b;)a+="0";return a},m="byte",g="numeric",h="alphanumeric",f={modes:[],addMode:function(a){this.modes[a.prototype.mode]=a},byMode:function(a){return this.modes[a]?new this.modes[a]:null}},j=o.extend({mode:null,codeMode:null,validateRegex:null,_verErrLenTable:{"1L":152,"1M":128,"1Q":104,"1H":72,"2L":272,"2M":224,"2Q":176,"2H":128,"3L":440,"3M":352,"3Q":272,"3H":208,"4L":640,"4M":512,"4Q":384,"4H":288,"5L":864,"5M":688,"5Q":496,"5H":368,"6L":1088,"6M":864,"6Q":608,"6H":480,"7L":1248,"7M":992,"7Q":704,"7H":528,"8L":1552,"8M":1232,"8Q":880,"8H":688,"9L":1856,"9M":1456,"9Q":1056,"9H":800,"10L":2192,"10M":1728,"10Q":1232,"10H":976,"11L":2592,"11M":2032,"11Q":1440,"11H":1120,"12L":2960,"12M":2320,"12Q":1648,"12H":1264,"13L":3424,"13M":2672,"13Q":1952,"13H":1440,"14L":3688,"14M":2920,"14Q":2088,"14H":1576,"15L":4184,"15M":3320,"15Q":2360,"15H":1784,"16L":4712,"16M":3624,"16Q":2600,"16H":2024,"17L":5176,"17M":4056,"17Q":2936,"17H":2264,"18L":5768,"18M":4504,"18Q":3176,"18H":2504,"19L":6360,"19M":5016,"19Q":3560,"19H":2728,"20L":6888,"20M":5352,"20Q":3880,"20H":3080,"21L":7456,"21M":5712,"21Q":4096,"21H":3248,"22L":8048,"22M":6256,"22Q":4544,"22H":3536,"23L":8752,"23M":6880,"23Q":4912,"23H":3712,"24L":9392,"24M":7312,"24Q":5312,"24H":4112,"25L":10208,"25M":8e3,"25Q":5744,"25H":4304,"26L":10960,"26M":8496,"26Q":6032,"26H":4768,"27L":11744,"27M":9024,"27Q":6464,"27H":5024,"28L":12248,"28M":9544,"28Q":6968,"28H":5288,"29L":13048,"29M":10136,"29Q":7288,"29H":5608,"30L":13880,"30M":10984,"30Q":7880,"30H":5960,"31L":14744,"31M":11640,"31Q":8264,"31H":6344,"32L":15640,"32M":12328,"32Q":8920,"32H":6760,"33L":16568,"33M":13048,"33Q":9368,"33H":7208,"34L":17528,"34M":13800,"34Q":9848,"34H":7688,"35L":18448,"35M":14496,"35Q":10288,"35H":7888,"36L":19472,"36M":15312,"36Q":10832,"36H":8432,"37L":20528,"37M":15936,"37Q":11408,"37H":8768,"38L":21616,"38M":16816,"38Q":12016,"38H":9136,"39L":22496,"39M":17728,"39Q":12656,"39H":9776,"40L":23648,"40M":18672,"40Q":13328,"40H":10208},_errorCorrectionToMask:{L:"01",M:"00",Q:"11",H:"10"},_formatInformation:{"00000":"101010000010010","00001":"101000100100101","00010":"101111001111100","00011":"101101101001011","00100":"100010111111001","00101":"100000011001110","00110":"100111110010111","00111":"100101010100000","01000":"111011111000100","01001":"111001011110011","01010":"111110110101010","01011":"111100010011101","01100":"110011000101111","01101":"110001100011000","01110":"110110001000001","01111":"110100101110110",10000:"001011010001001",10001:"001001110111110",10010:"001110011100111",10011:"001100111010000",10100:"000011101100010",10101:"000001001010101",10110:"000110100001100",10111:"000100000111011",11000:"011010101011111",11001:"011000001101000",11010:"011111100110001",11011:"011101000000110",11100:"010010010110100",11101:"010000110000011",11110:"010111011011010",11111:"010101111101101"},validate:function(a){return this.validateRegex?new RegExp(this.validateRegex).test(a):!0},encode:function(d,c){var e,o,i,n,b=this,f=b._getVersion(d,c),p=4,j=21+4*(f-1),k=j+2*p,l=f+c,g=b._getFormatData(d,c),a=b.encodeValue(d),h=b._getDataLength(d,c),m=h-(g.length+a.length)>4?4:h-(g.length+a.length);return a=q(a,a.length+m),e=b._getBinaryValues(g+a),a=e.join(""),a=b._padEncodedToLength(a,h),e=b._getBinaryValues(a),i=b._getIntegerValues(e),a=b._getEC(l,o,i),n=b._getBinaryMatrix(a,f,j,k,c)},encodeValue:null,_getBinaryMatrix:function(s,j,g,h,r){var l,p,k,m,f,i,b,a,e=this,o=["000","001","010","011","100","101","110","111"],q=[],c=[],d=[],n=e._getPositionAdjustmentsTable();for(f=0;h>f;f++)for(c[f]=[],i=0;h>i;i++)c[f][i]=0;for(f=0;g>f;f++)d.push(new Array(g));if(e._fullFinderPattern(c,4,4),e._fillFinderPatternFilledValues(d,0,0),e._fullFinderPattern(c,4,h-11),e._fillFinderPatternFilledValues(d,0,g-8),e._fullFinderPattern(c,h-11,4),e._fillFinderPatternFilledValues(d,g-8,0),e._fillTimingPattern(c,d,g),c[h-12][12]=1,d[h-16][8]=1,j>1)for(f=0;f<n[j].length;f++)for(i=0;i<n[j].length;i++)b=n[j][f]+4,a=n[j][i]+4,10==b&&10==a||10==b&&a==h-11||b==h-11&&10==a||(c[b-2][a-2]=1,d[b-6][a-6]=1,c[b-2][a-1]=1,d[b-6][a-5]=1,c[b-2][a]=1,d[b-6][a-4]=1,c[b-2][a+1]=1,d[b-6][a-3]=1,c[b-2][a+2]=1,d[b-6][a-2]=1,c[b-1][a-2]=1,d[b-5][a-6]=1,c[b-1][a-1]=0,d[b-5][a-5]=1,c[b-1][a]=0,d[b-5][a-4]=1,c[b-1][a+1]=0,d[b-5][a-3]=1,c[b-1][a+2]=1,d[b-5][a-2]=1,c[b][a-2]=1,d[b-4][a-6]=1,c[b][a-1]=0,d[b-4][a-5]=1,c[b][a]=1,d[b-4][a-4]=1,c[b][a+1]=0,d[b-4][a-3]=1,c[b][a+2]=1,d[b-4][a-2]=1,c[b+1][a-2]=1,d[b-3][a-6]=1,c[b+1][a-1]=0,d[b-3][a-5]=1,c[b+1][a]=0,d[b-3][a-4]=1,c[b+1][a+1]=0,d[b-3][a-3]=1,c[b+1][a+2]=1,d[b-3][a-2]=1,c[b+2][a-2]=1,d[b-2][a-6]=1,c[b+2][a-1]=1,d[b-2][a-5]=1,c[b+2][a]=1,d[b-2][a-4]=1,c[b+2][a+1]=1,d[b-2][a-3]=1,c[b+2][a+2]=1,d[b-2][a-2]=1);for(j>=7&&e._fillHigherVersionData(c,d,j,g,h),m=0;8>m;m++){for(l=0,k=[],f=0;f<c.length;f++)k.push(c[f].slice(0));e._fillFormatData(c,d,g,h,o[m],r),e._fillMatrix(d,k,o[m],g,s),l+=e._calcPenalty1(k,g),l+=e._calcPenalty2(k,g),l+=e._calcPenalty3(k,g),l+=e._calcPenalty4(k,g),q.push(l)}return p=e._getSmallestPenaltyIndex(q),e._fillFormatData(c,d,g,h,o[p],r),e._fillMatrix(d,c,o[p],g,s),c},_fillHigherVersionData:function(a,b,g,c,d){var e=this,h={7:[0,0,1,0,1,0,0,1,0,0,1,1,1,1,1,0,0,0],8:[0,0,1,1,1,1,0,1,1,0,1,0,0,0,0,1,0,0],9:[1,0,0,1,1,0,0,1,0,1,0,1,1,0,0,1,0,0],10:[1,1,0,0,1,0,1,1,0,0,1,0,0,1,0,1,0,0],11:[0,1,1,0,1,1,1,1,1,1,0,1,1,1,0,1,0,0],12:[0,1,0,0,0,1,1,0,1,1,1,0,0,0,1,1,0,0],13:[1,1,1,0,0,0,1,0,0,0,0,1,1,0,1,1,0,0],14:[1,0,1,1,0,0,0,0,0,1,1,0,0,1,1,1,0,0],15:[0,0,0,1,0,1,0,0,1,0,0,1,1,1,1,1,0,0],16:[0,0,0,1,1,1,1,0,1,1,0,1,0,0,0,0,1,0],17:[1,0,1,1,1,0,1,0,0,0,1,0,1,0,0,0,1,0],18:[1,1,1,0,1,0,0,0,0,1,0,1,0,1,0,0,1,0],19:[0,1,0,0,1,1,0,0,1,0,1,0,1,1,0,0,1,0],20:[0,1,1,0,0,1,0,1,1,0,0,1,0,0,1,0,1,0],21:[1,1,0,0,0,0,0,1,0,1,1,0,1,0,1,0,1,0],22:[1,0,0,1,0,0,1,1,0,0,0,1,0,1,1,0,1,0],23:[0,0,1,1,0,1,1,1,1,1,1,0,1,1,1,0,1,0],24:[0,0,1,0,0,0,1,1,0,1,1,1,0,0,0,1,1,0],25:[1,0,0,0,0,1,1,1,1,0,0,0,1,0,0,1,1,0],26:[1,1,0,1,0,1,0,1,1,1,1,1,0,1,0,1,1,0],27:[0,1,1,1,0,0,0,1,0,0,0,0,1,1,0,1,1,0],28:[0,1,0,1,1,0,0,0,0,0,1,1,0,0,1,1,1,0],29:[1,1,1,1,1,1,0,0,1,1,0,0,1,0,1,1,1,0],30:[1,0,1,0,1,1,1,0,1,0,1,1,0,1,1,1,1,0],31:[0,0,0,0,1,0,1,0,0,1,0,0,1,1,1,1,1,0],32:[1,0,1,0,1,0,1,1,1,0,0,1,0,0,0,0,0,1],33:[0,0,0,0,1,1,1,1,0,1,1,0,1,0,0,0,0,1],34:[0,1,0,1,1,1,0,1,0,0,0,1,0,1,0,0,0,1],35:[1,1,1,1,1,0,0,1,1,1,1,0,1,1,0,0,0,1],36:[1,1,0,1,0,0,0,0,1,1,0,1,0,0,1,0,0,1],37:[0,1,1,1,0,1,0,0,0,0,1,0,1,0,1,0,0,1],38:[0,0,1,0,0,1,1,0,0,1,0,1,0,1,1,0,0,1],39:[1,0,0,0,0,0,1,0,1,0,1,0,1,1,1,0,0,1],40:[1,0,0,1,0,1,1,0,0,0,1,1,0,0,0,1,0,1]},f=h[g];e._fillUpperVersionInformation(a,b,f,c,d),e._fillLowerVersionInformation(a,b,f,c,d)},_fillUpperVersionInformation:function(c,d,e,h,i){var a,f=i-15,g=h-11,b=0;for(a=4;10>a;a++)c[a][f]=e[b],d[a-4][g]=1,b++,c[a][f+1]=e[b],d[a-4][g+1]=1,b++,c[a][f+2]=e[b],d[a-4][g+2]=1,b++},_fillLowerVersionInformation:function(c,d,e,h,i){var a,f=i-13,g=h-9,b=0;for(a=4;10>a;a++)c[f][a]=e[b],d[g][a-4]=1,b++,c[f-1][a]=e[b],d[g-1][a-4]=1,b++,c[f-2][a]=e[b],d[g-2][a-4]=1,b++},_getSmallestPenaltyIndex:function(b){var a,d=b[0],c=0;for(a=0;a<b.length;a++)b[a]<d&&(c=a);return c},_calcPenalty1:function(e,f){var g,a,b,c,d=0;for(a=0;f>a;a++)for(c=1,b=1;f>b;b++)g=e[a+4][b+4],g===e[a+4][b+3]?(c++,5==c?d+=3:c>5&&d++):c=1;for(b=0;f>b;b++)for(c=1,a=1;f>a;a++)g=e[a+4][b+4],g===e[a+3][b+4]?(c++,5===c?d+=3:c>5&&d++):c=1;return d},_calcPenalty2:function(c,e){var d,a,b,f=0;for(a=0;e-1>a;a++)for(b=0;e-1>b;b++)d=c[a+4][b+4],d==c[a+4][b+5]&&d==c[a+5][b+4]&&d==c[a+5][b+5]&&(f+=3);return f},_calcPenalty3:function(c,d){var a,b,e=0;for(a=0;d>a;a++)for(b=0;d-7>=b;b++)c[a+4][b+4]&&!c[a+4][b+5]&&c[a+4][b+6]&&c[a+4][b+7]&&c[a+4][b+8]&&!c[a+4][b+9]&&c[a+4][b+10]&&(e+=40);for(b=0;d>b;b++)for(a=0;d-7>=a;a++)c[a+4][b+4]&&!c[a+5][b+4]&&c[a+6][b+4]&&c[a+7][b+4]&&c[a+8][b+4]&&!c[a+9][b+4]&&c[a+10][b+4]&&(e+=40);return e},_calcPenalty4:function(g,e){var b,c,h=0,d=0,f=0;for(b=0;e>b;b++)for(c=0;e>c;c++)g[b+4][c+4]?d++:f++;return h=a(2*(d/(d+f)*100-50))},_fillFormatData:function(b,d,e,i,j,l){var h=this,k=h._errorCorrectionToMask[l]+j,c=h._formatInformation[k],g=i-5,f=i-5;b[12][4]=a(c.charAt(0)),b[12][5]=a(c.charAt(1)),b[12][6]=a(c.charAt(2)),b[12][7]=a(c.charAt(3)),b[12][8]=a(c.charAt(4)),b[12][9]=a(c.charAt(5)),b[12][11]=a(c.charAt(6)),b[12][12]=a(c.charAt(7)),b[11][12]=a(c.charAt(8)),b[9][12]=a(c.charAt(9)),b[8][12]=a(c.charAt(10)),b[7][12]=a(c.charAt(11)),b[6][12]=a(c.charAt(12)),b[5][12]=a(c.charAt(13)),b[4][12]=a(c.charAt(14)),b[g][12]=a(c.charAt(0)),b[g-1][12]=a(c.charAt(1)),b[g-2][12]=a(c.charAt(2)),b[g-3][12]=a(c.charAt(3)),b[g-4][12]=a(c.charAt(4)),b[g-5][12]=a(c.charAt(5)),b[g-6][12]=a(c.charAt(6)),b[12][f-7]=a(c.charAt(7)),b[12][f-6]=a(c.charAt(8)),b[12][f-5]=a(c.charAt(9)),b[12][f-4]=a(c.charAt(10)),b[12][f-3]=a(c.charAt(11)),b[12][f-2]=a(c.charAt(12)),b[12][f-1]=a(c.charAt(13)),b[12][f]=a(c.charAt(14)),d[8][0]=1,d[8][1]=1,d[8][2]=1,d[8][3]=1,d[8][4]=1,d[8][5]=1,d[8][7]=1,d[8][8]=1,d[7][8]=1,d[5][8]=1,d[4][8]=1,d[3][8]=1,d[2][8]=1,d[1][8]=1,d[0][8]=1,d[e-1][8]=1,d[e-2][8]=1,d[e-3][8]=1,d[e-4][8]=1,d[e-5][8]=1,d[e-6][8]=1,d[e-7][8]=1,d[8][e-8]=1,d[8][e-7]=1,d[8][e-6]=1,d[8][e-5]=1,d[8][e-4]=1,d[8][e-3]=1,d[8][e-2]=1,d[8][e-1]=1},_fillMatrix:function(e,f,g,j,h){var a,b,i=this,c=0,d=!0;for(a=j-1;a>=0;a-=2)if(6==a&&a--,d){for(b=j-1;b>=0;b--)e[b][a]||(i._fillModule(b,a,c,f,g,h),c++),a-1>=0&&!e[b][a-1]&&(i._fillModule(b,a-1,c,f,g,h),c++);d=!d}else{for(b=0;j>b;b++)e[b][a]||(i._fillModule(b,a,c,f,g,h),c++),a-1>=0&&!e[b][a-1]&&(i._fillModule(b,a-1,c,f,g,h),c++);d=!d}},_fillModule:function(a,b,c,d,e,f){var g=this;c<f.length?g._fillCharacter(a,b,f.charAt(c),d,e):g._fillCharacter(a,b,"0",d,e)},_fillCharacter:function(a,b,d,f,g){var c,e;switch(g){case"000":c=(a+b)%2===0;break;case"001":c=a%2===0;break;case"010":c=b%3===0;break;case"011":c=(a+b)%3===0;break;case"100":c=(a/2+b/3)%2===0;break;case"101":c=a*b%2+a*b%3===0;break;case"110":c=(a*b%2+a*b%3)%2===0;break;case"111":c=((a+b)%2+a*b%3)%2===0;break;default:c=(a+b)%2===0}e=c?"0"==d?1:0:"0"==d?0:1,f[a+4][b+4]=e},_fillTimingPattern:function(d,e,f){for(var a=10,b=12,c=!0;f-4>b;)c&&(d[a][b]=1),e[a-4][b-4]=1,c=!c,b++;for(b=10,a=12,c=!0;f-4>a;)c&&(d[a][b]=1),e[a-4][b-4]=1,c=!c,a++},_fullFinderPattern:function(d,b,c){var a;for(a=0;7>a;a++)d[b+a][c]=1,d[b][c+a]=1,d[b+a][c+6]=1,d[b+6][c+a]=1;for(b+=2,c+=2,a=0;3>a;a++)d[b+a][c]=1,d[b+a][c+1]=1,d[b+a][c+2]=1},_fillFinderPatternFilledValues:function(g,a,b){var c,d,e,f;for(0===a&&0===b?c=d=8:0===a&&b>0?(c=8,d=b+8):(c=a+8,d=8),e=a;c>e;e++)for(f=b;d>f;f++)g[e][f]=1},_getEC:function(E,F,y){for(var u,v,r=this,B=r._getCodewordsLengthTable(),e=B[E],p=0,j=[],h=[],g=[],f=[],k=[],i=[],q=[],o=[],x=e.firstBlockCount,w=e.secondBlockCount,m=[],n=[];x>0;x--){for(m=[],u=0;u<e.firstDataCodeWords;u++)m[m.length]=y[p],p++;j[j.length]=m,k[k.length]=r._getErrorCorrectionForBlock(m,e)}for(;w>0;w--){for(n=[],v=0;v<e.secondBlockCodeWords;v++)n[n.length]=y[p],p++;h[h.length]=n,i[i.length]=r._getErrorCorrectionForBlock(n,e)}var l,z=e.firstDataCodeWords*e.firstBlockCount+e.secondBlockCodeWords*e.secondBlockCount,A=e.codewordsPerBlock*e.firstBlockCount+e.codewordsPerBlock*e.secondBlockCount,a=0,s=j.length+h.length;for(l=0;s>l;l++)0===a?j.length>0?(g[g.length]=j[0],j.splice(0,1)):(g[g.length]=h[0],a++,h.splice(0,1)):1===a&&h.length>0&&(g[g.length]=h[0],h.splice(0,1));for(a=0,s=k.length+i.length,l=0;s>l;l++)0===a?k.length>0?(f[f.length]=k[0],k.splice(0,1)):(f[f.length]=i[0],a++,i.splice(0,1)):1===a&&i.length>0&&(f[f.length]=i[0],i.splice(0,1));var d,C=g.length,D=f.length,t="";for(a=0,d=0;z>d;d++)a===C&&(a=0),g[a].length>0?(q[q.length]=g[a][0],g[a].splice(0,1),a++):(a++,d--);for(a=0,d=0;A>d;d++)a===D&&(a=0),f[a].length>0?(o[o.length]=f[a][0],f[a].splice(0,1),a++):(a++,d--);for(d=0;d<q.length;d++)t+=b(c(q[d]),8);for(d=0;d<o.length;d++)t+=b(c(o[d]),8);return t},_getErrorCorrectionForBlock:function(f,i){var c,a,e,g,h=i.codewordsPerBlock,b=[],d=[],j=0,k={7:[87,229,146,149,238,102,21],10:[251,67,46,61,118,70,64,94,32,45],13:[74,152,176,100,86,100,106,104,130,218,206,140,78],15:[8,183,61,91,202,37,51,58,58,237,140,124,5,99,105],16:[120,104,107,109,102,161,76,3,91,191,147,169,182,194,225,120],17:[43,139,206,78,43,239,123,206,214,147,24,99,150,39,243,163,136],18:[215,234,158,94,184,97,118,170,79,187,152,148,252,179,5,98,96,153],20:[17,60,79,50,61,163,26,187,202,180,221,225,83,239,156,164,212,212,188,190],22:[210,171,247,242,93,230,14,109,221,53,200,74,8,172,98,80,219,134,160,105,165,231],24:[229,121,135,48,211,117,251,126,159,180,169,152,192,226,228,218,111,0,117,232,87,96,227,21],26:[173,125,158,2,103,182,118,17,145,201,111,28,165,53,161,21,245,142,13,102,48,227,153,145,218,70],28:[168,223,200,104,224,234,108,180,110,190,195,147,205,27,232,201,21,43,245,87,42,195,212,119,242,37,9,123],30:[41,173,145,152,216,31,179,182,50,48,110,86,239,96,222,125,42,173,226,193,224,130,156,37,251,216,238,40,192,180]},l=[1,2,4,8,16,32,64,128,29,58,116,232,205,135,19,38,76,152,45,90,180,117,234,201,143,3,6,12,24,48,96,192,157,39,78,156,37,74,148,53,106,212,181,119,238,193,159,35,70,140,5,10,20,40,80,160,93,186,105,210,185,111,222,161,95,190,97,194,153,47,94,188,101,202,137,15,30,60,120,240,253,231,211,187,107,214,177,127,254,225,223,163,91,182,113,226,217,175,67,134,17,34,68,136,13,26,52,104,208,189,103,206,129,31,62,124,248,237,199,147,59,118,236,197,151,51,102,204,133,23,46,92,184,109,218,169,79,158,33,66,132,21,42,84,168,77,154,41,82,164,85,170,73,146,57,114,228,213,183,115,230,209,191,99,198,145,63,126,252,229,215,179,123,246,241,255,227,219,171,75,150,49,98,196,149,55,110,220,165,87,174,65,130,25,50,100,200,141,7,14,28,56,112,224,221,167,83,166,81,162,89,178,121,242,249,239,195,155,43,86,172,69,138,9,18,36,72,144,61,122,244,245,247,243,251,235,203,139,11,22,44,88,176,125,250,233,207,131,27,54,108,216,173,71,142,1],m=[-1,0,1,25,2,50,26,198,3,223,51,238,27,104,199,75,4,100,224,14,52,141,239,129,28,193,105,248,200,8,76,113,5,138,101,47,225,36,15,33,53,147,142,218,240,18,130,69,29,181,194,125,106,39,249,185,201,154,9,120,77,228,114,166,6,191,139,98,102,221,48,253,226,152,37,179,16,145,34,136,54,208,148,206,143,150,219,189,241,210,19,92,131,56,70,64,30,66,182,163,195,72,126,110,107,58,40,84,250,133,186,61,202,94,155,159,10,21,121,43,78,212,229,172,115,243,167,87,7,112,192,247,140,128,99,13,103,74,222,237,49,197,254,24,227,165,153,119,38,184,180,124,17,68,146,217,35,32,137,46,55,63,209,91,149,188,207,205,144,135,151,178,220,252,190,97,242,86,211,171,20,42,93,158,132,60,57,83,71,109,65,162,31,45,67,216,183,123,164,118,196,23,73,236,127,12,111,246,108,161,59,82,41,157,85,170,251,96,134,177,187,204,62,90,203,89,95,176,156,169,160,81,11,245,22,235,122,117,44,215,79,174,213,233,230,231,173,232,116,214,244,234,168,80,88,175];for(c=0;c<f.length+h;c++)d[j++]=c<f.length?f[c]:0;for(c=0;c<f.length;c++)if(e=d[0],d.splice(0,1),0!==e){for(b=k[h].slice(0),e=m[e],a=0;a<b.length;a++)g=e+b[a],g>255&&(g%=255),b[a]=g;for(a=0;a<b.length;a++)b[a]=l[b[a]];for(a=0;a<b.length;a++)d[a]=d[a]^b[a]}return d},_getIntegerValues:function(a){return k(a,function(a){return z(a)})},_getBinaryValues:function(b){var a,c=[];for(a=0;a<b.length;a+=8)a+8<=b.length?c.push(b.substr(a,8)):c.push(q(b.substring(a),8));return c},_padEncodedToLength:function(a,b){if(a.length>=b)return a.substr(0,b);for(var c=a,e="11101100",f="00010001",d=!0;c.length<b;)c+=d?e:f,d=!d;return c},_getVersion:function(b,c){var a,d=b.length;for(a=1;39>a&&!(this._verErrLenTable[a+""+c]/8>=d);a++);return a+1},_getDataLength:function(c,a){var b=this;return b._verErrLenTable[b._getVersion(c,a)+""+a]},_getFormatData:function(a,d){return this.codeMode+b(c(a.length),this._getFormatLengthTotal(a,d))},_getFormatLengthTotal:function(d,e){var c=this,a=c.mode,b=c._getVersion(d,e);return b>=1&&9>=b?a==g?10:a==h?9:8:b>=10&&26>=b?a==g?12:a==h?11:a==m?16:10:a==g?14:a==h?13:a==m?16:12},_getCodewordsLengthTable:function(){var b=this;if(b._clt)return b._clt;var d,e,c=[7,1,19,0,0,10,1,16,0,0,13,1,13,0,0,17,1,9,0,0,10,1,34,0,0,16,1,28,0,0,22,1,22,0,0,28,1,16,0,0,15,1,55,0,0,26,1,44,0,0,18,2,17,0,0,22,2,13,0,0,20,1,80,0,0,18,2,32,0,0,26,2,24,0,0,16,4,9,0,0,26,1,108,0,0,24,2,43,0,0,18,2,15,2,16,22,2,11,2,12,18,2,68,0,0,16,4,27,0,0,24,4,19,0,0,28,4,15,0,0,20,2,78,0,0,18,4,31,0,0,18,2,14,4,15,26,4,13,1,14,24,2,97,0,0,22,2,38,2,39,22,4,18,2,19,26,4,14,2,15,30,2,116,0,0,22,3,36,2,37,20,4,16,4,17,24,4,12,4,13,18,2,68,2,69,26,4,43,1,44,24,6,19,2,20,28,6,15,2,16,20,4,81,0,0,30,1,50,4,51,28,4,22,4,23,24,3,12,8,13,24,2,92,2,93,22,6,36,2,37,26,4,20,6,21,28,7,14,4,15,26,4,107,0,0,22,8,37,1,38,24,8,20,4,21,22,12,11,4,12,30,3,115,1,116,24,4,40,5,41,20,11,16,5,17,24,11,12,5,13,22,5,87,1,88,24,5,41,5,42,30,5,24,7,25,24,11,12,7,13,24,5,98,1,99,28,7,45,3,46,24,15,19,2,20,30,3,15,13,16,28,1,107,5,108,28,10,46,1,47,28,1,22,15,23,28,2,14,17,15,30,5,120,1,121,26,9,43,4,44,28,17,22,1,23,28,2,14,19,15,28,3,113,4,114,26,3,44,11,45,26,17,21,4,22,26,9,13,16,14,28,3,107,5,108,26,3,41,13,42,30,15,24,5,25,28,15,15,10,16,28,4,116,4,117,26,17,42,0,0,28,17,22,6,23,30,19,16,6,17,28,2,111,7,112,28,17,46,0,0,30,7,24,16,25,24,34,13,0,0,30,4,121,5,122,28,4,47,14,48,30,11,24,14,25,30,16,15,14,16,30,6,117,4,118,28,6,45,14,46,30,11,24,16,25,30,30,16,2,17,26,8,106,4,107,28,8,47,13,48,30,7,24,22,25,30,22,15,13,16,28,10,114,2,115,28,19,46,4,47,28,28,22,6,23,30,33,16,4,17,30,8,122,4,123,28,22,45,3,46,30,8,23,26,24,30,12,15,28,16,30,3,117,10,118,28,3,45,23,46,30,4,24,31,25,30,11,15,31,16,30,7,116,7,117,28,21,45,7,46,30,1,23,37,24,30,19,15,26,16,30,5,115,10,116,28,19,47,10,48,30,15,24,25,25,30,23,15,25,16,30,13,115,3,116,28,2,46,29,47,30,42,24,1,25,30,23,15,28,16,30,17,115,0,0,28,10,46,23,47,30,10,24,35,25,30,19,15,35,16,30,17,115,1,116,28,14,46,21,47,30,29,24,19,25,30,11,15,46,16,30,13,115,6,116,28,14,46,23,47,30,44,24,7,25,30,59,16,1,17,30,12,121,7,122,28,12,47,26,48,30,39,24,14,25,30,22,15,41,16,30,6,121,14,122,28,6,47,34,48,30,46,24,10,25,30,2,15,64,16,30,17,122,4,123,28,29,46,14,47,30,49,24,10,25,30,24,15,46,16,30,4,122,18,123,28,13,46,32,47,30,48,24,14,25,30,42,15,32,16,30,20,117,4,118,28,40,47,7,48,30,43,24,22,25,30,10,15,67,16,30,19,118,6,119,28,18,47,31,48,30,34,24,34,25,30,20,15,61,16],f=["L","M","Q","H"],a=0;for(b._clt={},d=1;40>=d;d++)for(e=0;e<f.length;e++)b._clt[d+""+f[e]]={codewordsPerBlock:c[a],firstBlockCount:c[a+1],firstDataCodeWords:c[a+2],secondBlockCount:c[a+3],secondBlockCodeWords:c[a+4]},a+=5;return b._clt},_getPositionAdjustmentsTable:function(){var a=[],b=2;return a[b++]=[6,18],a[b++]=[6,22],a[b++]=[6,26],a[b++]=[6,30],a[b++]=[6,34],a[b++]=[6,22,38],a[b++]=[6,24,42],a[b++]=[6,26,46],a[b++]=[6,28,50],a[b++]=[6,30,54],a[b++]=[6,32,58],a[b++]=[6,34,62],a[b++]=[6,26,46,66],a[b++]=[6,26,48,70],a[b++]=[6,26,50,74],a[b++]=[6,30,54,78],a[b++]=[6,30,56,82],a[b++]=[6,30,58,86],a[b++]=[6,34,62,90],a[b++]=[6,28,50,72,94],a[b++]=[6,26,50,74,98],a[b++]=[6,30,54,78,102],a[b++]=[6,28,54,80,106],a[b++]=[6,32,58,84,110],a[b++]=[6,30,58,86,114],a[b++]=[6,34,62,90,118],a[b++]=[6,26,50,74,98,122],a[b++]=[6,30,54,78,102,126],a[b++]=[6,26,52,78,104,130],a[b++]=[6,30,56,82,108,134],a[b++]=[6,34,60,86,112,138],a[b++]=[6,30,58,86,114,142],a[b++]=[6,34,62,90,118,146],a[b++]=[6,30,54,78,102,126,150],a[b++]=[6,24,50,76,102,128,154],a[b++]=[6,28,54,80,106,132,158],a[b++]=[6,32,58,84,110,136,162],a[b++]=[6,26,54,82,110,138,166],a[b++]=[6,30,58,86,114,142,170],a}}),u=j.extend({mode:g,codeMode:"0001",validateRegex:"^\\d+$",encodeValue:function(d){for(var e=[];d.length>0;)d.length>2?(e.push(b(c(a(d.substr(0,3))),10)),d=d.substr(3)):2===d.length?(e.push(b(c(a(d)),7)),d=""):(e.push(b(c(a(d)),4)),d="");return 0===e.length&&e.push(b(c(0),4)),e.join("")}});f.addMode(u);var v=j.extend({mode:m,codeMode:"0100",validateRegex:"^[0-9A-Za-z'\\\r\\\n\\ \\!\\\"\\#\\$\\%\\&\\(\\)\\*\\+\\,\\-\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\¥\\]\\^\\_\\`\\{\\|\\}\\¯\\｡\\｢\\｣\\､\\･\\ｦ\\ｧ\\ｨ\\ｩ\\ｪ\\ｫ\\ｬ\\ｭ\\ｮ\\ｯ\\ｰ\\ｱ\\ｲ\\ｳ\\ｴ\\ｵ\\ｶ\\ｷ\\ｸ\\ｹ\\ｺ\\ｻ\\ｼ\\ｽ\\ｾ\\ｿ\\ﾀ\\ﾁ\\ﾂ\\ﾃ\\ﾄ\\ﾅ\\ﾆ\\ﾇ\\ﾈ\\ﾉ\\ﾊ\\ﾋ\\ﾌ\\ﾍ\\ﾎ\\ﾏ\\ﾐ\\ﾑ\\ﾒ\\ﾓ\\ﾔ\\ﾕ\\ﾖ\\ﾗ\\ﾘ\\ﾙ\\ﾚ\\ﾛ\\ﾜ\\ﾝ\\ﾞ\\ﾟ]+$",encodingTable:{"\r":"13","\n":"10"," ":"32","!":"33",'"':"34","#":"35",$:"36","%":"37","&":"38","'":"39","(":"40",")":"41","*":"42","+":"43",",":"44","-":"45",".":"46","/":"47",0:"48",1:"49",2:"50",3:"51",4:"52",5:"53",6:"54",7:"55",8:"56",9:"57",":":"58",";":"59","<":"60","=":"61",">":"62","?":"63","@":"64",A:"65",B:"66",C:"67",D:"68",E:"69",F:"70",G:"71",H:"72",I:"73",J:"74",K:"75",L:"76",M:"77",N:"78",O:"79",P:"80",Q:"81",R:"82",S:"83",T:"84",U:"85",V:"86",W:"87",X:"88",Y:"89",Z:"90","[":"91","¥":"92","]":"93","^":"94",_:"95","`":"96",a:"97",b:"98",c:"99",d:"100",e:"101",f:"102",g:"103",h:"104",i:"105",j:"106",k:"107",l:"108",m:"109",n:"110",o:"111",p:"112",q:"113",r:"114",s:"115",t:"116",u:"117",v:"118",w:"119",x:"120",y:"121",z:"122","{":"123","|":"124","}":"125","¯":"126","｡":"161","｢":"162","｣":"163","､":"164","･":"165","ｦ":"166","ｧ":"167","ｨ":"168","ｩ":"169","ｪ":"170","ｫ":"171","ｬ":"172","ｭ":"173","ｮ":"174","ｯ":"175","ｰ":"176","ｱ":"177","ｲ":"178","ｳ":"179","ｴ":"180","ｵ":"181","ｶ":"182","ｷ":"183","ｸ":"184","ｹ":"185","ｺ":"186","ｻ":"187","ｼ":"188","ｽ":"189","ｾ":"190","ｿ":"191","ﾀ":"192","ﾁ":"193","ﾂ":"194","ﾃ":"195","ﾄ":"196","ﾅ":"197","ﾆ":"198","ﾇ":"199","ﾈ":"200","ﾉ":"201","ﾊ":"202","ﾋ":"203","ﾌ":"204","ﾍ":"205","ﾎ":"206","ﾏ":"207","ﾐ":"208","ﾑ":"209","ﾒ":"210","ﾓ":"211","ﾔ":"212","ﾕ":"213","ﾖ":"214","ﾗ":"215","ﾘ":"216","ﾙ":"217","ﾚ":"218","ﾛ":"219","ﾜ":"220","ﾝ":"221","ﾞ":"222","ﾟ":"223"},encodeValue:function(e){var d,g=this,f=[];for(d=0;d<e.length;d++)f.push(b(c(a(g.encodingTable[e.charAt(d)])),8));return f.join("")}});f.addMode(v);var w=j.extend({mode:h,codeMode:"0010",validateRegex:"^[0-9A-Z \\$\\%\\*\\+\\-\\.\\/\\:]+$",encodingTable:{0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",A:"10",B:"11",C:"12",D:"13",E:"14",F:"15",G:"16",H:"17",I:"18",J:"19",K:"20",L:"21",M:"22",N:"23",O:"24",P:"25",Q:"26",R:"27",S:"28",T:"29",U:"30",V:"31",W:"32",X:"33",Y:"34",Z:"35"," ":"36",$:"37","%":"38","*":"39","+":"40","-":"41",".":"42","/":"43",":":"44"},encodeValue:function(h){var l,d,j,m,e,o=this,n=h.length%2!==0,g=[],f=[],k=[],i=0;for(d=0;d<h.length;d++)l=h.charAt(d),g[d]=o.encodingTable[l];for(d=0;d<g.length;d+=2)j=g[d],d+1<=g.length-1?(m=g[d+1],f[i]=a(45*j)+a(m)):f[i]=j,i++;for(d=0;d<f.length;d++)e=c(f[d]),n&&d===f.length-1?(e=b(e,6),k[d]=e):(e=b(e,11),k[d]=e);return k.join("")}});f.addMode(w);var x=o.extend({init:function(a){var b=this,c=a.style;b.options=a,b.size=a.size-2*c.padding,s||e.namespaces.sqrv||(e.namespaces.add("sqrv","urn:schemas-microsoft-com:vml","#default#VML"),e.createStyleSheet().cssText="sqrv\\:fill, sqrv\\:path, sqrv\\:shape, sqrv\\:stroke{ behavior:url(#default#VML); display: inline-block; } ")},all:function(i){var e,f,m=this,d=m.size,n=m.options,c=n.style,b=d/i.length,g="",j=[];for(c.padding&&(g+="margin:"+c.padding+"px;"),e=0;e<i.length;e++)for(f=0;f<i[e].length;f++)i[e][f]&&j.push({x:f*b,y:e*b});if(s)return'<svg xmlns="'+r+'" version="1.1" width="'+d+'" height="'+d+'" shape-rendering="crispEdges"'+(g?' style="'+g+'" ':"")+'><path d="'+k(j,function(a){return"M"+a.x+" "+a.y+" L"+(a.x+b)+" "+a.y+" L"+(a.x+b)+" "+(a.y+b)+" L"+a.x+" "+(a.y+b)+" z"}).join(" ")+'" fill="'+c.color+'" stroke="'+c.color+'" stroke-width="0" /></svg>';var l=1e4/d,h=a(b*l),o=k(j,function(d){var b=a(d.x*l),c=a(d.y*l);return"m"+b+","+c+" l"+(b+h)+","+c+","+(b+h)+","+(c+h)+","+b+","+(c+h)}).join(" ")+" e";return'<sqrv:shape style="z-index:200; position:absolute; width:'+d+"px; height:"+d+"px; display:block; "+g+'" coordsize="10000,10000" path="'+o+'" filled="t" fillcolor="'+c.color+'" stroked="f" strokecolor="'+c.color+'" strokeweight="0"></sqrv:shape>'}}),y={value:"",mode:"byte",errorLevel:"L",size:300,style:{background:null,borderColor:null,borderStyle:null,borderWidth:0,color:"#000000",padding:5}},p=l.extend({init:function(p,o){l.fn.init.apply(this,arguments);var j,e=this,a=e.options,c=a.style,d=a.value,k=(a.mode+"").toLowerCase(),b=a.errorLevel,h=a.dieOnError,g=f.byMode(k),m=new x(a);return n(e.element).css({background:c.background,borderColor:c.borderColor,borderStyle:c.borderStyle,borderWidth:c.borderWidth,width:a.size,height:a.size}),g?g.validate(d)?"L"!=b&&"M"!=b&&"Q"!=b&&"H"!=b?void i("Invalid errorLevel: "+b,h):(j=g.encode(d,b),void n(e.element).html(m.all(j))):void i("Invalid qrcode value: "+d,h):void i("Invalid qrcode mode: "+k,h)},destroy:function(){this.element.empty(),l.fn.destroy.call(this)}});p.defaults=y,d.ui.plugin("QRcode",p)}(jQuery,shield,this);
!function(a,e,i,m){var g,f,c=e.ui.Widget,d=document,b=Math.ceil,j=navigator.userAgent,k=i.opera,l=/msie/i.test(j)&&!k,h=l&&7===d.documentMode;a.extend;g={show:!1,showImage:!0,text:null,template:null,useSmallImage:!1},f=c.extend({init:function(b,d){var a=this;c.fn.init.apply(a,arguments),a.refresh(),a.options.show?a.show():a.hide()},destroy:function(){var b=this;a(b.mainElement).remove(),b.options.showImage&&(a(b.loadingImage).remove(),b.loadingImage=null),b.loadingText&&(a(b.loadingText).remove(),b.loadingText=null),a(b.backgroundElement).remove(),b.mainElement=b.backgroundElement=null,c.fn.destroy.call(b)},_render:function(){var f,c=this,g=c.options,e=g.template;if(c.mainElement=f=a("<div/>").appendTo(d.body),f.addClass("sui-loading-panel"),h&&f.addClass("sui-loading-panel-ie7"),e){e=a(e.replace(/^\s+/,"").replace(/\s+$/,"")),e.appendTo(d.body);var k=b((c.element.height()-e.height())/2),l=b((c.element.width()-e.width())/2);e.css({"z-index":"inherit",position:"relative",dispaly:"block",top:k+"px",left:l+"px"}).appendTo(f),c.template=e}else{if(g.showImage){var i=a("<span/>").appendTo(f);c.loadingImage=i,g.useSmallImage?i.addClass("sui-loading-image-small"):i.addClass("sui-loading-image")}g.text&&c._generateTextElement()}var j=a("<span/>").appendTo(f);c.backgroundElement=j,j.addClass("sui-loading-back"),c._setPosition()},_generateTextElement:function(){var b=this,c=a("<span/>").appendTo(b.mainElement);c.get(0).innerHTML=b.options.text,c.addClass("sui-loading-text"),b.loadingText=c},refresh:function(){var a=this,b=(a.options,a.mainElement&&"none"!=a.mainElement.css("display")?!1:!0);a.destroy(),a._render(),b?a.hide():a.show()},_setPosition:function(){var a=this,f=(a.options,a.element),d=f.offset(),c=e.ui.Util.GetMaxZIndex("div")+1;a.mainElement.css({left:b(d.left)+"px",top:b(d.top)+"px","z-index":c}),h&&(a.loadingText&&a.loadingText.css({"z-index":c+1}),a.loadingImage&&a.loadingImage.css({"z-index":c+1}),a.template&&a.template.css("z-index",c+1))},_setElementsPosition:function(){var a=this,f=a.element.height(),c=a.loadingImage,d=a.loadingText,g=c?c.height():0,h=d?d.height():0,e=b((f-g-h)/2);c&&a.loadingImage.css("top",e+"px"),d&&a.loadingText.css("top",e+"px")},show:function(){var a=this,c=a.options,b=a.element;a.mainElement.width(b.get(0).offsetWidth),a.mainElement.height(b.get(0).offsetHeight),a._setPosition(),a.mainElement.css("display",""),c.template||a._setElementsPosition()},hide:function(){this.mainElement.css("display","none")},setText:function(a){this.options.text=a,this.refresh()}}),f.defaults=g,e.ui.plugin("LoadingPanel",f)}(jQuery,shield,this);
!function(b,a,q,v){var e=a.ui.Widget,o=(a.Class,a.DataSource),s=document,n=a.is,j=(a.get,a.format),c=a.to["int"],k=(Math.abs,b.each,b.proxy),u=(b.extend,b.map,q.opera),r=navigator.userAgent,f=/msie/i.test(r)&&!u,d=f&&7===s.documentMode,i="width",p="sui-selected",h="sui-disabled",m="click",l="px",t={currentPage:1,totalItems:null,pageSize:10,pageLinksCount:5,directionLinks:!0,boundaryLinks:!0,imageLinks:!1,messages:{pageLabelTemplate:"{0}",infoBarTemplate:"{0} - {1} of {2} items",previousText:"&lsaquo;",nextText:"&rsaquo;",firstText:"&laquo;",lastText:"&raquo;",firstTooltip:"Go to the first page",previousTooltip:"Go to the previous page",nextTooltip:"Go to the next page",lastTooltip:"Go to the last page"}},g=e.extend({init:function(d,g){e.fn.init.apply(this,arguments);var c,a=this,b=a.options;a.currentPage=b.currentPage,a._createWrappers(),a._createPagerElements(),f&&a.element.on("selectstart",a._selectStart=function(){return!1}),a.element.on(m,"a",a._click=k(a._clickHandler,a)),b.dataSource?(c=a.dataSource=o.create(b.dataSource),c.on("change.shieldPager"+a.getInstanceId(),k(a._dataChange,a)),a._updateDataSource()):a.refresh(!0)},destroy:function(){var a=this;a.dataSource&&a.dataSource.off("change.shieldPager"+a.getInstanceId()),a.pagination=null,a.infoBox=null,a.element.off("selectstart",a._selectStart),a._selectStart=null,a.element.off(m,"a",a._click),a._click=null,a.startLinkIndex=null,a.endLinkIndex=null,a.element.remove(),e.fn.destroy.call(a)},_clickHandler:function(d){var e=b(d.currentTarget),a=this;a.options;if(d.preventDefault(),!e.parent().hasClass(h)){var f=c(e.attr("data-page"));a.currentPage=f,a.refresh()}},_createWrappers:function(){var a=this,c=a.element;c.addClass("sui-pager sui-pager-core");var e=b("<ul />").appendTo(c);d?e.addClass("sui-pagination sui-pagination-ie7"):e.addClass("sui-pagination");var g=b("<div />").appendTo(c);f&&!d?g.addClass("sui-pager-info-box-ie"):g.addClass("sui-pager-info-box"),a.pagination=e,a.infoBox=g},_updateInfoBox:function(){var b=this,a=b.options,e=a.messages,c=a.pageSize*(b.currentPage-1)+1,d=c-1+a.pageSize,f=Math.ceil(a.totalItems/a.pageSize);d>a.totalItems&&(d=a.totalItems),0===a.totalItems&&(c=0);var g=j.call(b,e.infoBarTemplate,c,d,a.totalItems,b.currentPage,f);b.infoBox.empty(),b.infoBox.html(g)},_createPagerElements:function(){var k=this,g=k.options,a=g.messages,m=k.currentPage,q=k.pagination,n=Math.ceil(g.totalItems/g.pageSize),C=Math.min(g.pageLinksCount,n),e="",o="",u="",w="",t="",y=c((m-1)/g.pageLinksCount),v=y*g.pageLinksCount+1;1==m&&(u=" "+h),m!=n&&g.totalItems||(w=" "+h),g.imageLinks&&(a.previousText="&nbsp;",a.nextText="&nbsp;",a.firstText="&nbsp;",a.lastText="&nbsp;",o="sui-navigation-links ");var x=Math.min(v+C,n+1);k.startLinkIndex=v,k.endLinkIndex=x-1,y>0&&(e+="<li class='sui-pager-element'><a data-page='"+(k.startLinkIndex-1)+"'>...</a></li>");for(var f=v;x>f;f++){var B=j.call(k,a.pageLabelTemplate,f);f==m&&(t=" "+p),e+="<li class='sui-pager-element'><a data-page='"+f+"' class='sui-pager-number"+t+"'>"+B+"</a></li>",t=""}k.endLinkIndex<n&&(e+="<li class='sui-pager-element'><a data-page='"+(k.endLinkIndex+1)+"'>...</a></li>"),g.directionLinks&&(e="<li class='sui-pager-element"+u+"'><a title='"+a.previousTooltip+"' data-page='"+(m-1)+"' class='"+o+"sui-prev'>"+a.previousText+"</a></li>"+e,e=e+"<li class='sui-pager-element"+w+"'><a title='"+a.nextTooltip+"' data-page='"+(m+1)+"' class='"+o+"sui-next'>"+a.nextText+"</a></li>"),g.boundaryLinks&&(e="<li class='sui-pager-element"+u+"'><a title='"+a.firstTooltip+"' data-page='1' class='"+o+"'>"+a.firstText+"</a></li>"+e,e=e+"<li class='sui-pager-element"+w+"'><a title='"+a.lastTooltip+"' data-page='"+n+"' class='"+o+"'>"+a.lastText+"</a></li>"),q.html(e);var r=q.find("a");if(r.length>0&&(b(r[0]).addClass("sui-first"),b(r[r.length-1]).addClass("sui-last")),d){var s=q.find("li");if(s.length>0){var z=0;for(f=0;f<s.length;f++){var A=s[f].clientWidth;z+=A,b(s[f]).css(i,A+l)}q.css(i,z+l)}}},_dataChange:function(){var a=this,c=a.options,b=a.dataSource,d=b.take,e=Math.ceil(b.skip/d)+1;a.currentPage=e,c.pageSize=d,c.totalItems=b.total,a.refresh(!0)},refresh:function(c){var a=this,b=a.options;Math.ceil(b.totalItems/b.pageSize),a.currentPage,a.dataSource;a.pagination.empty(),a._createPagerElements(),a._updateInfoBox(),c||(a._updateDataSource(),a.trigger("change",{currentPage:a.currentPage,pageSize:b.pageSize}))},_updateDataSource:function(){var b=this,a=b.dataSource,c=b.options;a&&(a.skip=(b.currentPage-1)*c.pageSize,a.take=c.pageSize,a.read())},page:function(b){var a=this;if(!b)return a.currentPage;var d=c(b);a._isValidPage(d)&&(a.currentPage=d,a.refresh())},first:function(){this.currentPage=1,this.refresh()},last:function(){var a=this,b=a.options,c=Math.ceil(b.totalItems/b.pageSize);a.currentPage=c,a.refresh()},hasNext:function(){var a=this,b=a.options,c=Math.ceil(b.totalItems/b.pageSize);return a.currentPage<c},hasPrev:function(){return this.currentPage>1},next:function(){var a=this,b=a.options,c=Math.ceil(b.totalItems/b.pageSize);a.currentPage!=c&&(a.currentPage=a.currentPage+1,a.refresh())},prev:function(){var a=this;a.options;1!=a.currentPage&&(a.currentPage=a.currentPage-1,a.refresh())},pageSize:function(b){var a=this,d=a.options;if(!b)return d.pageSize;var e=c(b);a._isValidPageSize(e)&&(a.currentPage=1,d.pageSize=e,a.refresh())},_isValidPage:function(c){var b=this.options,d=Math.ceil(b.totalItems/b.pageSize);return n.integer(c)?c>d||1>c?(a.error("Invalid page number. The page number must be greater than 0 and less than "+d+".",b.dieOnError),!1):!0:(a.error("Invalid page number. The page number must integer.",b.dieOnError),!1)},_isValidPageSize:function(b){var c=this.options;return n.integer(b)?1>b?(a.error("Invalid page number. The page number must be greater than 0 (zero).",c.dieOnError),!1):!0:(a.error("Invalid page size number. The page size number must be integer.",c.dieOnError),!1)}});g.defaults=t,a.ui.plugin("Pager",g),a.ui.Pager=g}(jQuery,shield,this);
!function(a,g,H,c){var Va,K,Ta,R,Ra,qa,Pa,pa,Na,oa,na,I,Ja,ma,la,v,Ga,ka,Ea,_,Ca,ia,Aa,fa,h=g.ui.Widget,ua=(g.Class,g.DataSource),Qa=g.ui.Position,f=g.Constants.KeyCode,x=g.error,ea=g.is.func,La=g.is.array,e=g.is.defined,Ia=(g.is.number,g.to.array),ab=g.to["int"],ja=g.to.number,J=g.support.browser,y=g.format,D=g.strid,M=document,bb=Math.min,_a=Math.max,$a=Math.pow,ha=a.extend,cb=(a.map,a.each),b=a.proxy,X=a.inArray,j="id",m="role",o="true",t="false",jb="listbox",U="textbox",db="button",eb="switch",i="aria",G=i+"-selected",va=i+"-autocomplete",$=i+"-activedescendant",ba=i+"-multiline",Ba=i+"-valuenow",fb=i+"-valuemin",ib=i+"-valuemax",Za=i+"-valuetext",Ma=i+"-disabled",ca=i+"-haspopup",A=i+"-checked",wa=i+"-label",ya=i+"-labelledby",da=i+"-controls",Da=i+"-expanded",Fa="alt",Ha="title",d="disabled",p="checked",T="selected",Oa="itemclick",l="tabindex",Sa="mousedown",Ua="mouseup",ta="mouseout",q="click",w="keydown",lb="keypress",kb="keyup",Xa="cut",Ya="paste",ga="dragstart",xa="dragenter",sa="dragover",za="drop",k="change",r="focus",s="blur",V="resize",B="select",hb="input",z="value",Q="placeholder",O="selectstart",N="unselectable",Z="on",Ka="width",W="height",S="suilbitemdata",E="suilbitemindex",F="suilbitemvalue",Y="suilbitemtext",u="uts",n="uti",ra="utta",gb="uto",C=function(c){var b=a(c).prop("tagName").toLowerCase();return b==B?u:b==hb?n:"textarea"==b?ra:gb},aa=function(b){return a("<div/>").text(b).html()},L=function(d){var c,b=a(d);b.focus(),b.get(0).setSelectionRange?(c=2*b.val().length,b.get(0).setSelectionRange(c,c)):b.val(b.val())},Wa=function(a){a+="";var b=a.lastIndexOf(".");return b>-1?a.length-b-1:0},P=function(a,b){if(a&&!ea(a))if(La(a))for(var c=0;c<a.length;c++)P(a[c],b);else if(a.or||a.and)for(var d in a)a.hasOwnProperty(d)&&P(a[d],b);else a.value=b};Va={enabled:!0,cls:c,dataSource:c,readDataSource:!0,valueTemplate:c,textTemplate:c,multiple:c,selected:c,values:c,width:c,height:c,maxHeight:c,events:{}},K=h.extend({init:function(){h.fn.init.apply(this,arguments);var g,q,f,i,c=this,d=c.options,v=d.dieOnError,t=d.dataSource,p=d.selected,j=d.values,y=d.renderToINTERNAL,z=d.wrapOriginalINTERNAL,A=d.tabindexINTERNAL,E=d.filterINTERNAL,F=e(E)?{filter:E}:{},G=e(z)?z:!0;if(c._original=g=a(c.element),c._utype=i=C(g),i==n&&d.multiple)return c.destroy(),void x("shieldListBox: Cannot initialize a multi-selection ListBox from an input element.",v);if(c._eventNS=".shieldListBox"+c.getInstanceId(),e(j)||e(p)||i!=u&&i!=n||(j=g.val()),G?(c.wrapper=g.wrap("<span/>").parent(),c._isWrapped=!0):c._isWrapped=!1,g.hide(),c.element=f=a('<ul id="'+D()+'"/>').on(r+c._eventNS,b(c._focus,c)).on(s+c._eventNS,b(c._blur,c)),e(d.width)&&f.css(Ka,d.width),e(d.height)&&f.css(W,d.height),e(d.maxHeight)&&f.css("max-height",d.maxHeight),a(y).length>0?a(y).append(f):g.after(f),t)c.dataSource=ua.create(t,F),d.valueTemplate||(d.valueTemplate="{0}"),d.textTemplate||(d.textTemplate="{0}");else{if(i!=u)return c.destroy(),void x("shieldListBox: No dataSource or underlying SELECT element found.",v);c.dataSource=ua.create(ha({},{data:g,schema:{type:B}},F)),d.valueTemplate||(d.valueTemplate="{value}"),d.textTemplate||(d.textTemplate="{text}"),e(d.multiple)||(d.multiple=g.not("[multiple]").length<=0)}f.addClass("sui-listbox"),d.cls&&f.addClass(d.cls),q=e(A)?A:g.attr(l),f.attr(l,e(q)?q:"0"),f.on(w+c._eventNS,b(c._keydown,c)),c.dataSource.on(k+c._eventNS,b(c._dsChange,c)),e(j)?c._initValues=j:e(p)&&(c._initSelected=p),f.attr(m,jb),d.multiple&&f.attr("aria-multiselectable",o),d.readDataSource&&c.dataSource.read(),c.enabled(d.enabled)},refresh:function(a){this.refreshWithElement(this._original,a)},_focus:function(b){var a=this;a._oldSelection=a.selected(),a.trigger(r)},_blur:function(e){var b=this,d=b._oldSelection,c=b.selected();(0!==a(d).not(c).length||0!==a(c).not(d).length)&&b.trigger(k),b._oldSelection=c,b.trigger(s)},_dsChange:function(b){var a=this;a._render(),a._dsLoadedOnce||(a._dsLoadedOnce=!0,e(a._initValues)?a.values(a._initValues):e(a._initSelected)&&a.selected(a._initSelected))},_render:function(){var b=this,e=b.options,h=b.dataSource.view,f=a(b.element),d=b._utype,g=b._original,i=f.attr(j)+"_opt";d==n?b._original.val():c;f.empty(),d==u?g.empty():d==n&&g.removeAttr(z),h&&cb(h,function(h,c){var k=y.call(b,e.valueTemplate,c),j=y.call(b,e.textTemplate,c),l=a('<li id="'+i+h+'" role="option">'+j+"</li>").addClass("sui-listbox-item sui-unselectable").click(function(d){b._enabled&&(b._setActive(a(this)),b._toggleActive(d)),b.trigger(Oa,{index:h,item:c})}).on(O,function(){return!1}).data(S,c).data(E,h).data(F,k).data(Y,j);e.multiple&&l.attr(G,t),f.append(l),d==u&&g.append(a("<option/>").attr(z,k).text(j))})},_keydown:function(a){var b=this,c=!0;switch(a.keyCode){case f.UP:b._move("up",a);break;case f.DOWN:b._move("down",a);break;case f.HOME:b._move("first",a),c=!1;break;case f.END:b._move("last",a),c=!1;break;case f.SPACE:case f.ENTER:b._toggleActive(a);break;default:c=!1}c&&a.preventDefault()},_move:function(e,g){var d=this,f=a(d.element),c=f.find(".sui-listbox-item-active").first(),b=f.find(":first");d._enabled&&("up"==e?c.prev().length>0?b=c.prev():c.length>0&&(b=c):"down"==e?c.next().length>0?b=c.next():c.length>0&&(b=c):"first"==e?b=f.find(".sui-listbox-item").first():"last"==e&&(b=f.find(".sui-listbox-item").last()),b.length<=0||(d.options.multiple?(d._setActive(b),d._ensureInScrollableArea(b)):d._select(b)))},_ensureInScrollableArea:function(d){var h=this,b=a(h.element),e=b.height(),f=b.scrollTop(),i=d.outerHeight(),c=d.position().top,g=c+i;0>c?b.scrollTop(f+c):g>e&&b.scrollTop(f+(g-e))},ensureActiveViewableINTERNAL:function(){var a=this,b=a._getActive();b.length>0&&a._ensureInScrollableArea(b)},_getActive:function(){return a(this.element).find(".sui-listbox-item-active").first()},_setActive:function(b){b.addClass("sui-listbox-item-active").siblings().removeClass("sui-listbox-item-active"),a(this.element).attr($,b.attr(j))},_setSelected:function(a){a.addClass("sui-listbox-item-selected").attr(G,o)},_unsetSelected:function(a){a.removeClass("sui-listbox-item-selected"),this.options.multiple?a.attr(G,t):a.removeAttr(G)},_toggleActive:function(a){this._toggle(a,this._getActive())},_toggle:function(c,a){var b=this;b._enabled&&(!a||a.length<=0||(b.options.multiple&&a.hasClass("sui-listbox-item-selected")?b._deselect(a):b._select(a)))},_select:function(a,e){var b=this,c=b._original,d=b._utype,f=b.options.multiple;f||b.clearSelection(),b._setActive(a),b._ensureInScrollableArea(a),b._setSelected(a),d==u?c.find("option:eq("+a.data(E)+")").attr(T,T):d==n&&c.attr(z,a.data(F)),e||b.trigger(B,{index:a.data(E),item:a.data(S),value:a.data(F),text:a.data(Y),selected:!0})},_deselect:function(a,e){var b=this,c=b._original,d=b._utype;b._setActive(a),b._unsetSelected(a),d==u?c.find("option:eq("+a.data(E)+")").removeAttr(T):d==n&&c.removeAttr(z),e||b.trigger(B,{index:a.data(E),item:a.data(S),value:a.data(F),text:a.data(Y),selected:!1})},enabled:function(){var c,b=this,e=a(b.element),f=b._original,g=[].slice.call(arguments);return g.length>0?(c=!!g[0],c?(e.removeAttr(d).removeClass("sui-listbox-disabled"),f.removeAttr(d)):(e.attr(d,d).addClass("sui-listbox-disabled"),f.attr(d,d)),b._enabled=c,void 0):b._enabled},selected:function(){var d,f,c=this,g=a(c.element),b=[].slice.call(arguments);if(!(b.length>0)){var h=[];return g.find(".sui-listbox-item-selected").each(function(){h.push(a(this).data(E))}),h}d=Ia(b[0]),f=e(b[1])?!!b[1]:!0,g.find(".sui-listbox-item").each(function(b){X(b,d)>-1&&(f?c._select(a(this),!0):c._deselect(a(this),!0))})},selectedItems:function(){var b=[];return a(this.element).find(".sui-listbox-item-selected").each(function(){b.push(a(this).data(S))}),b},values:function(){var c,b=this,d=a(b.element),e=[].slice.call(arguments);if(!(e.length>0)){var f=[];return d.find(".sui-listbox-item-selected").each(function(){f.push(a(this).data(F))}),f}c=Ia(e[0]),d.find(".sui-listbox-item").each(function(){return X(a(this).data(F),c)>-1?(b._select(a(this),!0),b.options.multiple?!0:!1):void 0})},texts:function(){var b=[];return a(this.element).find(".sui-listbox-item-selected").each(function(){b.push(a(this).data(Y))}),b},clearSelection:function(){var b=this,c=b._original,e=b.options.multiple,d=b._utype;d==u?c.find("option").removeAttr(T):d==n&&c.removeAttr(z),a(b.element).find(".sui-listbox-item-selected").each(function(){a(this).removeClass("sui-listbox-item-selected sui-listbox-item-active"),e?a(this).attr(G,t):a(this).removeAttr(G)})},destroy:function(){var b=this,c=b._eventNS;b._dsLoadedOnce=!1,a(b.element).off(c).remove(),b.dataSource&&b.dataSource.off(k+c),b._isWrapped&&b._original.unwrap(),b._original.show(),h.fn.destroy.call(b)}}),K.defaults=Va,g.ui.plugin("ListBox",K),Ra={enabled:!0,cls:c,autoComplete:c,value:c,events:{}},qa=h.extend({init:function(){h.fn.init.apply(this,arguments);var c=this,f=c.options,g=f.autoComplete,i=f.cls,j=f.value,d=a(c.element);c._eventNS=".shieldTextBox"+c.getInstanceId(),d.addClass("sui-input"),g&&(c.autoComplete=new R(d,g)),i&&d.addClass(i),d.on(r+c._eventNS,b(c._focus,c)).on(s+c._eventNS,b(c._blur,c)),d.attr(m,U),C(d)==ra&&d.attr(ba,o),c.enabled(f.enabled),e(j)&&c.value(j)},focus:function(){a(this.element).focus(),L(a(this.element))},_focus:function(c){var a=this;a.oldValue=a._value(),a.interval=setInterval(b(a._detectChanges,a),1),a.trigger(r)},_blur:function(a){clearInterval(this.interval),this.trigger(s)},_detectChanges:function(){var b,a=this;a._enabled&&a.oldValue!==a._value()&&(b=a.trigger(k,{value:a._value(),old:a.oldValue}),b.isDefaultPrevented()?a._value(a.oldValue):a.oldValue=a._value())},_value:function(){return this.element.val.apply(this.element,arguments)},value:function(){return this._value.apply(this,arguments)},enabled:function(){var b,c=this,e=a(c.element),f=[].slice.call(arguments);return f.length>0?(b=!!f[0],b?e.removeAttr(d).removeClass("sui-input-disabled"):e.attr(d,d).addClass("sui-input-disabled"),c._enabled=b,void 0):c._enabled},destroy:function(){var a=this,b=a.autoComplete,c=a.options.cls;clearInterval(a.interval),a.element.off(a._eventNS).removeClass("sui-input"+(c?" "+c:"")),b&&b.destroy(),h.fn.destroy.call(a)}}),qa.defaults=Ra,g.ui.plugin("TextBox",qa),Ta={dataSource:c,valueTemplate:"{0}",textTemplate:"{0}",open:!1,delay:200,minLength:2,dropDownWidth:c,appendListBoxTo:"body",animation:{enabled:!0,openDelay:200,closeDelay:100},events:{}},R=h.extend({init:function(){h.fn.init.apply(this,arguments);var c=this,d=a(c.element),e=c.options,f=e.dataSource,g=e.dieOnError,i=e.appendListBoxTo;return c.pending=0,c.oldValue=d.val(),f?(f.filter||(f.filter={and:[{path:"",filter:"contains",value:""}]}),c._eventNS=".shieldAutoComplete"+c.getInstanceId(),d.addClass("sui-input"),c.listElement=a("<span/>").appendTo(a(i)),c.listBox=new K(c.listElement,{cls:"sui-autocomplete",dataSource:f,readDataSource:!1,textTemplate:e.textTemplate,multiple:!1,width:e.dropDownWidth||d.innerWidth(),events:{select:function(a){c._value(y.call(c,e.valueTemplate,a.item)),c.trigger(B,{item:a.item})},itemclick:function(a){d.focus(),c._inputBlur(a,0)},blur:function(a){c._inputBlur(a,0)}}}),c.listBox.element.hide(),c.dataSource=c.listBox.dataSource,d.on(w+c._eventNS,b(c._inputKeydown,c)).on(s+c._eventNS,b(c._inputBlur,c,100)),d.attr(va,"list").attr(da,c.listBox.element.attr(j)).attr(ca,c.listBox.element.attr(m)),d.attr(m,U),C(d)==ra&&d.attr(ba,o),c.listBox.dataSource.on(k+c._eventNS,b(c._dsChange,c)),a(H).on(V+c._eventNS,b(c._position,c)),c._open=!1,void(e.open&&c._searchTimeout())):(c.destroy(),void x("shieldAutoComplete: No dataSource set",g))},_checkValueUpdated:function(){var a=this,c=a.element,b=c.val();a.oldValue!==b&&(a.trigger(k,{value:a._value()}),a.oldValue=b)},_restoreOldValue:function(){this._value(this.oldValue)},_inputKeydown:function(b){var a=this;switch(b.keyCode){case f.TAB:break;case f.UP:case f.DOWN:a._inputUpDown(b);break;case f.ENTER:b.preventDefault(),a.cancelSearch=!0,a._hideItemList(),a._checkValueUpdated();break;case f.ESC:b.preventDefault(),a.cancelSearch=!0,a._hideItemList(),a._restoreOldValue();break;default:a._searchTimeout(b)}},_inputUpDown:function(c){var b=this;b._open?b._hasData()&&a(b.listBox.element).trigger(c):b._hasData()&&b._showItemList()},_inputBlur:function(d,c){var b=this;setTimeout(function(){a(b.listBox.element).is(":focus")||(b._hideItemList(),b._checkValueUpdated())},c)},_searchTimeout:function(b){var a=this;clearTimeout(a.searchTimeout),a.searchTimeout=setTimeout(function(){a.term!==a._value()&&(a.trigger("search",{value:a._value()}),a._search())},a.options.delay)},_search:function(){var b=this;return b.term=b._value(),b.term.length<b.options.minLength?void b._hideItemList():(b.cancelSearch=!1,b.pending++,a(b.element).addClass("sui-autocomplete-loading"),P(b.listBox.dataSource.filter,b.term),void b.listBox.dataSource.read())},_dsChange:function(){var b=this;b.pending--,b.pending||a(b.element).removeClass("sui-autocomplete-loading"),!b.cancelSearch&&b._hasData()?b._showItemList():b._hideItemList()},_hasData:function(){var a=this.listBox.dataSource.view;return a&&a.length>0},_position:function(){var b=this,c=a(b.element),d=a(b.listBox.element);d.width(b.options.dropDownWidth||c.innerWidth()),Qa.Set(d,c,{source:"left top",target:"left bottom",overflow:"none"})},_showItemList:function(){var c=this,d=c.listBox,e=a(d.element),f=c.options.animation;e.css({top:0,left:0}),e.show(),c._position(),!c._open&&f&&f.enabled?e.hide().slideDown(f.openDelay,b(d.ensureActiveViewableINTERNAL,d)):d.ensureActiveViewableINTERNAL(),c._open=!0},_hideItemList:function(){var b=this,d=a(b.listBox.element),c=b.options.animation;c&&c.enabled?d.slideUp(c.closeDelay):d.hide(),b._open=!1},_value:function(){return this.element.val.apply(this.element,arguments)},hide:function(){a(this.listBox.element).hide()},show:function(){a(this.listBox.element).show()},isVisible:function(){return a(this.listBox.element).is(":visible")},destroy:function(){var b=this;b.dataSource=null,b.listBox&&(b.listBox.dataSource.off(k+b._eventNS),b.listBox.destroy(),b.listBox=null),b.element.off(b._eventNS).removeClass("sui-input"),a(H).off(V+b._eventNS),b.listElement&&b.listElement.remove(),h.fn.destroy.call(b)}}),R.defaults=Ta,g.ui.plugin("AutoComplete",R),Pa={enabled:!0,cls:"",min:0,max:100,value:c,step:c,editable:!0,spinners:!0,valueTemplate:c,textTemplate:c,labels:{increase:"Increase value",decrease:"Decrease value"},events:{}},pa=h.extend({init:function(){h.fn.init.apply(this,arguments);var j,p,k,f,v,u,q,o,c=this,d=c.options,t=d.cls,i=d.value,g=d.step,E=d.editable,z=d.spinners,A=d.labels,B=A.increase,D=A.decrease,y=d.dieOnError;return c._original=j=a(c.element),C(j)!=n?void x("shieldNumericTextBox: Underlying element is not INPUT",y):(e(g)?d.step=g=ja(g):(q=Wa(e(i)?i:c._value()),q>0?d.step=g=1/$a(10,q):d.step=g=1),g?(c._eventNS=".shieldNumericTextBox"+c.getInstanceId(),c.element=k=j.wrap("<span/>").parent(),j.hide(),e(i)||(i=c._value()),E?(f=a('<input type="text" class="sui-input" />'),p=j.attr(Q),e(p)&&f.attr(Q,p)):f=a('<span class="sui-input">&nbsp;</span>').attr(l,"0"),c.textElement=f,f.appendTo(k),f.on(r+c._eventNS,b(c._focus,c)).on(s+c._eventNS,b(c._blur,c)),z&&(c._onSpinUpMDProxy=b(c._spinUpMD,c),c._onSpinDownMDProxy=b(c._spinDownMD,c),c._onSpinnerMUProxy=b(c._spinnerMU,c),c.spinUp=v=a('<span class="sui-spinner sui-spinner-up sui-unselectable"/>').html('<span class="sui-caret-up sui-unselectable" unselectable="on"/>').attr(N,Z).attr(Fa,B).attr(Ha,B).on(Sa+c._eventNS,c._onSpinUpMDProxy).on(Ua+c._eventNS,c._onSpinnerMUProxy).on(ta+c._eventNS,c._onSpinnerMUProxy).on(O+c._eventNS,function(){return!1}),c.spinDown=u=a('<span class="sui-spinner sui-spinner-down sui-unselectable"/>').html('<span class="sui-caret-down sui-unselectable" unselectable="on"/>').attr(N,Z).attr(Fa,D).attr(Ha,D).on(Sa+c._eventNS,c._onSpinDownMDProxy).on(Ua+c._eventNS,c._onSpinnerMUProxy).on(ta+c._eventNS,c._onSpinnerMUProxy).on(O+c._eventNS,function(){return!1}),k.append(a('<span class="sui-spinners"/>').append(v,u))),f.on(w+c._eventNS,b(c._keydown,c)),k.addClass("sui-numeric-textbox"+(z?"":" sui-numeric-textbox-nosp")+(t?" "+t:"")),o=Wa(g),e(d.textTemplate)||(d.textTemplate="{0:n"+o+"}"),e(d.valueTemplate)||(d.valueTemplate="{0:n"+o+"}"),k.attr(m,"spinbutton").attr(fb,d.min).attr(ib,d.max),c.enabled(d.enabled),e(i)&&c.value(i),void(c._destroyed=!1)):void x("shieldNumericTextBox: Invalid step",y))},refresh:function(a){this.refreshWithElement(this._original,a)},_focus:function(c){var b=this;b._hasFocus||(b._hasFocus=!0,a(b.element).addClass("sui-numeric-textbox-focus"),b.value(b.value()),b.trigger(r))},_blur:function(g){var b=this,d=a(b.element),e=a(b.textElement);if(b.options.editable){var c,f=b.value();b._updateIfDirty(),c=b.value(),c!==f&&b.trigger(k,{value:c})}setTimeout(function(){if(!(d.is(":focus")||e.is(":focus")||b._destroyed)){if(b._hasFocus=!1,d.removeClass("sui-numeric-textbox-focus"),b.options.editable){var a,c=b.value();b.value(e.val()),a=b.value(),a!==c&&b.trigger(k,{value:a})}else b.value(b.value());b.trigger(s)}},100)},_keydown:function(c){var b=this,a=c.keyCode,d=b._enabled;switch(a){case f.TAB:case f.LEFT:case f.RIGHT:break;case f.END:b._updateValue("max",!1),c.preventDefault();break;case f.HOME:b._updateValue("min",!1),c.preventDefault();break;case f.ESC:d&&b.value(b.value()),c.preventDefault();break;case f.UP:b._updateValue("inc",!1),c.preventDefault();break;case f.DOWN:b._updateValue("dec",!1),c.preventDefault();break;default:b.options.editable&&d&&(a>=48&&57>=a||a>=96&&105>=a||190==a||110==a||173==a||109==a||189==a||a==f.DEL||a==f.BACK||a==f.ENTER||c.ctrlKey&&(118==a||86==a))?b._dirty=!0:c.preventDefault()}},_spinUpMD:function(c){var a=this;c.preventDefault(),a._updateValue("inc",!1),a._spinUpCancel=!1,setTimeout(function(){a._spinUpInt||a._spinUpCancel||(a._spinUpInt=setInterval(b(a._updateValue,a,"inc",!1),20))},100)},_spinDownMD:function(c){var a=this;c.preventDefault(),a._updateValue("dec",!1),a._spinDownCancel=!1,setTimeout(function(){a._spinDownInt||a._spinDownCancel||(a._spinDownInt=setInterval(b(a._updateValue,a,"dec",!1),20))},100)},_spinnerMU:function(b){var a=this;a._spinUpCancel=a._spinDownCancel=!0,clearInterval(a._spinUpInt),clearInterval(a._spinDownInt),a._spinUpInt=a._spinDownInt=null},_updateIfDirty:function(){var b=this,c=a(b.textElement);b._dirty&&(b.value(c.val()),b._dirty=!1)},_updateValue:function(f,h,g){var c,b=this,i=b.options,j=i.min,l=i.max,m=i.step,n=a(b.textElement),d=!1;b._enabled&&(b._updateIfDirty(),c=b.value(),e(c)||(c=0),h=e(h)?!!h:!0,g=e(g)?!!g:!0,"inc"==f?l>c&&(b.value(c+m),d=!0):"dec"==f?c>j&&(b.value(c-m),d=!0):"min"==f?(b.value(j),d=!0):"max"==f&&(b.value(l),d=!0),g&&(n.focus(),i.editable&&L(n)),d&&!h&&b.trigger(k,{value:b.value()}))},increment:function(){this._updateValue("inc",!0,!1)},decrement:function(){this._updateValue("dec",!0,!1)},value:function(){var b,d,c=this,f=c.options,g=[].slice.call(arguments),h=c.element,i=a(c.textElement);return g.length>0?(e(g[0])&&null!==g[0]&&""!==g[0]?(b=_a(bb(g[0],f.max),f.min),b=y.call(c,f.valueTemplate,b),b=ja(b),d=y.call(c,f.textTemplate,b)+""):(b=null,d=""),f.editable?c._hasFocus&&c._enabled?i.val(b):i.val(d):i.html(d),c._value(b),null!==b?h.attr(Ba,b):h.removeAttr(Ba),h.attr(Za,aa(d)),void 0):ja(c._value())},_value:function(){return this._original.attr.apply(this._original,[z].concat([].slice.call(arguments)))},enabled:function(){var b,c=this,e=a(c.element),f=[].slice.call(arguments);return f.length>0?(b=!!f[0],b?e.removeAttr(d).removeClass("sui-numeric-textbox-disabled"):e.attr(d,d).addClass("sui-numeric-textbox-disabled"),c._enabled=b,void 0):c._enabled},focus:function(){a(this.textElement).focus(),L(a(this.textElement))},destroy:function(){var b=this;b._destroyed=!0,b.options.spinners&&(a(b.spinUp).off(b._eventNS).remove(),a(b.spinDown).off(b._eventNS).remove(),b.spinUp=b.spinDown=null),a(b.textElement).off(b._eventNS).remove(),b.textElement=null,b._original.unwrap().show(),b._original=null,h.fn.destroy.call(b)}}),pa.defaults=Pa,g.ui.plugin("NumericTextBox",pa),Na={enabled:!0,mask:"00-00-0000",promptChar:"_",value:"",rules:{0:function(a){return/^[0-9]$/.test(a)},9:function(a){return/^[0-9 ]$/.test(a)},"#":function(a){return/^[0-9 \+\-]$/.test(a)},L:function(a){return/^[a-zA-Z]$/.test(a)},"?":function(a){return/^[a-zA-Z ]$/.test(a)},"&":function(a){return/^[\S]$/.test(a)},C:function(a){return/^[.]$/.test(a)},A:function(a){return/^[0-9a-zA-Z]$/.test(a)},a:function(a){return/^[0-9a-zA-Z ]$/.test(a)}},cultureSpecific:[".",",","$"],separators:["/","-"," ","(",")"],cls:c,events:{}},oa=h.extend({init:function(){h.fn.init.apply(this,arguments);var c=this,d=c.options,g=d.dieOnError,i=d.value,f=a(c.element);return C(f)!=n?void x("shieldMaskedTextBox: Underlying element is not INPUT",g):c._verifyMask()?(c._eventNS=".shieldMaskedTextBox"+c.getInstanceId(),f.addClass("sui-input"),d.cls&&f.addClass(d.cls),e(i)&&c.value(i),f.on(r+c._eventNS,b(c._focus,c)).on(s+c._eventNS,b(c._blur,c)).on(w+c._eventNS,b(c._keydown,c)).on(lb+c._eventNS,b(c._keypress,c)).on(Xa+c._eventNS,b(c._cut,c)).on(Ya+c._eventNS,b(c._paste,c)).on(ga+c._eventNS,b(c._dragstart,c)).on(xa+c._eventNS,b(c._dragenter,c)).on(sa+c._eventNS,b(c._dragover,c)).on(za+c._eventNS,b(c._drop,c)),f.attr(m,U),void c.enabled(d.enabled)):void x("shieldMaskedTextBox: Invalid mask",g)},_getMask:function(){var a,b,c=this,d=c.options.mask,e="";for(b=0;b<d.length;b++)a=d.charAt(b),e+=c._isCultureSpecific(a)?c._getCultureSpecific(a):a;return e},_isCultureSpecific:function(a){return-1!==X(a,this.options.cultureSpecific)},_getCultureSpecific:function(a){var b=g.getCurrencyInfo();return"$"==a?b.symbol:b[a]},_skipSymbol:function(a){var b=this,c=b.options.separators;return-1!==X(a,c)||b._isCultureSpecific(a)},_insertAt:function(a,c,b){return a.substr(0,b)+c+a.substr(b)},_removeAt:function(a,b){return a.substr(0,b)+a.substr(b+1)},_caret:function(c,d){var e,f=this,b=a(f.element);if(0!==b.length&&!b.is(":hidden"))return"number"==typeof c?(d="number"==typeof d?d:c,b.each(function(){b.setSelectionRange?b.setSelectionRange(c,d):b.createTextRange&&(e=b.createTextRange(),e.collapse(!0),e.moveEnd("character",d),e.moveStart("character",c),e.select())})):(b[0].setSelectionRange?(c=b[0].selectionStart,d=b[0].selectionEnd):M.selection&&M.selection.createRange&&(e=M.selection.createRange(),c=0-e.duplicate().moveStart("character",-1e5),d=c+e.text.length),{begin:c,end:d})},_caretTo:function(e){var f=this,b=a(f.element);if(b.prop("selectionStart")!==c)b.prop("selectionStart",e),b.prop("selectionEnd",e);else if(M.selection){b.focus();var d=M.selection.createRange();d.moveStart("character",-f.value().length),d.moveEnd("character",-f.value().length),d.moveStart("character",e),d.select()}},_isValid:function(f,c){var a,b=this,d=b._getMask(),e=b.options.rules;return c>=d.length?!1:(a=d.charAt(c),ea(e[a])&&e[a].call(b,f))},_removeRegion:function(i){var f,d,a=this,j=a.options,e=a._getMask(),b=a._value(),g=a._caret(),h=j.promptChar,c=g.begin;if(c==g.end)i?(f=e.charAt(--c),a._skipSymbol(f)||(c>=0?(b=a._removeAt(b,c),b=a._insertAt(b,h,c),a._value(b)):c=0)):c<b.length&&(f=e.charAt(c),a._skipSymbol(f)?c++:(b=a._shiftLeft(b,c),a._value(b)));else{for(d=c;d<g.end;d++)a._skipSymbol(e.charAt(d))||(b=a._removeAt(b,d),b=a._insertAt(b,h,d));for(;a._skipSymbol(e.charAt(c));)++c;for(d=c;d<g.end;d++)a._skipSymbol(e.charAt(d))||(b=a._shiftLeft(b,c));a._value(b)}a._caretTo(c)},_shiftLeft:function(a,h){for(var e,f,d,b=this,i=b.options,j=b._getMask(),g=i.promptChar,c=h;c<a.length-1;){for(d=c+1;b._skipSymbol(j.charAt(d));)d++;if(d>a.length-1)break;e=a.charAt(d),a=b._removeAt(a,c),f=b._isValid(e,c),a=b._insertAt(a,f?e:g,c),c=d}return a=b._removeAt(a,c),a=b._insertAt(a,g,c)},_shiftRightKey:function(a,f){var e,d,j,c=this,m=c.options,k=c._getMask(),l=a.charAt(f),g=m.promptChar;if(l!=g&&f<a.length-1){for(var h=f+1,i=a.charAt(h);i!=g&&h<=a.length;)i=a.charAt(++h);if(i==g)for(var b=h;b>f;){if(!c._skipSymbol(k.charAt(b))){for(d=b-1,e=a.charAt(d);c._skipSymbol(k.charAt(d));)e=a.charAt(--d);a=c._removeAt(a,b),j=c._isValid(e,b),a=c._insertAt(a,j?e:g,b)}b--}}return a},_shiftRightPaste:function(a,h){var f,d,b,g,c=this,i=c.options,j=c._getMask(),k=i.promptChar,e=h;for(d=a.charAt(e);e<a.length-1;){for(b=e+1;c._skipSymbol(j.charAt(b));)b++;if(b>a.length-1)break;f=a.charAt(b),a=c._removeAt(a,b),g=c._isValid(d,b),a=c._insertAt(a,g?d:k,b),d=f,e=b}return a},_commit:function(e){for(var c,a=this,f=a._getMask(),d=a._caret(),b=d.begin;a._skipSymbol(f.charAt(b));)++b;if(a._isValid(e,b)){for(d.end>d.begin&&a._removeRegion(!1),c=a._value(),c=a._shiftRightKey(c,b),c=a._removeAt(c,b),c=a._insertAt(c,e,b),a._value(c),b++;a._skipSymbol(f.charAt(b));)b++;a._caretTo(b)}},_verifyValue:function(c){var d=this,b=d._getMask();if(c.length!=b.length)return!1;for(var a=0;a<b.length;a++)if(d._skipSymbol(b.charAt(a))){if(b.charAt(a)!==c.charAt(a))return!1}else if(!d._isValid(c.charAt(a),a))return!1;return!0},_verifyMask:function(){for(var d,b=this,c=b._getMask(),e=b.options.rules,a=0;a<c.length;a++)if(!b._skipSymbol(c.charAt(a))&&(d=c.charAt(a),!ea(e[d])))return!1;return!0},_applyMask:function(){for(var a=this,e=a.options,c=a._getMask(),f=e.promptChar,d="",b=0;b<c.length;b++)d+=a._skipSymbol(c.charAt(b))?c.charAt(b):f;a._value(d)},_isEmptyMask:function(){for(var a=this,d=a._value(),e=a.options,c=a._getMask(),f=e.promptChar,b=0;b<c.length;b++)if(!a._skipSymbol(c.charAt(b))&&d.charAt(b)!==f)return!1;return!0},_clearMaskOnBlur:function(){this._isEmptyMask()&&this._value("")},_focus:function(d){var c,b=this;a(b.element).addClass("sui-input-focus"),c=b._value(),c&&""!==c||b._applyMask(),b.trigger(r)},_blur:function(a){this._clearMaskOnBlur(),this.trigger(s)},_preventDrag:function(a){if(a.type==ga||a.type==xa||a.type==sa||a.type==za){var b=a.originalEvent.dataTransfer;return a.type==ga?b.effectAllowed="none":b.dropEffect="none",a.stopPropagation&&(a.preventDefault(),a.stopPropagation()),!1}},_triggerChange:function(b){var d,a=this;b!==a._value()&&(d=a.trigger(k,{value:a._value(),old:b}),d.isDefaultPrevented()&&a._value(a.oldValue)),clearInterval(a.changeInterval),a.changeInterval=c},_dragstart:function(a){return this._preventDrag(a)},_dragenter:function(a){return this._preventDrag(a)},_dragover:function(a){return this._preventDrag(a)},_drop:function(a){return this._preventDrag(a)},_keydown:function(e){var a=this,d=e.keyCode,h=a._enabled,g=a._value();switch(h||e.preventDefault(),d){case f.BACK:case f.DEL:a._removeRegion(d==f.BACK),a.changeInterval===c&&(a.changeInterval=setInterval(b(a._triggerChange,a,g),20)),e.preventDefault();break;default:if(e.ctrlKey)switch(d){case 118:case 86:case 122:case 90:case 121:case 89:118==d||86==d?a._paste(e):(122==d||90==d)&&(a._undo(),a.changeInterval===c&&(a.changeInterval=setInterval(b(a._triggerChange,a,g),20))),e.preventDefault()}}},_keypress:function(d){var e,a=this,h=d.keyCode,i=d.which,g=(a._enabled,a._value());if(!d.ctrlKey){switch(h){case f.HOME:case f.END:case f.LEFT:case f.RIGHT:case f.TAB:if(!J.ie)return;break;default:e=String.fromCharCode(i),a._commit(e)}d.preventDefault(),a.changeInterval===c&&g!=a._value()&&(a.changeInterval=setInterval(b(a._triggerChange,a,g),20))}},_cut:function(e){var a=this,d=a._caret();a.cutInterval===c&&(a.cutInterval=setInterval(b(a._aftercut,a,d),20))},_aftercut:function(g){var e,a=this,f=a._getMask(),b=a.value(),i=b,j=a.options.promptChar,d=g.begin;for(e=d;e<g.end;e++)b=a._insertAt(b,a._skipSymbol(f.charAt(e))?f.charAt(e):j,e);for(a._value(b),a._caretTo(d);a._skipSymbol(f.charAt(d));)++d;for(var h=d;h<g.end;h++)a._skipSymbol(f.charAt(h))||(b=a._shiftLeft(b,d));a._value(b),a._caretTo(d),clearInterval(a.cutInterval),a.cutInterval=c,a._triggerChange(i)},_paste:function(i){var g,j,h,f,a=this,m=a._getMask(),d=a._value(),o=d,l=a._caret(),e=l.begin,k=a.options.promptChar,n=i.originalEvent||i;if(e==d.length)return void i.preventDefault();if(n.clipboardData?g=n.clipboardData.getData("text/plain"):H.clipboardData&&(g=H.clipboardData.getData("Text")),null==g)return void i.preventDefault();if(e==l.end){for(;a._skipSymbol(m.charAt(e));)e++;for(f=g.length-1;f>=0;f--)d=a._shiftRightPaste(d,e),d=a._removeAt(d,e),j=a._isValid(g.charAt(f),e),d=a._insertAt(d,j?g.charAt(f):k,e);e+=g.length}else{for(h=e;h<l.end;h++)a._skipSymbol(m.charAt(h))||(d=a._removeAt(d,h),d=a._insertAt(d,k,h));for(f=0;f<g.length;f++){for(;a._skipSymbol(m.charAt(e));)e++;d=a._removeAt(d,e),j=a._isValid(g.charAt(f),e),d=a._insertAt(d,j?g.charAt(f):k,e),e++}}a._value(d),a._caretTo(e),i.preventDefault(),a.changeInterval===c&&(a.changeInterval=setInterval(b(a._triggerChange,a,o),20))},_undo:function(){var a=this;a._applyMask()},_value:function(){return this.element.val.apply(this.element,arguments)},value:function(){if(arguments.length>0){var a=[].slice.call(arguments);if(!this._verifyValue(a[0]))return!1}return this._value.apply(this,arguments)},enabled:function(){var b,c=this,e=a(c.element),f=[].slice.call(arguments);return f.length>0?(b=!!f[0],b?e.removeAttr(d).removeClass("sui-input-disabled"):e.attr(d,d).addClass("sui-input-disabled"),c._enabled=b,void 0):c._enabled},destroy:function(){var a=this,b=a.options.cls;a.element.off(a._eventNS).removeClass("sui-input"+(b?" "+b:"")),h.fn.destroy.call(a)}}),oa.defaults=Na,g.ui.plugin("MaskedTextBox",oa),na={editable:!0,enabled:!0,open:!1,cls:c,dataSource:c,autoComplete:{enabled:!1,delay:200,minLength:0,filter:c},valueTemplate:c,textTemplate:c,inputTemplate:c,selected:c,value:c,width:c,height:c,dropDownWidth:c,dropDownHeight:200,appendListBoxTo:"body",animation:{enabled:!0,openDelay:200,closeDelay:100},events:{}},I=h.extend({init:function(){h.fn.init.apply(this,arguments);var n,o,y,f,g,D,A,c=this,d=c.options,i=d.editable,E=d.dieOnError,p=d.dataSource,z=d.autoComplete,v=d.selected,F=d.value,G=d.appendListBoxTo;return c._original=n=a(c.element),c._utype=C(n),p||c._utype==u?(c._eventNS=".shieldComboBox"+c.getInstanceId(),c.pending=0,c.element=f=n.wrap("<span/>").parent(),n.hide(),c._onDDHandler=b(c._onDD,c),i?(g=a('<input type="text" class="sui-input"/>').focus(function(){a(this).parent().addClass("sui-combobox-focus")}).blur(function(){a(this).parent().removeClass("sui-combobox-focus"),c._blur()}).attr(m,U).attr(ba,t),y=n.attr(Q),e(y)&&g.attr(Q,y)):g=a('<span class="sui-input sui-unselectable">&nbsp;</span>').attr(N,Z).on(q+c._eventNS,c._onDDHandler).on(O+c._eventNS,function(){return!1}),c.textElement=g,g.appendTo(f),c.ddElement=D=a('<span class="sui-caret-container sui-unselectable"/>').html('<span class="sui-caret sui-unselectable" unselectable="on"/>').attr(N,Z).on(q+c._eventNS,c._onDDHandler).appendTo(f),f.addClass(i?"sui-combobox":"sui-dropdown"),d.cls&&f.addClass(d.cls),o=n.attr(l),i?g.attr(l,e(o)?o:"0"):f.attr(l,e(o)?o:"0"),e(d.width)&&f.css(Ka,d.width),e(d.height)&&(f.css(W,d.height),g.css(W,d.height),D.css(W,d.height)),f.on(w+c._eventNS,b(c._keydown,c)).on(kb+c._eventNS,b(c._keyup,c)),c._focusHandler=b(c._focus,c),i?g.on(r+c._eventNS,c._focusHandler):f.on(r+c._eventNS,c._focusHandler),f.on(s+c._eventNS,b(c._blur,c)),c.listElement=a("<span/>").appendTo(a(G)),z&&(A=e(z.filter)?z.filter:p&&p.filter?p.filter:c._utype==u?{and:[{path:"text",filter:"contains",value:""}]}:{and:[{path:"",filter:"contains",value:""}]}),c.listBox=new K(n,{cls:"sui-autocomplete",dataSource:p,readDataSource:!1,valueTemplate:d.valueTemplate,textTemplate:d.textTemplate,multiple:!1,selected:e(v)&&La(v)?v[0]:v,values:F,width:d.dropDownWidth||f.innerWidth(),maxHeight:d.dropDownHeight,renderToINTERNAL:c.listElement,wrapOriginalINTERNAL:!1,tabindexINTERNAL:J.ie&&J.version<=8?0:-1,filterINTERNAL:A,events:{select:function(a){c._onLBSelChanged(),c.trigger(B,{index:a.index,item:a.item,text:a.text,value:a.value})},itemclick:function(a){i?g.focus():f.focus(),c._hideDD(),c.trigger(Oa,{index:a.index,item:a.item,text:a.text,value:a.value})},blur:function(a){setTimeout(b(c._blur,c),20)}}}),c.listBox.element.hide(),c.dataSource=c.listBox.dataSource,c.listBox.dataSource.on(k+c._eventNS,b(c._dsChange,c)),d.textTemplate=c.listBox.options.textTemplate,d.valueTemplate=c.listBox.options.valueTemplate,
f.attr(m,"combobox"),i&&(g.attr(va,"list"),g.attr(da,c.listBox.element.attr(j)),g.attr(ca,c.listBox.element.attr(m))),c.listBox.dataSource.read(),a(H).on(V+c._eventNS,b(c._position,c)),c.enabled(d.enabled),c._open=!1,d.enabled&&d.open&&c._showDD(!0),void(c._destroyed=!1)):(c.destroy(),void x((i?"shieldComboBox":"shieldDropDown")+": No dataSource or underlying SELECT element found.",E))},refresh:function(a){this.refreshWithElement(this._original,a)},focus:function(){var b=this;b.options.editable?(a(b.textElement).focus(),L(a(b.textElement))):a(b.element).focus()},_focus:function(b){var a=this;a._hasFocus||(a._hasFocus=!0,a._oldValue=a.value(),a.trigger(r))},_blur:function(c){var b=this;setTimeout(function(){b._destroyed||null==b.listBox||a(b.listBox.element).is(":focus")||a(b.element).is(":focus")||a(b.textElement).is(":focus")||(b._hideDD(),b._oldValue!==b.value()&&b.trigger(k),b.trigger(s),b._hasFocus=!1)},100)},_keydown:function(a){var b=this;switch(a.keyCode){case f.TAB:break;case f.UP:case f.DOWN:b._keydownUpDown(a),a.preventDefault();break;case f.ESC:case f.ENTER:a.preventDefault(),b.cancelSearch=!0,b._hideDD();break;default:b._keydownDefault(a)}},_keyup:function(d){var b=this,c=d.keyCode;b.options.editable&&b._utype==n&&c!=f.UP&&c!=f.DOWN&&c!=f.ENTER&&c!=f.TAB&&a(b._original).attr(z,a(b.textElement).val())},_keydownUpDown:function(b){this._enabled&&a(this.listBox.element).trigger(b)},_keydownDefault:function(b){var a=this;a.listBox.clearSelection(),a._searchTimeout(b)},_searchTimeout:function(d){var b=this,c=b.options.autoComplete;c&&c.enabled&&(clearTimeout(b.searchTimeout),b.searchTimeout=setTimeout(function(){b.term!==a(b.textElement).val()&&b._search()},c.delay))},_search:function(){var b=this;b.listBox.dataSource;return b.term=a(b.textElement).val(),b.term.length<b.options.autoComplete.minLength?void b._hideDD():(b.cancelSearch=!1,b.pending++,a(b.textElement).addClass("sui-autocomplete-loading"),P(b.listBox.dataSource.filter,b.term),void b.listBox.dataSource.read())},_dsChange:function(){var b=this,d=b._original,e=b._utype,c=b.textElement.val();return b._dsLoaded?(b.pending--,b.pending||a(b.textElement).removeClass("sui-autocomplete-loading"),!b.cancelSearch&&b._hasData()?b._showDD(!0):b._hideDD(),e==u?d.val(c):e==n&&d.attr(z,c),void b.trigger(B,{index:-1,item:c})):(b._dsLoaded=!0,!b.options.editable&&b.listBox.selected().length<=0&&b.listBox.selected(0),void b._onLBSelChanged())},_hasData:function(){var a=this.listBox.dataSource.view;return a&&a.length>0},_onLBSelChanged:function(){var i,f,d,a=this,b=a.options,g=b.editable,h=a.listBox,c=h.selectedItems();c&&c.length>0?(i=y.call(a,b.valueTemplate,c[0]),f=y.call(a,b.textTemplate,c[0]),d=e(b.inputTemplate)?y.call(a,b.inputTemplate,c[0]):f,g?(a.textElement.val(d),a.textElement.attr($,h.element.attr($))):a.textElement.html(d)):g?(a.textElement.val(""),a.textElement.removeAttr($)):a.textElement.html("&nbsp;")},_onDD:function(c){var a=this,b=a.textElement;a.options.editable?(b.focus(),L(b)):a.element.focus(),a._open?a._hideDD():a._hasData()&&a._showDD(!1)},_position:function(){var b=this,c=a(b.element),d=a(b.listBox.element);d.width(b.options.dropDownWidth||c.innerWidth()),Qa.Set(d,c,{source:"left top",target:"left bottom",overflow:"none"})},_showDD:function(g){var c=this,d=c.listBox,e=a(d.element),f=c.options.animation;c._enabled&&(e.css({top:0,left:0}),e.show(),c._position(),!g&&f&&f.enabled?e.hide().slideDown(f.openDelay,b(d.ensureActiveViewableINTERNAL,d)):d.ensureActiveViewableINTERNAL(),c._open=!0,a(c.element).attr(Da,o))},_hideDD:function(){var b=this,d=a(b.listBox.element),c=b.options.animation;c&&c.enabled?d.slideUp(c.closeDelay):d.hide(),b._open=!1,a(b.element).attr(Da,t)},enabled:function(){var c,b=this,e=b.options.editable,f=a(b.element),g=b.textElement,h=b.ddElement,i=b._original,j=[].slice.call(arguments);return j.length>0?(c=!!j[0],c?(f.removeAttr(d).removeClass(e?"sui-combobox-disabled":"sui-dropdown-disabled"),g.removeAttr(d),h.removeAttr(d),i.removeAttr(d)):(b._open&&b._hideDD(),f.attr(d,d).addClass(e?"sui-combobox-disabled":"sui-dropdown-disabled"),g.attr(d,d),h.attr(d,d),i.attr(d,d)),b._enabled=c,void 0):b._enabled},selected:function(){var a,c=this,b=c.listBox,d=[].slice.call(arguments);return d.length>0?(a=d[0],b.clearSelection(),e(a)&&(a=ab(a),a>-1?b.selected(a):c.options.editable||b.selected(0)),c._onLBSelChanged(),void 0):(a=b.selected(),a&&a.length>0?a[0]:-1)},selectedItem:function(){var b=this,a=b.listBox.selectedItems();return a&&a.length>0?a[0]:null},value:function(){var b,c=this,d=c.listBox,e=[].slice.call(arguments);return e.length>0?(d.clearSelection(),d.values(e[0]),c._onLBSelChanged(),void 0):(b=d.values(),b&&b.length>0?b[0]:c.options.editable?a(c.textElement).val():null)},text:function(){var b=this,c=b.listBox.texts();return c&&c.length>0?c[0]:b.options.editable?a(b.textElement).val():null},destroy:function(){var b=this,e=a(b.element),c=a(b.textElement),d=a(b.ddElement);b._destroyed||(b._destroyed=!0,b._dsLoaded=!1,c.off(b._eventNS),d.off(b._eventNS),b._onDDHandler=null,a(H).off(V+b._eventNS),e.off(b._eventNS),b.dataSource=null,b.listBox&&(b.listBox.dataSource.off(k+b._eventNS),b.listBox.destroy(),b.listBox=null),a(b.listElement).remove(),c.remove(),d.remove(),b._original.unwrap().show(),b._original=null,h.fn.destroy.call(b))}}),I.defaults=na,g.ui.plugin("ComboBox",I),Ja=ha({},na,{editable:!1,autoComplete:c}),ma=I.extend({init:function(b,a){a&&(a.editable=!1,a.autoComplete=c),I.prototype.init.call(this,b,a)}}),ma.defaults=Ja,g.ui.plugin("DropDown",ma),la={enabled:!0,cls:c,toggle:!1,checked:!1,events:{}},v=h.extend({init:function(){h.fn.init.apply(this,arguments);var c=this,d=a(c.element),e=c.options,f=e.cls;c._eventNS=".shieldButton"+c.getInstanceId(),d.addClass("sui-button"),f&&d.addClass(f),d.on(q+c._eventNS,b(c._click,c)),d.attr(m,db),c.enabled(e.enabled),e.toggle&&(c._checked=!!e.checked,c._checked?d.addClass("sui-button-checked"):d.removeClass("sui-button-checked"),d.attr(i+"-pressed",c._checked?o:t))},_click:function(d){var b=this,c=a(b.element);b._enabled&&(b.options.toggle&&(b._checked=!b._checked,b._checked?c.addClass("sui-button-checked"):c.removeClass("sui-button-checked"),c.attr(i+"-pressed",b._checked?o:t)),b.trigger(q,d))},checked:function(){var b=this,c=a(b.element),d=[].slice.call(arguments);return d.length>0?void(b.options.toggle&&(b._checked=!!d[0],b._checked?c.addClass("sui-button-checked"):c.removeClass("sui-button-checked"),c.attr(i+"-pressed",b._checked?o:t))):b._checked},enabled:function(){var b,c=this,e=a(c.element),f=[].slice.call(arguments);return f.length>0?(b=!!f[0],b?e.removeAttr(d).removeClass("sui-button-disabled").removeAttr(Ma):e.attr(d,d).addClass("sui-button-disabled").attr(Ma,o),c._enabled=b,void 0):c._enabled},destroy:function(){var a=this,b=a.options.cls;a.element.off(q+a._eventNS).removeClass("sui-button sui-button-checked sui-button-disabled"+(b?" "+b:"")),h.fn.destroy.call(a)}}),v.defaults=la,g.ui.plugin("Button",v),Ga=ha({},la,{menu:c,dataSource:c,events:{}}),ka=v.extend({init:function(){if(v.fn.init.apply(this,arguments),g.ui.ContextMenu){var c=this,d=a(c.element),f=c.options,h=f.menu,i=f.cls;c._handle=a('<button type="button"><span class="sui-caret-down"/></button>'),d.after(c._handle),c._handleButton=new v(c._handle,{cls:"sui-button-split-handle"+(i?" "+i:""),events:{click:function(e){if(c.menu.visible())c.menu.visible(!1);else{var b=a(d).offset();c.menu.visible(!0,{x:b.left,y:b.top+a(d).outerHeight()})}}}}),e(h)?c._menuElement=a(h):(c._menuElement=a("<ul/>"),c._customMenuElement=!0,c._handle.after(c._menuElement)),c._menuElement.attr(j)||c._menuElement.attr(j,D()),c.menu=new g.ui.ContextMenu(c._menuElement,{cls:"sui-button-split-menu",dataSource:f.dataSource,minWidth:d.outerWidth()+c._handle.outerWidth()-2,events:{click:b(c.trigger,c,"menuClick")}}),a(c._handle).attr(ca,o).attr(da,c._menuElement.attr(j))}},enabled:function(){var a=this;return arguments&&arguments.length>0?(v.fn.enabled.apply(a,arguments),a._handleButton&&a._handleButton.enabled.apply(a._handleButton,arguments),a.menu&&!arguments[0]&&a.menu.visible(!1),void 0):v.fn.enabled.apply(a,arguments)},visible:function(){var a=this;return arguments&&arguments.length>0?(v.fn.visible.apply(a,arguments),a._handleButton&&a._handleButton.visible.apply(a._handleButton,arguments),a.menu&&!arguments[0]&&a.menu.visible(!1),void 0):v.fn.visible.apply(a,arguments)},destroy:function(){var b=this;b.menu&&(b.menu.destroy(),b.menu=c),b._menuElement&&(b._customMenuElement&&(a(b._menuElement).remove(),b._customMenuElement=c),b._menuElement=c),b._handleButton&&(b._handleButton.destroy(),b._handleButton=c),b._handle&&(a(b._handle).remove(),b._handle=c),v.fn.destroy.call(b)}}),ka.defaults=Ga,g.ui.plugin("SplitButton",ka),Ea={enabled:!0,enableThreeStates:!1,enableLabelClick:!0,checked:!1,label:"",events:{}},_=h.extend({init:function(){var f,d,n,g,k,c=this;h.fn.init.apply(this,arguments),c._eventNS=".shieldCheckBox"+c.getInstanceId(),f=c.options;var i=a(c.element).addClass("sui-checkbox-input");k=i.attr(j),k||i.attr(j,k=D()),n=i.attr(l),g=c.wrapper=i.wrap('<span class="sui-checkbox"/>').parent().attr(l,e(n)?n:0);var o=a('<span class="sui-checkbox-element sui-checkbox-unchecked"/>');if(o.appendTo(g),c.checkBoxElement=o,a('<span class="sui-checkmark"/>').appendTo(o),f.label?(d=a('<label class="sui-checkbox-label"/>'),d.appendTo(g),d.attr("for",k),d.get(0).innerHTML=f.label,f.enableLabelClick&&d.addClass("sui-checkbox-label-hover")):(d=i.parent().parent(),d&&!d.is("label")&&(d=a('label[for="'+k+'"]')),d&&f.enableLabelClick&&d.addClass("sui-checkbox-label-hover")),g.attr(m,"checkbox"),d){var r=d.attr(j);r||d.attr(j,r=D()),g.attr(ya,r)}i.attr(p)&&(f.checked=!0),c.enabled(f.enabled),c.checked(f.checked),g.on(q+c._eventNS,b(c._click,c)).on(w+c._eventNS,b(c._keydown,c)),d&&f.enableLabelClick&&d.on(q+c._eventNS,b(c._click,c)).on(w+c._eventNS,b(c._keydown,c)),g.onselectstart=function(){return!1},g.onmousedown=function(){return!1}},_click:function(c){var b=this;a(b.element);b._enabled&&(b._checked?b.options.enableThreeStates?b._checked=null:b._checked=!1:b._checked===!1?b._checked=!0:null===b._checked&&(b._checked=!1),b.checked(b._checked),b.trigger(q,c),c.preventDefault(),c.stopPropagation())},_keydown:function(a){a.keyCode==f.SPACE&&this._click(a)},hide:function(){a(this.wrapper).hide()},show:function(){a(this.wrapper).show()},isVisible:function(){return a(this.wrapper).is(":visible")},checked:function(){var e,d=this,g=[].slice.call(arguments),c=a(d.element),b=d.wrapper,f=b.find(".sui-checkmark");return g.length>0?(d._checked=e=g[0],void(e?(b.find(".sui-checkbox-element").removeClass("sui-checkbox-unchecked sui-checkbox-indeterminate").addClass("sui-checkbox-checked"),b.attr(A,o),c.attr(p,p),c.data("1"),J.ie&&J.version<=8&&f.css("filter","progid:DXImageTransform.Microsoft.Matrix(SizingMethod='auto expand', M11=0.7071067811865476, M12=0.7071067811865475, M21=-0.7071067811865475, M22=0.7071067811865476)")):e===!1?(b.find(".sui-checkbox-element").removeClass("sui-checkbox-checked sui-checkbox-indeterminate").addClass("sui-checkbox-unchecked"),b.attr(A,t),c.removeAttr(p),c.data("0"),f.css("filter","")):null===e&&d.options.enableThreeStates&&(b.find(".sui-checkbox-element").removeClass("sui-checkbox-checked sui-checkbox-unchecked").addClass("sui-checkbox-indeterminate"),b.attr(A,"mixed"),c.removeAttr(p),c.data("2"),f.css("filter","")))):d._checked},enabled:function(){var b=this,c=[].slice.call(arguments),e=a(b.element);if(!(c.length>0))return b._enabled;var f=!!c[0];f?(b.wrapper.removeAttr(d).removeClass("sui-checkbox-disabled"),e.removeAttr(d)):(b.wrapper.attr(d,d).addClass("sui-checkbox-disabled"),e.attr(d,d)),b._enabled=f},destroy:function(){var a=this;a.element.removeClass("sui-checkbox-input").removeAttr(l),a.checkBoxElement&&a.checkBoxElement.off(a._eventNS),a.wrapper&&(a.wrapper.find(".sui-checkbox-label").off(a._eventNS).end().removeAttr(d).removeClass("sui-checkbox-disabled").replaceWith(a.element),a.wrapper=null),h.fn.destroy.call(a)}}),_.defaults=Ea,g.ui.plugin("CheckBox",_),Ca={enabled:!0,enableLabelClick:!0,checked:!1,label:"",events:{}},ia=h.extend({init:function(){h.fn.init.apply(this,arguments);var d,n,f,k,c=this,i=a(c.element),g=c.options;c._eventNS=".shieldRadioButton"+c.getInstanceId(),i.addClass("sui-radiobutton-input"),k=i.attr(j),k||i.attr(j,k=D()),n=i.attr(l),f=c.wrapper=i.wrap('<span class="sui-radiobutton"/>').parent(),f.attr(l,e(n)?n:0);var o=a('<span class="sui-radiobutton-element"/>');if(o.appendTo(f),c.radioButtonElement=o,a('<span class="sui-checkmark"/>').appendTo(o),g.label?(d=a('<label class="sui-radiobutton-label"/>'),d.appendTo(f),d.attr("for",k),d.get(0).innerHTML=g.label,g.enableLabelClick&&d.addClass("sui-radiobutton-label-hover")):(d=i.parent().parent(),d&&!d.is("label")&&(d=a('label[for="'+k+'"]')),d&&g.enableLabelClick&&d.addClass("sui-radiobutton-label-hover")),f.attr(m,"radio"),d){var r=d.attr(j);r||d.attr(j,r=D()),f.attr(ya,r)}i.attr(p)&&(g.checked=!0),c.enabled(g.enabled),g.checked?c.checked(g.checked):c._checked=!1,f.on(q+c._eventNS,b(c._click,c)).on(w+c._eventNS,b(c._keydown,c)),d&&g.enableLabelClick&&d.on(q+c._eventNS,b(c._click,c)).on(w+c._eventNS,b(c._keydown,c)),f.onselectstart=function(){return!1},f.onmousedown=function(){return!1}},_click:function(a){var b=this;b._enabled&&(b.checked(!0),b.trigger(q,a),a.preventDefault(),a.stopPropagation())},_keydown:function(a){a.keyCode==f.SPACE&&this._click(a)},hide:function(){a(this.wrapper).hide()},show:function(){a(this.wrapper).show()},isVisible:function(){return a(this.wrapper).is(":visible")},checked:function(){var a=this,b=[].slice.call(arguments);return b.length>0?(a._uncheckAllFromSameGroup(),void a._checkInternal(b[0])):a._checked},_checkInternal:function(d){var c=this,e=a(c.element),b=c.wrapper;c._checked=d,d?(b.find(".sui-radiobutton-element").removeClass("sui-radiobutton-unchecked sui-radiobutton-indeterminate").addClass("sui-radiobutton-checked"),b.attr(A,o),e.attr(p,p)):(b.find(".sui-radiobutton-element").removeClass("sui-radiobutton-checked"),b.attr(A,t),e.removeAttr(p))},_uncheckAllFromSameGroup:function(){var c=this,b=a(c.element);a('input[type="radio"][name="'+b.attr("name")+'"]').not(b).each(function(){var b=a(this).swidget();b&&(b._checkInternal(!1),b.trigger(k))})},enabled:function(){var b=this,c=[].slice.call(arguments),e=a(b.element);if(!(c.length>0))return b._enabled;var f=!!c[0];f?(b.wrapper.removeAttr(d).removeClass("sui-radiobutton-disabled"),e.removeAttr(d)):(b.wrapper.attr(d,d).addClass("sui-radiobutton-disabled"),e.attr(d,d)),b._enabled=f},destroy:function(){var a=this;a.element.removeClass("sui-radiobutton-input").removeAttr(l),a.radioButtonElement&&(a.radioButtonElement.off(a._eventNS),a.radioButtonElement=null),a.wrapper&&(a.label&&(a.label.off(a._eventNS),a.label=null),a.wrapper.removeAttr(d).removeClass("sui-radiobutton-disabled"),a.wrapper.replaceWith(a.element),a.wrapper=null),h.fn.destroy.call(a)}}),ia.defaults=Ca,g.ui.plugin("RadioButton",ia),Aa={cls:c,enabled:!0,checked:c,onText:c,offText:c,events:{}},fa=h.extend({init:function(){h.fn.init.apply(this,arguments);var d,j,f,k,o,c=this,g=c.options,s=g.dieOnError,r=g.cls,i=g.checked;return c._original=d=a(c.element),C(d)!==n||"checkbox"!==d.attr("type")?void x("shieldSwitch: Underlying element must ne an input of type checkbox.",s):(c._eventNS=".shieldSwitch"+c.getInstanceId(),c.element=f=d.wrap('<div class="sui-switch sui-unselectable'+(r?" "+r:"")+'" />').parent(),o=a('<div class="sui-switch-inner sui-unselectable" />').appendTo(f),c._text=a('<span class="sui-switch-text sui-unselectable" />').appendTo(o),c._handle=k=a('<div class="sui-switch-handle sui-unselectable" />').appendTo(f),k.height(f.height()),d.hide(),j=d.attr(l),f.attr(l,e(j)?j:"0"),f.on(q+c._eventNS,b(c._click,c)).on(w+c._eventNS,b(c._keydown,c)),i=e(i)?!!i:!!d.attr(p),f.attr(m,eb),c.checked(i,!1),void c.enabled(g.enabled))},refresh:function(a){this.refreshWithElement(this._original,a)},_keydown:function(a){var b=this;a.keyCode===f.SPACE&&(b._click(a),a.preventDefault())},_click:function(b){var a=this;a._enabled&&(a.checked(!a._checked),a.trigger(q,b),b.preventDefault(),b.stopPropagation())},checked:function(){var f,k,b=this,n=b.options,g=n.onText,h=n.offText,c=a(b.element),i=a(b._handle),l=a(b._text),m=b._original,d=[].slice.call(arguments),j=100;return d.length>0?(f=!!d[0],k=e(d[1])?!!d[1]:!0,k||(j=0),f?(m.attr(p,p),i.animate({left:c.width()-i.width()-2},j,function(){c.addClass("sui-switch-checked").attr(A,o),e(g)&&(l.html(g),c.attr(wa,aa(g)))})):(m.removeAttr(p),i.animate({left:-2},j,function(){c.removeClass("sui-switch-checked").attr(A,t),e(h)&&(l.html(h),c.attr(wa,aa(h)))})),b._checked=f,void 0):b._checked},enabled:function(){var c,b=this,e=a(b.element),f=b._original,g=[].slice.call(arguments);return g.length>0?(c=!!g[0],c?(e.removeAttr(d).removeClass("sui-switch-disabled"),f.removeAttr(d)):(e.attr(d,d).addClass("sui-switch-disabled"),f.attr(d,d)),b._enabled=c,void 0):b._enabled},destroy:function(){var b=this;a(b.element).off(b._eventNS),a(b._inner).remove(),a(b._handle).remove(),b._original.unwrap().show(),b._original=b._inner=b._handle=null,h.fn.destroy.call(b)}}),fa.defaults=Aa,g.ui.plugin("Switch",fa)}(jQuery,shield,this);
!function(a,b,E,V){var K,x,s,i,A,F,B,J,y,D,p=b.ui.Widget,U=b.Class,o=b.format,T=b.parseDate,k=document,m=b.is.func,v=b.is,c=a.proxy,S=navigator.userAgent,R=E.opera,I=/msie/i.test(S)&&!R,P=I&&8===k.documentMode,r=a.extend,M=v.undefined,C=v.string,l="month",h="year",j="decade",n="century",d="click",q="mousedown",O="keypress",t="focus",L="selectstart",N="select",e="change",z="viewChange",u="depthChange",Q="open",H="close",G="blur",f="display",g="none";K={enabled:!0,readOnly:!1,hover:!0,footer:{enabled:!0,footerTemlpate:"Today"},min:new Date(1900,0,1),max:new Date(2099,11,31),value:V,focused:new Date,labels:{previous:"Previous",next:"Next"},view:{depth:l,start:l},dayTemplate:"{day}",otherMonthDayTemplate:"{day}",outOfRangeDayTemplate:"&nbsp;",dateTooltipTemplate:"{date:MM/dd/yyyy}",events:{}};var w=function(a){var b=!1,d="Webkit Moz ms O".split(" "),e=k.createElement("div"),f=null;if(a=a.toLowerCase(),e.style[a]&&(b=!0),b===!1){f=a.charAt(0).toUpperCase()+a.substr(1);for(var c=0;c<d.length;c++)if(void 0!==e.style[d[c]+f]){b=!0;break}}return b},W=U.extend({init:function(d){var h=this,e=d.listbox,i=d.min,j=d.max,l=d.interval,c=d.parent,m=d.textTemplate;if(b.ui.ListBox){if(v.object(e)&&e instanceof b.ui.ListBox)c.listBox=e;else{c._listBoxWrapper=a("<div style='display: none;' />").appendTo(k.body);var n=h._populateDataSource(i,j,l);c.listBox=new b.ui.ListBox(c._listBoxWrapper,r({},e,{dataSource:{data:n},multiple:!1,textTemplate:m,width:c._wrapper.innerWidth(),maxHeight:200})),c._wrapper.parent().hasClass("sui-rtl")?c.listBox.element.parent().addClass("sui-rtl"):c.listBox.element.parent().css(f,g)}c._shouldShowPopup=!0}},_populateDataSource:function(b,a,f){var c,d,e=[];for(b>=a?a=new Date(b.getFullYear(),b.getMonth(),b.getDate()+1,a.getHours(),a.getMinutes(),a.getSeconds()):(a=new Date(b.getFullYear(),b.getMonth(),b.getDate(),a.getHours(),a.getMinutes(),a.getSeconds()),a.getTime()==b.getTime()&&(a=new Date(b.getFullYear(),b.getMonth(),b.getDate()+1,a.getHours(),a.getMinutes(),a.getSeconds()))),c=b.getTime(),d=a.getTime();d>c;)e.push(new Date(c)),c+=60*f*1e3;return e},destroy:function(){var a=this;a.listBox;a.listBox&&(a.listBox.destroy(),a.listBox=null)}});x=p.extend({init:function(){p.fn.init.apply(this,arguments);var b=this,f=a(b.element),e=b.options,h=e.cls,g=e.value;f.addClass("sui-calendar"+(h?" "+h:"")),b._focusedDate=e.focused,b._view=e.view.start,b._enabled=e.enabled,g&&(C(g)&&(g=new Date(g)),b._focusedDate=b._selectedDate=new Date(g.getFullYear(),g.getMonth(),g.getDate())),b._initializeHeader(),b._render(),e.footer.enabled&&b._initializeFooter(),!e.readOnly&&e.enabled?(f.find(".sui-prev").on(d,b._movePrev=c(b._movePrevHandler,b)),f.find(".sui-next").on(d,b._moveNext=c(b._moveNextHandler,b)),f.find(".sui-text").on(d,b._changeViewDepth=c(b._changeViewDepthHandler,b)),f.find(".sui-footer").on(d,b._selectToday=c(b._selectTodayHandler,b))):e.readOnly?f.addClass("sui-read-only"):f.addClass("sui-calendar-disabled"),I&&f.on(L,b._selectStart=function(){return!1})},_calendarSelectionHandler:function(m){var c,g,b=this,f=a(m.target).closest("td"),d=b._focusedDate;b.options.view.depth;if(f.length&&!f.hasClass("sui-out-of-range")&&!f.hasClass("sui-no-hover")&&b._enabled)switch(b._calendarTable.find(".sui-focused").removeClass("sui-focused"),b._view){case l:c=new Date(f.attr("data-value"));var o=b._shouldChangeView(c),i=!1;c.getTime()>b._focusedDate&&(i=!0),b._focusedDate=c,b._selectedDate=c,o&&(b._animationBegins(i),b._renderView(),b._animationEnds(i),b.trigger(z)),b._selectDateCell(c),b.trigger(e);break;case h:var k=parseInt(f.attr("data-value"),10);c=new Date(d.getFullYear(),k,d.getDate()),c.getDate()!=d.getDate()&&(c=new Date(d.getFullYear(),k+1,0)),b._focusedDate=c,b.options.view.depth==h?(b._selectedDate=c,b._selectDateCell(c),b.trigger(e)):(b._view=l,b._viewDepthAnimationBegins(),b._renderView(),b._viewDepthAnimationEnds(),b.trigger(u));break;case j:g=parseInt(f.attr("data-value"),10),c=new Date(g,d.getMonth(),d.getDate()),c.getDate()!=d.getDate()&&(c=new Date(g,d.getMonth()+1,0)),b._focusedDate=c,b.options.view.depth==j?(b._selectedDate=c,b._selectDateCell(c),b.trigger(e)):(b._view=h,b._viewDepthAnimationBegins(),b._renderView(),b._viewDepthAnimationEnds(),b.trigger(u));break;case n:g=parseInt(f.attr("data-value"),10),c=new Date(g,d.getMonth(),d.getDate()),c.getDate()!=d.getDate()&&(c=new Date(g,d.getMonth()+1,0)),b._focusedDate=c,b.options.view.depth==n?(b._selectedDate=c,b._selectDateCell(c),b.trigger(e)):(b._view=j,b._viewDepthAnimationBegins(),b._renderView(),b._viewDepthAnimationEnds(),b.trigger(u))}},_shouldChangeView:function(f){var a,e,g=this,i=g._focusedDate,d=!1,b=i.getFullYear(),c=f.getFullYear();switch(g._view){case l:(c!=b||f.getMonth()!=i.getMonth())&&(d=!0);break;case h:c!=b&&(d=!0);break;case j:a=b-b%10,e=a+10,(a>c||c>e)&&(d=!0);break;case n:a=b-b%100,e=a+100,(a>c||c>e)&&(d=!0)}return d},_selectTodayHandler:function(){var a=this,b=new Date,f=a._shouldChangeView(b),c=!1;if(a._enabled){var d=new Date(b.getFullYear(),b.getMonth(),b.getDate());d.getTime()>a._focusedDate&&(c=!0),a._selectedDate=a._focusedDate=d,a._view!=a.options.view.depth?(a._view=a.options.view.depth,a._viewDepthAnimationBegins(),a._renderView(),a._viewDepthAnimationEnds(),a.trigger(u)):f?(a._animationBegins(c),a._renderView(),a._animationEnds(c),a.trigger(z)):a._selectDateCell(a._focusedDate),a.trigger(e)}},_selectDateCell:function(b){var c=this,d=null;switch(c._view){case l:d=c._calendarTable.find(".sui-date:not('.sui-other-month')").filter(function(){var d=a(this).attr("data-value"),c=new Date(d);return c.getDate()==b.getDate()&&c.getMonth()==b.getMonth()&&c.getFullYear()==b.getFullYear()});break;case h:d=c._calendarTable.find(".sui-month").filter(function(){return a(this).attr("data-value")==b.getMonth()});break;case j:d=c._calendarTable.find(".sui-year").filter(function(){return a(this).attr("data-value")==b.getFullYear()});break;case n:d=c._calendarTable.find(".sui-years").filter(function(){var c=parseInt(a(this).attr("data-value"),10);return b.getFullYear()>=c&&b.getFullYear()<c+10})}c._calendarTable.find(".sui-selected").removeClass("sui-selected"),d.addClass("sui-selected")},_viewDepthAnimationBegins:function(){var a=this;if(!w("transition"))return void a._calendarTable.empty();a._enabled=!1;var b=a._calendarTable,c=!1;b.bind("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(d){c=a._removeOldTable(b,a)}),setTimeout(function(){c||a._removeOldTable(b,a)},1e3),b.addClass("sui-fade-in"),a._renderTable()},_removeOldTable:function(a,b){return a.unbind("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend"),a.remove(),b._enabled=!0,!0},_viewDepthAnimationEnds:function(){w("transition")&&this._calendarTable.addClass("sui-scaling")},_changeViewDepthHandler:function(d){var a=this,b=[l,h,j,n],c=jQuery.inArray(a._view,b);3>c&&a._enabled&&(a._view=b[c+1],a._viewDepthAnimationBegins(),a._renderView(),a._viewDepthAnimationEnds())},_movePrevMonth:function(){var b=this,a=b._focusedDate,c=(b._view,new Date(a.getFullYear(),a.getMonth()-1,a.getDate()));c.getDate()!=a.getDate()&&(c=new Date(a.getFullYear(),a.getMonth(),0)),b._focusedDate=c},_moveNextMonth:function(){var b=this,a=b._focusedDate,c=(b._view,new Date(a.getFullYear(),a.getMonth()+1,a.getDate()));c.getDate()!=a.getDate()&&(c=new Date(a.getFullYear(),a.getMonth()+2,0)),b._focusedDate=c},_movePrevYears:function(d){var b=this,a=b._focusedDate,c=(b._view,new Date(a.getFullYear()-d,a.getMonth(),a.getDate()));c.getMonth()!=a.getMonth()&&(c=new Date(a.getFullYear()-d,a.getMonth()+1,0)),b._focusedDate=c,b._calendarTable.empty()},_moveNextYears:function(d){var b=this,a=b._focusedDate,c=(b._view,new Date(a.getFullYear()+d,a.getMonth(),a.getDate()));c.getMonth()!=a.getMonth()&&(c=new Date(a.getFullYear()+d,a.getMonth()+1,0)),b._focusedDate=c,b._calendarTable.empty()},_animationBegins:function(c){var b=this,d="-";if(!w("transition"))return void b._calendarTable.empty();b._calendarTable.removeClass("sui-scaling"),b._tableWrapper=a("<div>").insertAfter(b.element.find(".sui-header")),b._tableWrapper.width(2*b.element.width()),b.element.find(".sui-calendar-view").appendTo(b._tableWrapper),b.element.parent().hasClass("sui-rtl")&&(c=!c,d="+"),b._renderTable(c),c||(b._tableWrapper.css("position","relative"),b._tableWrapper.css("left",d+b.element.width()+"px")),b._tableWrapper.addClass("sui-calendar-animation"),b._enabled=!1;var e=!1;b._tableWrapper.bind("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(a){e=b._removeTempTables(b)}),setTimeout(function(){e||b._removeTempTables(b)},1e3)},_removeTempTables:function(a){return a._tempTable.remove(),a._calendarTable.insertAfter(a.element.find(".sui-header")),a._tableWrapper.unbind("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend"),a._tableWrapper.remove(),a._tableWrapper=null,a._enabled=!0,!0},_animationEnds:function(c){var b=this;if(w("transition")){var a=b.element.width();c&&(a=-1*a),b._tableWrapper.css("transform","translateX("+a+"px)")}},_moveView:function(b){var a=this;switch(a._animationBegins(b),a._view){case l:b?a._moveNextMonth():a._movePrevMonth(),a._createMonthView();break;case h:b?a._moveNextYears(1):a._movePrevYears(1),a._createYearsView();break;case j:b?a._moveNextYears(10):a._movePrevYears(10),a._createDecadeView();break;case n:b?a._moveNextYears(100):a._movePrevYears(100),a._createcenturyView()}a._animationEnds(b),a.trigger(z)},_disablePrev:function(c){var a=this,b=a.element.find(".sui-prev");c?(a.preventPrevNavigation=!0,b.addClass("sui-calendar-disabled")):(a.preventPrevNavigation=!1,b.removeClass("sui-calendar-disabled"))},_disableNext:function(c){var a=this,b=a.element.find(".sui-next");c?(a.preventNextNavigation=!0,b.addClass("sui-calendar-disabled")):(a.preventNextNavigation=!1,b.removeClass("sui-calendar-disabled"))},_movePrevHandler:function(){var a=this;!a.preventPrevNavigation&&a._enabled&&a._moveView(!1)},_moveNextHandler:function(){var a=this;!a.preventNextNavigation&&a._enabled&&a._moveView(!0)},_initializeHeader:function(){var c=this,b=c.options.labels;this._header=a('<div class="sui-header"><span unselectable="on"  title="'+b.previous+'" class="sui-prev"><span unselectable="on" class="sui-left-arrow"></span></span><span class="sui-text"></span><span unselectable="on" title="'+b.next+'" class="sui-next"><span unselectable="on" class="sui-right-arrow"></span></span></div>').appendTo(this.element)},_renderTable:function(g){var b=this,e=b.options,f="sui-calendar-view";e.hover&&e.enabled&&(f+=" sui-hoverable"),b._calendarTable?(b.element.find(".sui-calendar-view").off(d,b._calendarSelection),b._calendarSelection=null,g?(b._tempTable=b.element.find(".sui-calendar-view"),b._calendarTable=a("<table />").width(b.element.width()).addClass(f).insertAfter(b._tempTable)):(b._tempTable=b.element.find(".sui-calendar-view"),b._calendarTable=a("<table />").width(b.element.width()).addClass(f).insertBefore(b._tempTable))):b._calendarTable=a("<table />").width(b.element.width()).addClass(f).insertAfter(b.element.find(".sui-header")),!e.readOnly&&e.enabled&&b.element.find(".sui-calendar-view").on(d,b._calendarSelection=c(b._calendarSelectionHandler,b))},_render:function(){this._renderTable(),this._renderView()},_renderView:function(){var a=this;switch(a._view){case l:a._createMonthView();break;case h:a._createYearsView();break;case j:a._createDecadeView();break;case n:a._createcenturyView();break;default:a._createMonthView()}},_initializeFooter:function(){var c=this,d=c.options,b=d.footer.footerTemlpate,e=m(b)?b:function(a){return o(b,a)};a('<div class="sui-footer"><span class="sui-footer-text">'+e.call(c,new Date)+"</span></div>").appendTo(this.element)},_createMonthView:function(){var c=this,i=c.options,t=c._focusedDate,H=c._calendarTable,w=b.getCalendarInfo(),s=w.days,l=w.firstDay,Z=w.months,r=s.namesShort,p=[],Y=s.namesAbbr,X=s.names,O=i.min,F=i.max,x=i.dayTemplate,y=i.otherMonthDayTemplate,z=i.dateTooltipTemplate,A=i.outOfRangeDayTemplate,W=m(x)?x:function(a){return o(x,a)},P=m(y)?y:function(a){return o(y,a)},U=m(z)?z:function(a){return o(z,a)},T=m(A)?A:function(a){return o(A,a)},S=a("<thead />").appendTo(H),R=a("<tr />").addClass("sui-week-header").appendTo(S),N="",e=0;for(e=l;e<r.length;e++)p.push(r[e]);for(var v=0;l>v;v++)p.push(r[v]);for(var j=0;j<p.length;j++){p[j];N+="<th scope='col' abbr='"+Y[j]+"' title='"+X[j]+"'>"+p[j]+"</th>"}R.html(N);var V=a('<tbody class="sui-days"/>').appendTo(H),f=t.getFullYear(),g=t.getMonth(),q=new Date(f,g,1).getDay()-l,Q=new Date(f,g+1,0).getDay()-l,L=new Date(f,g+1,0).getDate(),M=7;c._header.find(".sui-text").text(Z.names[g]+" "+f),0>=q&&(q=7-(0===q?0:l),M=0);var C=-1*q+1,k=6-Q+L+M,B=0,G=null,u="";for(k-C>42&&(k-=7),35>k-C&&(k+=7),e=C;k>=e;e++){var d=new Date(f,g,e,0,0,0,0),I="sui-date",D=d.getTime()<O.getTime()||d.getTime()>F.getTime()?" sui-out-of-range":"",h=1>e||e>L?" sui-other-month":"",E=6==d.getDay()||0===d.getDay()?" sui-weekend":"",K=D||t.getDate()!=e||h?"":" sui-focused",J=c._selectedDate&&d.getTime()==c._selectedDate.getTime()&&!h?" sui-selected":"",n=null;D?(n=T.call(c,{date:d,day:d.getDate()}),h="",E="",K="",J="",I=""):h?(n=P.call(c,{date:d,day:d.getDate()}),""===n&&(h+=" sui-no-hover")):n=W.call(c,{date:d,day:d.getDate()}),u+="<td title='"+U.call(c,{date:d,day:d.getDate()})+"' data-value='"+d.getFullYear()+"/"+(d.getMonth()+1)+"/"+d.getDate()+"' class='"+I+h+E+K+J+D+"'>"+n+"</td>",B++,7==B&&(G=a('<tr role="row" />').appendTo(V),G.html(u),B=0,u="")}var $=new Date(f,g,1,0,0,0,0),_=new Date(f,g+1,0);$.getTime()<=O.getTime()?c._disablePrev(!0):c.element.find(".sui-prev").hasClass("sui-calendar-disabled")&&c._disablePrev(!1),_.getTime()>=F.getTime()?c._disableNext(!0):c.element.find(".sui-next").hasClass("sui-calendar-disabled")&&c._disableNext(!1)},_createYearsView:function(){var c=this,m=c.options,v=c._calendarTable,e=c._focusedDate,y=b.getCalendarInfo(),s=y.months,x=s.names,q=s.namesAbbr,w=a('<tbody class="sui-months"/>').appendTo(v),o=null,n="",i=m.min,l=m.max,k="",j=0;c._header.find(".sui-text").text(e.getFullYear());for(var d=0;d<q.length;d++){var f=new Date(e.getFullYear(),d,e.getDate(),0,0,0,0),u=e.getMonth()==d?" sui-focused":"";m.view.depth==h&&(k=c._selectedDate&&f.getTime()==c._selectedDate.getTime()?" sui-selected":"");var g="",t=x[d],r=q[d],p="sui-month";(f.getFullYear()<=i.getFullYear()&&f.getMonth()<i.getMonth()||f.getFullYear()>=l.getFullYear()&&f.getMonth()>l.getMonth())&&(g=" sui-out-of-range"),g&&(u="",k="",t=r="&nbsp;",p=""),n+="<td data-value='"+d+"' class='"+p+u+k+g+"' title='"+t+"'>"+r+"</td>",j++,4==j&&(o=a("<tr />").appendTo(w),o.html(n),j=0,n="")}e.getFullYear()<=i.getFullYear()?c._disablePrev(!0):c.element.find(".sui-prev").hasClass("sui-calendar-disabled")&&c._disablePrev(!1),e.getFullYear()>=l.getFullYear()?c._disableNext(!0):c.element.find(".sui-next").hasClass("sui-calendar-disabled")&&c._disableNext(!1)},_createDecadeView:function(){var b=this,i=b.options,x=b._calendarTable,h=b._focusedDate,d=h.getFullYear(),s=d%10,w=a('<tbody class="sui-decade"/>').appendTo(x),r=null,n="",o=0,q=i.min,v=i.max,f=d-s-1,l="",g=d+(10-s);b._header.find(".sui-text").text(f+1+"-"+(g-1));for(var c=f;g>=c;c++){var k=new Date(c,h.getMonth(),h.getDate(),0,0,0,0),t=c==f||c==g?" sui-other-year":"",u=d==c?" sui-focused":"",m="",e=c,p="sui-year";(k.getFullYear()<q.getFullYear()||k.getFullYear()>v.getFullYear())&&(m=" sui-out-of-range"),i.view.depth==j&&(l=b._selectedDate&&k.getTime()==b._selectedDate.getTime()?" sui-selected":""),m&&(t="",u="",l="",p="",e="&nbsp;"),n+="<td data-value='"+e+"' class='"+p+t+u+l+m+"' title='"+e+"'>"+e+"</td>",o++,4==o&&(r=a("<tr />").appendTo(w),r.html(n),o=0,n="")}f<q.getFullYear()?b._disablePrev(!0):b.element.find(".sui-prev").hasClass("sui-calendar-disabled")&&b._disablePrev(!1),g>v.getFullYear()?b._disableNext(!0):b.element.find(".sui-next").hasClass("sui-calendar-disabled")&&b._disableNext(!1)},_createcenturyView:function(){var A,b=this,p=b.options,z=b._calendarTable,d=b._focusedDate,f=d.getFullYear(),y=f%100,x=a('<tbody class="sui-decade"/>').appendTo(z),s=null,m="",o="",i=p.min,q=p.max,k=0,e=f-y-10,g=e+99+10+2;b._header.find(".sui-text").text(e+10+"-"+(g-2));for(var c=e;g>c;c+=10){var t=c==e||c==g-1?" sui-other-years":"",h=new Date(c,d.getMonth(),d.getDate(),0,0,0,0),w=new Date(c+10,d.getMonth(),d.getDate(),0,0,0,0),j="",r=f>=c&&c+10>f?" sui-focused":"",v="sui-years",l=c+" - "+(c+9),u=c;(h.getFullYear()<i.getFullYear()&&w.getFullYear()<=i.getFullYear()||h.getFullYear()>q.getFullYear())&&(j=" sui-out-of-range"),p.view.depth==n&&(o=b._selectedDate&&b._selectedDate.getFullYear()>=h.getFullYear()&&b._selectedDate.getFullYear()<h.getFullYear()+10?" sui-selected":""),j&&(t="",r="",o="",v="",A=u=l="&nbsp;"),m+="<td data-value='"+u+"' class='"+v+t+r+o+j+"' title='"+l+"'>"+l+"</td>",k++,4==k&&(s=a("<tr />").appendTo(x),s.html(m),k=0,m="")}e<i.getFullYear()?b._disablePrev(!0):b.element.find(".sui-prev").hasClass("sui-calendar-disabled")&&b._disablePrev(!1),g>q.getFullYear()?b._disableNext(!0):b.element.find(".sui-next").hasClass("sui-calendar-disabled")&&b._disableNext(!1)},value:function(){var a=this,c=a.options,e=c.min,f=c.max,d=[].slice.call(arguments);if(!(d.length>0))return a._selectedDate;var b=d[0];if(null==b||""===b||M(b))a._selectedDate=null,a._focusedDate=c.focused;else{if(b.getTime()<e.getTime()||b.getTime()>f.getTime())return;a._focusedDate=a._selectedDate=new Date(b.getFullYear(),b.getMonth(),b.getDate())}a._calendarTable.empty(),a._renderView()},enabled:function(){var a=this,d=a.options,b=[].slice.call(arguments);if(!(b.length>0))return a._enabled;var c=b[0];c?(d.hover&&a._calendarTable.addClass("sui-hoverable"),a.element.removeClass("sui-calendar-disabled")):(a._calendarTable.removeClass("sui-hoverable"),a.element.addClass("sui-calendar-disabled")),a._enabled=c},previous:function(){var a=this;a.preventPrevNavigation||a._moveView(!1)},next:function(){var a=this;a.preventNextNavigation||a._moveView(!0)},view:function(){var a=this,b=[].slice.call(arguments);if(!(b.length>0))return a._view;var c=b[0];c!=a._view&&(a._view=c,a._calendarTable.empty(),a._renderView())},focused:function(){var a=this,b=[].slice.call(arguments);if(!(b.length>0))return a._focusedDate;a._focusedDate=b[0];b.length>1&&a._view!=b[1]&&(a._view=b[1]),a._calendarTable.empty(),a._renderView()},visible:function(){var a=this,b=(a.options,[].slice.call(arguments));if(!(b.length>0))return a.element.hasClass("sui-hidden")||"none"==a.element.css("display")?!1:!0;var c=b[0];c?a.element.removeClass("sui-hidden"):a.element.addClass("sui-hidden")},destroy:function(){var b=this,e=b.options.cls,c=a(b.element);c.removeClass("sui-calendar sui-read-only sui-calendar-disabled"+(e?" "+e:"")),b._focusedDate=null,b._header=null,b._calendarTable=null,b._view=null,b._enabled=null,b._selectedDate=null,b._tempTable=null,b._tableWrapper=null,c.find(".sui-prev").off(d,b._movePrev),b._movePrev=null,c.find(".sui-next").off(d,b._moveNext),b._moveNext=null,c.find(".sui-text").off(d,b._changeViewDepth),b._changeViewDepth=null,c.find(".sui-footer").off(d,b._selectToday),b._selectToday=null,c.find(".sui-calendar-view").off(d,b._calendarSelection),b._calendarSelection=null,c.off(L,b._selectStart),b._selectStart=null,c.empty(),p.fn.destroy.call(b)}}),x.defaults=K,b.ui.plugin("Calendar",x),s={calendar:null,format:"{0:MM/dd/yyyy}",textTemplate:"{0:MM/dd/yyyy}",value:null,parseFormats:["MM/dd/yyyy"],openOnFocus:!1,showButton:!0,editable:!0,enabled:!0,messages:{calendarIconTooltip:"",buttonText:"select"},min:new Date(1900,0,1),max:new Date(2099,11,31),events:{}},i=p.extend({init:function(j,m){p.fn.init.apply(this,arguments);var b=this,d=b.options,e=d.value,i=d.showButton?"":" sui-no-button";P&&(i+=" sui-ie8");var h=a(d.isMonthYearPicker?"<span class='sui-monthyearpicker"+i+"' />":d.isTimePicker?"<span class='sui-timepicker"+i+"' />":d.isDateTimePicker?"<span class='sui-datetimepicker"+i+"' />":"<span class='sui-datepicker"+i+"' />");if(b._selectedDate=null,a(j).after(h),b._wrapper=h,b._visibleInput=a("<input class='sui-picker-input' type='text' />").appendTo(h),d.showButton){var k=d.messages.calendarIconTooltip;d.isTimePicker&&(k=d.messages.timeIconTooltip),b._iconWrapper=a("<span class='sui-icon-wrapper' unselectable='on' title='"+k+"' />").appendTo(h);a('<span class="sui-sprite sui-calendar-icon" unselectable="on">'+d.messages.buttonText+"</span>").appendTo(b._iconWrapper);d.isDateTimePicker&&(b._timeIconWrapper=a("<span class='sui-time-icon-wrapper' unselectable='on' title='"+d.messages.timeIconTooltip+"' />").appendTo(h),a('<span class="sui-sprite sui-time-icon" unselectable="on">'+d.messages.buttonText+"</span>").appendTo(b._timeIconWrapper))}if(a(j).css(f,g).appendTo(h),b._enabled=d.enabled,d.enabled||(h.addClass("sui-disabled"),b._visibleInput.on(t,b._visibleInputFocused=c(b._visibleInputFocusedHandler,b))),b._attachEvents(),!e){var l=b._value();l&&(e=l)}e&&(C(e)&&(e=new Date(e)),d.isMonthYearPicker?b._selectedDate=new Date(e.getFullYear(),e.getMonth(),1):b._selectedDate=e,b._changeInputsValues(e))},_changeInputsValues:function(b){var a=this,c=a.options,d=c.format,e=c.textTemplate,f=m(d)?d:function(a){return o(d,a.date)};a._value(f.call(a,{date:b}));var g=m(e)?e:function(a){return o(e,a.date)};a._visibleInput.get(0).value=g.call(a,{date:b}),c.isMonthYearPicker?a._selectedDate=new Date(b.getFullYear(),b.getMonth(),1):a._selectedDate=b},_attachEvents:function(){var b=this,f=b.options;f.showButton&&(f.isTimePicker?b._iconWrapper.on(d,b._toggleListBoxVisibility=c(b._toggleListBoxVisibilityHandler,b)):f.isDateTimePicker?(b._timeIconWrapper.on(d,b._toggleListBoxVisibility=c(b._toggleListBoxVisibilityHandler,b)),b._iconWrapper.on(d,b._toggleCalendarVisibility=c(b._toggleCalendarVisibilityHandler,b))):b._iconWrapper.on(d,b._toggleCalendarVisibility=c(b._toggleCalendarVisibilityHandler,b))),b._visibleInput.on(O,b._visibleInputKeyPress=c(b._visibleInputKeyPressHandler,b)),a(k).on(q+".shieldDatePicker"+b.getInstanceId(),c(b._hidePopupHandler,b)),b._visibleInput.on(t,b._visibleInputFocused=c(b._visibleInputFocusedHandler,b)),b._visibleInput.on(G,b._visibleInputBlured=c(b._visibleInputBluredHandler,b)),b._visibleInput.on(e,b._visibleInputChanged=c(b._visibleInputChangedHandler,b))},_visibleInputChangedHandler:function(){var a=this,b=a.options,d=b.format,c=b.min,f=b.max;if(a._enabled){a._selectedDate=T(a._visibleInput.get(0).value,b.parseFormats),a._selectedDate&&(a._selectedDate.getTime()>f||a._selectedDate.getTime()<c)&&(b.isTimePicker?a._selectedDate=new Date(c.getFullYear(),c.getMonth(),c.getDate(),a._selectedDate.getHours(),a._selectedDate.getMinutes(),a._selectedDate.getSeconds()):a._selectedDate=null),null!=a._selectedDate&&(a._selectedDate&&a.calendar&&a.calendar.value(a._selectedDate),a._selectedDate&&a.listBox&&a._selectValueInListBox(a._selectedDate));var g=m(d)?d:function(a){return o(d,a.date)};a.element.get(0).value=g.call(a,{date:a._selectedDate}),a.trigger(e)}},_visibleInputFocusedHandler:function(c){var a=this,b=a.options;return a._enabled?(b.isMonthYearPicker?a._wrapper.addClass("sui-monthyearpicker-focus"):b.isTimePicker?a._wrapper.addClass("sui-timepicker-focus"):b.isDateTimePicker?a._wrapper.addClass("sui-datetimepicker-focus"):a._wrapper.addClass("sui-datepicker-focus"),void(b.openOnFocus&&(a._shouldShowPopup||!a.calendar)&&(a._toggleCalendarVisibilityHandler(),a._shouldShowPopup=!1))):void c.target.blur()},_visibleInputBluredHandler:function(){var c=this,b=c.options,a=c._wrapper;b.isMonthYearPicker?a.removeClass("sui-monthyearpicker-focus"):b.isTimePicker?a.removeClass("sui-timepicker-focus"):b.isDateTimePicker?a.removeClass("sui-datetimepicker-focus"):a.removeClass("sui-datepicker-focus")},_visibleInputKeyPressHandler:function(b){var a=this,d=a.options;if(a._enabled){if(d.editable===!1)return b.preventDefault(),void b.stopPropagation();var c=b.keyCode||b.charCode;(13==c||9==c||27==c)&&(a._shouldShowPopup=!0,a.calendar&&a.calendar.element.css(f)!=g&&(a.calendar.element.css(f,g),a.trigger(H)))}},_hidePopupHandler:function(c){var d,b=this;if(b.listBox){if(b._visibleInput.get(0)==c.target||b._iconWrapper&&b._iconWrapper.get(0)==c.target||b._iconWrapper&&b._iconWrapper.children(0).get(0)==c.target||b._timeIconWrapper&&b._timeIconWrapper.get(0)==c.target||b._timeIconWrapper&&b._timeIconWrapper.children(0).get(0)==c.target)return;b._popupIsOver?(d=b.listBox.element.parent().height(),b.listBox.element.parent().animate({height:0,top:b._visibleInput.offset().top},150,function(){a(this).css(f,g),a(this).css("height",d)})):b.listBox.element.parent().slideUp(150,function(){}),b._shouldShowPopup=!0}if(b.calendar){if(b._visibleInput.get(0)==c.target||b._iconWrapper&&b._iconWrapper.get(0)==c.target||b._iconWrapper&&b._iconWrapper.children(0).get(0)==c.target)return;b._popupIsOver?(d=b.calendar.element.height(),b.calendar.element.animate({height:0,top:b._visibleInput.offset().top},150,function(){a(this).css(f,g),a(this).css("height",d)})):b.calendar.element.slideUp(150,function(){}),b._shouldShowPopup=!0}},_toggleListBoxVisibilityHandler:function(){var a=this,b=a.options,d=b.listBox;if(a._enabled){if(!a.listBox){new W({listbox:d,parent:a,min:b.min,max:b.max,interval:b.interval,textTemplate:b.isDateTimePicker?b.timeFormat:b.textTemplate});a.listBox.on(N,a._listBoxChange=c(a._listBoxChangeHandler,a)),a.listBox.element.on(q,a._popupMouseDown=c(a._popupMouseDownHandler,a)),a._selectedDate&&a._selectValueInListBox(a._selectedDate)}b.isDateTimePicker&&(a.calendar&&a.calendar.element.css(f)!=g&&(a.calendar.element.slideUp(150,function(){}),a._shouldShowPopup=!0),a._toggleTimePopup=!0),a._shouldShowPopup?a._showPopup():a._hidePopup(),a._shouldShowPopup?a._shouldShowPopup=!1:a._shouldShowPopup=!0}},_listBoxChangeHandler:function(j){var c=this;if(c.options.isDateTimePicker){var d=c._selectedDate,f=j.item;d?c._selectedDate=new Date(d.getFullYear(),d.getMonth(),d.getDate(),f.getHours(),f.getMinutes(),f.getSeconds()):(d=new Date,c._selectedDate=new Date(d.getFullYear(),d.getMonth(),d.getDate(),f.getHours(),f.getMinutes(),f.getSeconds()))}else c._selectedDate=j.item;var h=c.options,k=h.isDateTimePicker?b.format(h.timeFormat,c._selectedDate):b.format(h.textTemplate,c._selectedDate),i=c.listBox.element.find(".sui-listbox-item"),g=0;for(g;g<i.length;g++)if(i[g].innerHTML==k){c._selectedElement=a(i[g]);break}c._changeInputsValues(c._selectedDate),c._hidePopup(),c._shouldShowPopup=!0,c.trigger(e)},_toggleCalendarVisibilityHandler:function(){var d=this,h=d.options,i=h.calendar;d._enabled&&(d.calendar||(b.ui.Calendar&&(v.object(i)&&i instanceof b.ui.Calendar?d.calendar=i:(d._wrapper.parent().hasClass("sui-rtl")?(d._calendarWrapper=a("<div style='display: none;' />").appendTo(k.body),d._calendarWrapper.wrap("<span class='sui-rtl'></span>")):d._calendarWrapper=a("<div style='display: none;' />").appendTo(k.body),d.calendar=new b.ui.Calendar(d._calendarWrapper,r({},i,{min:h.min,max:h.max}))),d._shouldShowPopup=!0),d.calendar.on(e,d._calendarChange=c(d._calendarChangeHandler,d)),d.calendar.element.on(q,d._popupMouseDown=c(d._popupMouseDownHandler,d)),d._selectedDate&&d.calendar.value(d._selectedDate)),h.isDateTimePicker&&(d.listBox&&d.listBox.element.parent().css(f)!=g&&(d.listBox.element.parent().slideUp(150,function(){}),d._shouldShowPopup=!0),d._toggleTimePopup=!1),d._shouldShowPopup?d._showPopup():d._hidePopup(),d._shouldShowPopup?d._shouldShowPopup=!1:d._shouldShowPopup=!0)},_calendarChangeHandler:function(){var b,a=this,c=a.options;c.isMonthYearPicker?(b=a.calendar.value(),a._selectedDate=new Date(b.getFullYear(),b.getMonth(),1)):c.isDateTimePicker?(b=a.calendar.value(),a._selectedDate?a._selectedDate=new Date(b.getFullYear(),b.getMonth(),b.getDate(),a._selectedDate.getHours(),a._selectedDate.getMinutes(),a._selectedDate.getSeconds()):a._selectedDate=a.calendar.value()):a._selectedDate=a.calendar.value(),a._changeInputsValues(a._selectedDate),a._hidePopup(),a._shouldShowPopup=!0,a.trigger(e)},_calculateLeftOffsetWhenRtl:function(){var b,a=this,d=a.options,c=(a._wrapper.offset(),0);return d.isTimePicker||d.isDateTimePicker&&a._toggleTimePopup?(b=a._visibleInput.offset().left-(a.listBox.element.parent().width()-a._visibleInput.width()),b>0&&(c=b)):(b=a._visibleInput.offset().left-(a.calendar.element.width()-a._visibleInput.width()),b>0&&(c=b)),c},_showPopup:function(){var d,b=this,g=b.options,e=b._wrapper.offset(),i=e.top-a(k).scrollTop(),h=b._wrapper.height(),j=a(E).height(),c=e.top+h,f=e.left;b._wrapper.parent().hasClass("sui-rtl")&&(f=b._calculateLeftOffsetWhenRtl()),d=g.isTimePicker||g.isDateTimePicker&&b._toggleTimePopup?b.listBox.element.parent().height():b.calendar.element.height(),d+i+h>j?c=e.top-d-1:c++,(0>c||a(k).scrollTop()>c)&&(c=e.top+h+1),b._visibleInput.offset().top>c?b._popupIsOver=!0:b._popupIsOver=!1,g.isTimePicker||g.isDateTimePicker&&b._toggleTimePopup?b._popupIsOver?(b.listBox.element.parent().css({position:"absolute",zIndex:10002,top:c+d,left:f,height:0,display:""}),b.listBox.element.parent().animate({height:d,top:c+2},150)):(b.listBox.element.parent().css({position:"absolute",top:c,left:f,zIndex:10002}),b.listBox.element.parent().slideDown(150,function(){if(b._selectedElement){var a=Math.abs(b._selectedElement.get(0).offsetTop),c=b._selectedElement.parent().scrollTop();a>b._selectedElement.parent().get(0).scrollTopMax&&(a=b._selectedElement.parent().get(0).scrollTopMax),c+b.listBox.element.height()>a&&a>c||b.listBox.element.scrollTop(a)}})):b._popupIsOver?(b.calendar.element.css({position:"absolute",zIndex:10002,top:c+d,left:f,height:0,display:""}),b.calendar.element.animate({height:d,top:c},150)):(b.calendar.element.css({position:"absolute",zIndex:10002,top:c,left:f}),b.calendar.element.slideDown(150,function(){})),b.trigger(Q)},_hidePopup:function(){var c,b=this,d=b.options;d.isTimePicker||d.isDateTimePicker&&b._toggleTimePopup?b.listBox&&b.listBox.element.parent().css(f)!=g&&(b._popupIsOver?(c=b.listBox.element.parent().height(),b.listBox.element.parent().animate({height:0,top:b._visibleInput.offset().top},150,function(){a(this).css(f,g),a(this).css("height",c)})):b.listBox.element.parent().slideUp(150,function(){})):b.calendar&&b.calendar.element.css(f)!=g&&(b._popupIsOver?(c=b.calendar.element.height(),b.calendar.element.animate({height:0,top:b._visibleInput.offset().top},150,function(){a(this).css(f,g),a(this).css("height",c)})):b.calendar.element.slideUp(150,function(){})),b.trigger(H)},_popupMouseDownHandler:function(a){a.preventDefault(),a.stopPropagation()},_selectValueInListBox:function(g){var d=this;if(d.listBox){var c,e=d.options,h=e.isDateTimePicker?b.format(e.timeFormat,g):b.format(e.textTemplate,g),f=d.listBox.element.find(".sui-listbox-item");for(c=0;c<f.length;c++)if(f[c].innerHTML==h){d._selectedElement=a(f[c]);break}d.listBox.selected(c,!0)}},enabled:function(){var a=this,b=(a.options,[].slice.call(arguments));if(!(b.length>0))return a._enabled;var d=b[0];a._enabled=d,d?(a._visibleInputFocused&&(a._visibleInput.off(t,a._visibleInputFocused),a._visibleInputFocused=null),a._wrapper.removeClass("sui-disabled")):(a._wrapper.addClass("sui-disabled"),a._visibleInput.on(t,a._visibleInputFocused=c(a._visibleInputFocusedHandler,a)))},visible:function(){var a=this,b=(a.options,[].slice.call(arguments));if(!(b.length>0))return a._wrapper.hasClass("sui-hidden")||"none"==a._wrapper.css("display")?!1:!0;var c=b[0];c?a._wrapper.removeClass("sui-hidden"):a._wrapper.addClass("sui-hidden")},focus:function(){a(this._visibleInput).focus()},_value:function(){return this.element.attr.apply(this.element,["value"].concat([].slice.call(arguments)))},value:function(){var a=this,c=a.options,e=c.min,f=c.max,d=[].slice.call(arguments);if(!(d.length>0))return a._selectedDate;var b=d[0];return null==b||""===b||M(b)?(a._visibleInput.get(0).value="",a._selectedDate=null,a.calendar&&a.calendar.value(null),void((c.isTimePicker||c.isDateTimePicker)&&a.listBox&&a.listBox.clearSelection())):void((c.isTimePicker||!(b.getTime()<e.getTime()||b.getTime()>f.getTime()))&&(a._changeInputsValues(b),
a.calendar&&a.calendar.value(b),a._selectedDate=b,(c.isTimePicker||c.isDateTimePicker)&&a._selectValueInListBox(b)))},close:function(){var a=this,b=[].slice.call(arguments);a.options.isDateTimePicker?b.length>0&&("calendar"==b[0]&&(a._shouldShowPopup=!1,a._toggleCalendarVisibilityHandler()),"timeview"==b[0]&&(a._shouldShowPopup=!1,a._toggleListBoxVisibilityHandler())):(a._shouldShowPopup=!1,a._toggleCalendarVisibilityHandler())},open:function(){var a=this,b=[].slice.call(arguments);a.options.isDateTimePicker?b.length>0&&("calendar"==b[0]&&(a._shouldShowPopup=!0,a._toggleCalendarVisibilityHandler()),"timeview"==b[0]&&(a._shouldShowPopup=!0,a._toggleListBoxVisibilityHandler())):(a._shouldShowPopup=!0,a._toggleCalendarVisibilityHandler())},destroy:function(){var b=this;b.options.isTimePicker?(b._iconWrapper.off(d,b._toggleListBoxVisibility),b._toggleListBoxVisibility=null):b.options.isDateTimePicker?(b._iconWrapper.off(d,b._toggleListBoxVisibility),b._toggleListBoxVisibility=null,b._timeIconWrapper=null,b._iconWrapper.off(d,b._toggleCalendarVisibility),b._toggleCalendarVisibility=null):(b._iconWrapper.off(d,b._toggleCalendarVisibility),b._toggleCalendarVisibility=null),b._iconWrapper=null,b._popupIsOver=null,a(k).off(q+".shieldDatePicker"+b.getInstanceId()),a(b.element).css(f,"").insertAfter(b._wrapper),b._wrapper.remove(),b._wrapper=null,b._destroyCalendar(),b._destroyListBox(),b._shouldShowPopup=null,b._visibleInput.off(t,b._visibleInputFocused),b._visibleInput.off(e,b._visibleInputChanged),b._visibleInput.off(G,b._visibleInputBlured),b._visibleInputFocused=null,b._visibleInputChanged=null,b._visibleInputBlured=null,b._visibleInput=null,b._selectedDate=null,b._enabled=null,p.fn.destroy.call(b)},_destroyCalendar:function(){var a=this;a.calendar&&(a.calendar.off(e,a._calendarChange),a._calendarChange=null,a.calendar.element.off(q,a._popupMouseDown),a._popupMouseDown=null,a.calendar.destroy(),a.calendar=null,a._calendarWrapper&&a._calendarWrapper.remove())},_destroyListBox:function(){var a=this;a.listBox&&(a._selectedElement=null,a.listBox.off(e,a._listBoxChange),a._listBoxChange=null,a.listBox.destroy(),a.listBox=null,a._listBoxWrapper&&(a._listBoxWrapper.remove(),a._listBoxWrapper=null))}}),i.defaults=s,b.ui.plugin("DatePicker",i),F=r({},s,{isMonthYearPicker:!0,calendar:{view:{depth:h,start:h}},format:"{0:MMMM yyyy}",textTemplate:"{0:MMMM yyyy}",parseFormats:["MMMM yyyy"]}),A=i.extend({init:function(b,a){a&&(a.isMonthYearPicker=!0),i.prototype.init.call(this,b,a)}}),A.defaults=F,b.ui.plugin("MonthYearPicker",A),J=r({},s,{isTimePicker:!0,listBox:null,format:"{0:h:mm tt}",textTemplate:"{0:h:mm tt}",parseFormats:["h:mm tt"],interval:30,min:new Date(1900,0,1,0,0,0),max:new Date(1900,0,1,0,0,0),messages:{timeIconTooltip:"",buttonText:"select"}}),B=i.extend({init:function(b,a){a&&(a.isTimePicker=!0),i.prototype.init.call(this,b,a)}}),B.defaults=J,b.ui.plugin("TimePicker",B),D=r({},s,{isDateTimePicker:!0,listBox:null,format:"{0:MM/dd/yyyy h:mm tt}",textTemplate:"{0:MM/dd/yyyy h:mm tt}",parseFormats:["MM/dd/yyyy h:mm tt"],interval:30,min:new Date(1900,0,1,0,0,0),max:new Date(2099,11,31,0,0,0),messages:{calendarIconTooltip:"",timeIconTooltip:"",buttonText:"select"},timeFormat:"{0:h:mm tt}"}),y=i.extend({init:function(b,a){a&&(a.isDateTimePicker=!0),i.prototype.init.call(this,b,a)}}),y.defaults=D,b.ui.plugin("DateTimePicker",y)}(jQuery,shield,this);
!function(a,b,D,p){function la(a){var b,c=" ";if(a){if(J(a))return a;for(b in a)a.hasOwnProperty(b)&&(c+=b+'="'+a[b]+'"')}return c}function M(c,d){var b=a(c).attr(d);return e(b)&&b!==!1}function ea(){var b,d,e,c,f=[].slice.call(arguments),g=f.shift();for(c=0;c<f.length&&(b=a(g.target).closest(".sui-cell",f[c]),!b.length);c++);return b.length?(d=b[0].parentNode,e=b[0],null==d||null==e?null:{row:d,cell:e}):null}function ia(b){return b&&(a(b.row).hasClass(h)||a(b.cell).hasClass(h))}function ka(b,c){return a(b.target).closest(".sui-cell",c).length>0}function N(c){var b=a(c).find('.sui-checkbox:not(.sui-checkbox-disabled), .sui-radiobutton:not(.sui-radiobutton-disabled), .sui-input:not(.sui-input-disabled), .sui-combobox:not(.sui-combobox-disabled), .sui-dropdown:not(.sui-dropdown-disabled), .sui-listbox:not(.sui-listbox-disabled), .sui-switch:not(.sui-switch-disabled), a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex]:not([tabindex="-1"]), *[contenteditable]').filter(":visible").first();a(b).length>0&&a(b).focus()}var ma,ca=b.ui.Widget,o=b.Class,_a=b.DataSource,j=b.format,i=b.support,E=(b.exp,b.get),B=b.iid,k=(b.strid,b.Constants.KeyCode),u=b.is,y=u.func,J=u.string,Q=u.object,oa=u["boolean"],e=u.defined,Za=u.number,g=u.undefined,L=u["null"],v=b.to["int"],d=document,w=Math.abs,q=Math.min,m=Math.max,_=a.each,c=a.proxy,l=a.extend,da=(a.map,a.grep),V=a.inArray,Z=navigator.userAgent,Va=D.opera,I=/msie/i.test(Z)&&!Va,x=I&&7===d.documentMode,Ra=I&&8===d.documentMode,Qa=(I&&10===d.documentMode,8===d.documentMode,/AppleWebKit/.test(Z)),S=(/Firefox/.test(Z),"role"),fa="aria-sort",Y="aria-readonly",ab="ascending",Oa="descending",C="tabindex",X="true",G="height",Na="sui-selectable",h="sui-selected",Ca="change",Ka="focus",Ja="start",Ba="scroll",f="command",Ia="selectionChanging",ga="selectionChanged",Ha="selectstart",K="dataBound",ja="virtualRowsLoaded",W="keydown",t="mousedown",A="mousemove",H="mouseup",Ga="resize",n="click",Fa="dblclick",ra="sort",sa="detailCreated",ta="columnReorder",ua="columnResize",va="groupsReorder",wa="group",T="ungroup",U="editorCreating",ba="filterWidgetCreating",Ea="getCustomFilterValue",Pa="clearFilter",Da="expandButtonCreate",R="cancel",P="edit",qa="insert",O="save",ha="delete",$="error",Aa="collapse",za="expand",La="editWindowOpen",Ma="insertWindowOpen",z="display",s="none",F="@@custom",ya="sui-viewindex",r="sui-fieldname";ma={columns:[],rowHover:!0,scrolling:!1,paging:!1,columnReorder:!1,showHeader:!0,grouping:{showGroupHeader:!1,allowDragToGroup:!1,message:"Drag a column header here to group by a column"}};var Sa=o.extend({init:function(h,d){var b,i,c,f,e,g=this;for(g._grid=d,e=0;e<h.length;e++)b=h[e],i=b.position?b.position:"top",c=a('<div class="sui-toolbar"/>'),"top"===i?(f=d.element.find(".sui-toolbar"),f.length>0?a(f[0]).after(c):d.element.prepend(c)):(c.addClass("sui-toolbar-bottom"),c.appendTo(d.element)),b.template?g._initializeTemplate(b,c):b.buttons.length>0&&g._buildButtons(c,b)},_buildButtons:function(c,d){var a,e=this,b=d.buttons;for(a=0;a<b.length;a++)e._buildButton(b[a],c)},_buildButton:function(d,i){var h,j,e=this,g=d.commandName,f=d.click;b.ui.Button&&(h=a('<button type="button">'+d.caption+"</button>").appendTo(i),"insert"==g?f=e._insertButtonClicked:"save"==g?f=e._saveButtonClicked:"cancel"==g&&(f=e._cancelButtonClicked),j=new b.ui.Button(h,{cls:d.cls,events:{click:c(f,e._grid)}}))},_insertButtonClicked:function(o,n){var d,i,e,h,g,a=this,k=a.options,l=k.editing.insertNewRowAt,b=a.dataSource,j=(a._hasVirtualScrolling(),!1);if(n||(h=a.trigger(f,{commandName:qa,cancel:!1}),!h.cancel)){if(b.sort&&b.sort.length>0)return b.sort=[],a._sortingInProgress=!0,a.pager&&(b.skip=0,b.take=a.pager.pageSize(),a.pager.refresh(!0)),void b.read().always(c(a._toolbar._insertButtonClicked,a,o,!0));a._editingInProcess=!0,"pagebottom"===l?(e=m(0,a.contentTable.find(">tbody > tr").length-1),(!k.paging||a.pager&&!a.pager.hasNext())&&(e+=1,j=!0)):e=0,d=j?b.add({}):b.insertView(e,{});for(g in d.fields)d.fields.hasOwnProperty(g)&&(d.data[g]=null);a._editing._insertedItems.push(d),i=a.contentTable.find(">tbody > tr").eq(e),"popup"!=a.options.editing.mode?a._editing._putRowInEditMode(i,0):a._initializePopupForm(0,!0),a.trigger(qa)}},_saveButtonClicked:function(e){var b,c,a=this,d=a.contentTable.find(">tbody > tr > .sui-editable-cell");return d.length>0&&(b=d.get(0).parentNode.rowIndex,a._updateItem(b,null),a._errorDuringEdit)?void(a._errorDuringEdit=!1):(c=a.trigger(f,{commandName:O,cancel:!1}),void(c.cancel||(a.dataSource.save(),a.trigger(O))))},_cancelButtonClicked:function(c){var a=this,b=a.trigger(f,{commandName:R,cancel:!1});b.cancel||(a.dataSource.cancel(),a.trigger(R))},_initializeTemplate:function(d,b){var f=this,c=d.template;if(y(c)){var a=c.call(f._grid,b);e(a)&&!L(a)&&""!==a&&b.html(a)}else b.html(c)},destroy:function(){}}),Ta=o.extend({init:function(b,d){var a=this;a._grid=d,a.options=b,a._eventNS=".shieldGridEditing"+B(),a._editors={},a._insertedItems=[],b.enabled&&a._initEditing(),a._grid.dataSource.on($+a._eventNS,c(a._dsError,a))},_dsError:function(a){var b=this,c=b._editors[a.path];b._grid.trigger($,{type:a.type,path:a.path,value:a.value,editor:c,reason:a.reason}),b._errorDuringEdit=!0},_initEditing:function(){var b=this,h=b.options,e=h.event,f=b._eventNS;g(e)||("click"===e?b._grid.element.on(n+f,".sui-cell",c(b._editingTriggered,b)):"doubleclick"===e&&b._grid.element.on(Fa+f,".sui-cell",c(b._editingTriggered,b)),a(d).on(n+f,c(b._documentClicked,b)))},_editingTriggered:function(p){var k,j,c=this,h=p.target,e=a(p.target).parent(),d=e.get(0).rowIndex,l=c.options,o=l.mode,i=l.type,m=c._grid.dataSource,q=l.batch,r=c._grid.trigger(f,{commandName:P,cancel:!1,row:e,cell:h,index:c._grid._getRowIndex(e)});if(!r.cancel){if(q){if(k=c._grid.contentTable.find(">tbody > tr > .sui-editable-cell"),k.length>0){if(d=k.get(0).parentNode.rowIndex,"TR"!==e.get(0).nodeName.toUpperCase()||e.get(0).rowIndex==d&&"row"==i)return;var n=c._grid._updateItem(d,h);if(c._errorDuringEdit)return c._errorDuringEdit=!1,void(n=null);j=e.get(0).rowIndex,c._grid._putRowInViewMode(d,null),!c._grid._populateInsertedItem&&n&&n.length>0&&c._grid._renderUpdateMarkers(n,d),c._grid._populateInsertedItem=!1,j===d&&(h=c._grid.contentTable.find(">tbody > tr").eq(d).get(0).cells[h.cellIndex]),d=j}g(i)||"cell"===i?c._putCellInEditMode(h,d):"row"===i?c._putRowInEditMode(e,h.cellIndex):b.error("Invalid editing.type declaration. The editing.type must be 'row' or 'cell'.",l.dieOnError)}else if(m.tracker&&m.tracker.changes&&m.tracker.changes.added&&m.tracker.changes.added.length>0)"TR"!==e.get(0).nodeName.toUpperCase()||e.get(0).rowIndex==d&&"row"==i||m.cancel();else if(g(o)||"inline"===o){if(k=c._grid.contentTable.find(">tbody > tr > .sui-editable-cell"),k.length>0){if(d=k.get(0).parentNode.rowIndex,"TR"!==e.get(0).nodeName.toUpperCase()||e.get(0).rowIndex==d&&"row"==i)return;if(c._grid._updateItem(d,h),c._errorDuringEdit)return void(c._errorDuringEdit=!1);j=e.get(0).rowIndex,c._grid._closeAllEditedRows(),j===d&&(h=c._grid.contentTable.find(">tbody > tr").eq(d).get(0).cells[h.cellIndex]),d=j}g(i)||"cell"===i?c._putCellInEditMode(h,d):"row"===i?c._putRowInEditMode(e,h.cellIndex):b.error("Invalid editing.type declaration. The editing.type must be 'row' or 'cell'.",l.dieOnError)}c._grid.trigger(P,{row:e,cell:h,index:c._grid._getRowIndex(e)})}},_documentClicked:function(g){var e,c,b=this,h=b.options.batch,d=a(g.target);if(b._grid._editingInProcess||b._grid._preventClosingEditors)return void(b._grid._editingInProcess=!1);if(!(d.hasClass("sui-cell")||d.parents().hasClass("sui-cell")||d.parents().hasClass("sui-calendar")||d.parents().hasClass("sui-listbox"))&&(e=b._grid.contentTable.find(">tbody > tr > .sui-editable-cell"),e.length>0)){c=e.get(0).parentNode.rowIndex;var f=b._grid._updateItem(c,null);if(b._errorDuringEdit)return void(b._errorDuringEdit=!1);b._grid._putRowInViewMode(c,null),h&&!b._grid._populateInsertedItem&&f&&f.length>0&&b._grid._renderUpdateMarkers(f,c),b._grid._populateInsertedItem=!1}},_getColumnIndex:function(b){return b.cellIndex-a(b.parentNode).find(".sui-indent-cell, .sui-expand-cell, .sui-expand-cell-disabled, .sui-collapse-cell").length},_putCellInEditMode:function(a,i){var k,j,f,b=this,m=b._getColumnIndex(a),l=b._grid,g=l.dataSource,d=l.columns[m],c=!1;if(d&&d.field&&d.editable!==!1){if(g.group&&g.group.length>0)for(j=b._grid.contentTable.find(">tbody > tr > .sui-row, >tbody > tr > .sui-alt-row"),f=0;f<j.length;f++)if(j[f]==a.parentNode){i=f;break}if(k=g.editView(i).data,arguments.length>2?arguments[2]==m&&(c=!0):c=!0,d.editor)b._instantiateCustomEditor(d,a,k,i,c);else{var n=e(g.schema.options.fields)?g.schema.options.fields[d.field].type:String,h=E(k,d.field);switch(n){case Number:b._instantiateNumeric(a,h,c);break;case Date:b._instantiateDatePicker(a,h,c);break;case String:b._instantiateTextBox(a,h,c);break;case Boolean:b._instantiateCheckBox(a,h,c)}}N(a)}},_prepareCell:function(b){a(b).empty().addClass("sui-editable-cell")},_instantiateCustomEditor:function(h,c,i,j,k,e){var f,d,g,b=this;e?d=e:(f=b._getColumnIndex(c),d=b._grid.columns[f].field,b._prepareCell(c)),g=h.editor.call(b._grid,c,i,j,k),a(c).html(g),b._editors[d]="custom"},_instantiateNumeric:function(f,j,k,i){var g,e,h,d,c=this;i?d=i:(h=c._getColumnIndex(f),d=c._grid.columns[h].field,c._prepareCell(f)),e=a('<input name="'+d+'"/>'),e.appendTo(f);var m=c._grid.trigger(U,{field:d,options:{}}),n=l({},m.options,{value:j});b.ui.NumericTextBox&&(g=new b.ui.NumericTextBox(e,n),k&&g.focus(),c._editors[d]=g)},_instantiateDatePicker:function(f,j,k,i){var g,e,h,d,c=this;i?d=i:(h=c._getColumnIndex(f),d=c._grid.columns[h].field,c._prepareCell(f)),e=a('<input name="'+d+'"/>'),e.appendTo(f);var m=c._grid.trigger(U,{field:d,options:{}}),n=l({},m.options,{value:j});b.ui.DatePicker&&(g=new b.ui.DatePicker(e,n),k&&g.focus(),c._editors[d]=g)},_instantiateTextBox:function(f,j,k,i){var g,e,h,d,c=this;i?d=i:(h=c._getColumnIndex(f),d=c._grid.columns[h].field,c._prepareCell(f)),e=a('<input type="text" name="'+d+'"/>'),e.appendTo(f);var m=c._grid.trigger(U,{field:d,options:{}}),n=l({},m.options,{value:j,cls:"sui-input-textbox"});b.ui.TextBox&&(g=new b.ui.TextBox(e,n),k&&g.focus(),c._editors[d]=g)},_instantiateCheckBox:function(g,h,k,j){var e,f,i,d,c=this;j?d=j:(i=c._getColumnIndex(g),d=c._grid.columns[i].field,c._prepareCell(g)),f=a('<input type="checkbox" name="'+d+'"/>'),f.appendTo(g);var m=c._grid.trigger(U,{field:d,options:{}}),n=l({},m.options,{value:h});b.ui.CheckBox&&(e=new b.ui.CheckBox(f,n),k&&e.focus(),e.checked(h),c._editors[d]=e)},_putRowInEditMode:function(b,g){var d,c,e=this,f=b.find(".sui-cell");for(c=0;c<f.length;c++)e._putCellInEditMode(f[c],b.get(0).rowIndex,g-b.find(".sui-indent-cell, .sui-expand-cell, .sui-expand-cell-disabled, .sui-collapse-cell").length);N(b),d=b.find(".sui-edit"),d.length>0&&e._grid._changeEditColumnButtons(b.get(0).rowIndex,a(b.children(".sui-button-cell")[0]))},_destroyRow:function(f){var a,d,b=this,e=b._grid,g=e.contentTable.find(">tbody > tr").eq(f),c=e.columns;for(a=0;a<c.length;a++)d=b._editors[c[a].field],d&&(y(d.destroy)&&b._editors[c[a].field].destroy(),delete b._editors[c[a].field]);g.remove()},destroy:function(){var c,f,b=this,e=b._eventNS;if(b._grid.dataSource.off($+e),b._grid.element.off(e,".sui-cell"),a(d).off(n+e),b._editors)for(c=0;c<b._editors.length;c++)f=b._editors[c].editor.element(),b._editors[c].editor.destroy(),f.remove();b._errorDuringEdit=b.options=null}}),Ua=o.extend({init:function(a){var b=this;J(a)?(b.field=a,b.resizable=!0,b.sortable=!0,b.filterable=!0,b.editable=!0,b.visible=!0,b.locked=!1):Q(a)&&(b.field=a.field,b.title=a.title,b.format=a.format,b.width=a.width,b.minWidth=a.minWidth,b.maxWidth=a.maxWidth,b.resizable=e(a.resizable)?!!a.resizable:!0,b.attributes=a.attributes,b.headerAttributes=a.headerAttributes,b.headerTemplate=a.headerTemplate,b.columnTemplate=a.columnTemplate,b.footerTemplate=a.footerTemplate,b.groupFooterTemplate=a.groupFooterTemplate,b.buttons=a.buttons,b.editor=a.editor,b.customFilter=a.customFilter,b.sortable=e(a.sortable)?!!a.sortable:!0,b.filterable=e(a.filterable)?!!a.filterable:!0,b.editable=e(a.editable)?!!a.editable:!0,b.visible=e(a.visible)?!!a.visible:!0,b.locked=b.visible?!!a.locked:!1)},destroy:function(){var a=this;a.buttons&&(a.buttons.length=0),a.field=a.title=a.editor=a.editable=a.format=a.width=a.minWidth=a.maxWidth=a.resizable=a.attributes=a.headerAttributes=a.headerTemplate=a.buttons=a.customFilter=a.footerTemplate=a.groupFooterTemplate=a.sortable=a.filterable=a.visible=a.locked=a.columnTemplate=null}}),na=o.extend({options:{ns:".shieldGridColumnResizing",width:12,offset:6,min:12},init:function(b){var a=this;a.grid=b,a.options=l(!0,{},na.fn.options),a._eventNS=a.options.ns+B(),b.headerTable.on(A+a._eventNS,".sui-headercell",c(a._showHandle,a))},_showHandle:function(h){if(!this.resizing){var d=this,g=d.options,e=(d.grid,d.handle),f=h.pageX,b=d.params=d._params(a(h.currentTarget)),i=f>=b.offset.left&&f<=b.offset.left+g.offset&&b.headerIndex>0;b.isRtl&&(i=f>=b.offset.left+b.width-g.offset&&f<=b.offset.left+b.width&&b.headerIndex>0),i&&(b=d.params=d._params(b.header.prev())),b.column&&b.column.resizable&&!b.column.locked&&(f>=b.threshold&&f<=b.edge+g.offset?(e||(e=d.handle=a('<div class="sui-resizable-handle"/>').on(t+d._eventNS,c(d._down,d)).appendTo(b.header.parents(".sui-headercontent"))),e.css({top:b.position.top,left:e.parent()[0].scrollLeft+b.handleLeft,width:g.width,height:b.height}).show()):e&&e.hide())}},_params:function(a){var f=this,b=f.options,j=a.offset(),g=a.position(),d=i.isRtl(f.grid.element),e=a.outerWidth(),h=j.left+(d?b.width:e),l=a.index(),c=f.grid._getColumnByField(a.attr("data-field")),k=c?c.minWidth>=0?+c.minWidth:b.min:null,m=c&&c.maxWidth>=k?+c.maxWidth:null;return{header:a,headerIndex:l,column:c,min:k,max:m,offset:j,isRtl:d,width:e,current:e,height:a.outerHeight(),edge:h,threshold:h-b.width+(d?-1:1)*b.offset,position:g,handleLeft:g.left+(d?b.width:e)-b.width+(d?-1:1)*b.offset}},_down:function(h){var g,e=this,i=e.grid,f=e.params;if(!(h.button>1)&&f)return g="> colgroup col:nth-child("+(f.headerIndex+1)+")",f.origin=h.pageX,f.cols=a().add(i.headerTable.find(g)).add(i.contentTable.find(g)),e.resizing=!0,e._cancelled=null,e.handle.hide(),a(d).on(A+e._eventNS,c(e._move,e)).on(H+e._eventNS,c(e._up,e)),b.selection(!1),!1},_move:function(g){var e,b,d,c=this,a=c.params;if(c.resizing)return e=(a.isRtl?-1:1)*(g.pageX-a.origin),b=m(a.width+e,a.min),a.max&&(b=q(b,a.max)),d=c.grid.trigger(f,{commandName:ua,cancel:!1,field:a.column.field,width:b}),d&&d.cancel?void(c._cancelled=!0):void(b!==a.current&&(a.cols.width(a.current=b),c.grid._fixHeaderPadding(),c.grid._adjustHeightsLocked(!0)))},_up:function(){var c=this,e=c.grid,g=c.params,h=g.current,f=g.column||{},i=(e.options.columns||[])[a(e.columns).index(f)]||{};c.resizing=!1,c.params=null,f.width=i.width=h+"px",a(d).off(c._eventNS),b.selection(!0),c._cancelled!==!0&&e.trigger(ua,{field:f.field,width:h}),c._cancelled=null},destroy:function(){var a=this;a.grid.headerTable.off(a._eventNS),a._cancelled=null,a.handle&&(a.handle.off(a._eventNS).remove(),a.handle=null)}}),Wa=o.extend({init:function(b){var a=this;a.grid=b,a._filters={},a._eventNS=".shieldGridFiltering"+B(),a._createFilterRow()},_createFilterRow:function(){var h,o,g,k,i,b,f=this,j=f.grid,r=j.headerTable,m=r.find(">thead"),q=m.find(".sui-indent-cell").length,l=j.dataSource.schema,e=j.columns;for(f._tr=h=a('<tr class="sui-filter-row"/>'),b=0;q>b;b++)a('<th class="sui-indent-cell"/>').appendTo(h);for(l&&l.options.fields&&(i=l.options.fields),b=0;b<e.length;b++)o=i&&i[e[b].field]?i[e[b].field].type:null,g=e[b].field?e[b].field.replace(/[\"\']/g,"@"):"",k=a('<th class="sui-filter-cell" data-field="'+g+'" role="gridcell" tabindex="-1"/>').appendTo(h),e[b].filterable!==!1&&g.length>0&&(f._initializeEditor(k,o,e[b].field,e[b]),f._appendFilterButton(k));for(h.appendTo(m),a(d).on(n+f._eventNS,c(f._documentClicked,f)),b=0;b<e.length;b++)if(g=e[b].field?e[b].field.replace(/[\"\']/g,"@"):"",e[b].filterable!==!1&&g.length>0){var p=f._getFilter(e[b].field);p&&(f._setEditorValue(e[b].field,e[b],p.value),f._addRemoveFilterButton(e[b].field))}},_documentClicked:function(e){var c,f,d=this;if(d.listBox&&!a(e.target).hasClass("sui-filter-button")&&!a(e.target).hasClass("sui-filter-button-content")){var b=d.listBox.element.parent();if(b.css(z)==s)return;d._filterByField=null,c=b.height(),f=b.offset().top,d._slideUp?b.animate({height:0,top:f+c},150,function(){b.css({display:s,height:c})}):b.animate({height:0},150,function(){b.css({display:s,height:c})})}},_appendFilterButton:function(d){if(b.ui.Button){var e=a('<button type="button"><span class="sui-sprite sui-filter-button-content"/></button>').appendTo(d);new b.ui.Button(e,{cls:"sui-filter-button",events:{click:c(this._filterButtonClicked,this)}})}},_filterButtonClicked:function(f){var k,g,p,e=this,n=e.grid,m=n.dataSource.schema,i=n.options.filtering,o=i.stringFunc?i.stringFunc:[{func:"eq",name:"Equal to"},{func:"neq",name:"Not equal to"},{func:"con",name:"Contains"},{func:"notcon",name:"Not contains"},{func:"starts",name:"Starts with"},{func:"ends",name:"Ends with"},{func:"gt",name:"Greater than"},{func:"lt",name:"Less than"},{func:"gte",name:"Greater than or equal"},{func:"lte",name:"Less than or equal"},{func:"isnull",name:"Is null"},{func:"notnull",name:"Is not null"}],q=i.nonStingFunc?i.nonStingFunc:[{func:"eq",name:"Equal to"},{func:"neq",name:"Not equal to"},{func:"gt",name:"Greater than"},{func:"lt",name:"Less than"},{func:"gte",name:"Greater than or equal"},{func:"lte",name:"Less than or equal"},{func:"isnull",name:"Is null"},{func:"notnull",name:"Is not null"}],h=f.target.element.parent().attr("data-field").replace(/[@]/g,"'");if(e._filterByField=h,m&&m.options.fields){var j=m.options.fields;k=j&&j[h]&&j[h].type===String?o:q}else k=o;b.ui.ListBox&&(e.listBox||(e._menuWrapper=a('<div style="display:none;"/>').appendTo(d.body),e.listBox=new b.ui.ListBox(e._menuWrapper,l({},{},{dataSource:{data:k},textTemplate:"{name}",valueTemplate:"{func}",multiple:!1,width:150,maxHeight:300,events:{select:c(e._selectFilterFunction,e)}})),e.grid.element.parent().hasClass("sui-rtl")?e.listBox.element.parent().addClass("sui-rtl"):e.listBox.element.parent().css(z,s)),g=e.listBox.element.parent().height(),e._positionListBox(f),e._slideUp?(p=f.target.element.offset().top-g,e.listBox.element.parent().css({top:f.target.element.offset().top}),e.listBox.element.parent().animate({height:g,top:p-e.listBox.element.parent().innerHeight()},150)):e.listBox.element.parent().animate({height:g},150)),e._selectFilterMenuValue(h)},_getFilter:function(e){var b,d,a,f=this,c=f.grid.dataSource.filter;if(c&&c.and&&c.and.length>0)for(b=c.and,a=0;a<b.length;a++)b[a].path===e&&(d=b[a]);return d},_selectFilterMenuValue:function(d){var a=this,b=a._getFilter(d),c=b?b.filter:p;c?a.listBox.values(c):a.listBox.clearSelection()},_selectFilterFunction:function(i){var c,g,a=this,h=!0,b=a._filters[a._filterByField]==F?F:a._filters[a._filterByField].value(),d=i.item.func,e={path:a._filterByField,filter:d,value:b};if(b==F&&(g=a.grid.trigger(Ea,{field:a._filterByField,value:null}),b=g.value,e={path:a._filterByField,filter:d,value:b}),""!==b&&null!==b||"notnull"==d||"isnull"==d){if(a.grid.dataSource.filter&&a.grid.dataSource.filter.and){c=a.grid.dataSource.filter.and;for(var f=0;f<c.length;f++)c[f].path===a._filterByField&&(c[f]=e,h=!1);h&&c.push(e)}else a.grid.dataSource.filter={and:[e]};a.grid.dataSource.read(),a._addRemoveFilterButton(a._filterByField)}},_addRemoveFilterButton:function(h){var e,d,g,i=this;if(b.ui.Button){e=a(i._tr).children("th");for(var f=0;f<e.length;f++)if(d=a(e[f]),d.attr("data-field")&&d.attr("data-field").replace(/[@]/g,"'")==h){g=e[f];break}if(d&&0===d.find(".sui-clear-filter-button").length){var j=a('<button type="button"><span class="sui-sprite sui-clear-filter-button-content"></span></button>').appendTo(g);new b.ui.Button(j,{cls:"sui-clear-filter-button",events:{click:c(this._clearFilterButtonClicked,this)}})}}},_clearFilterButtonClicked:function(d){var f,a,b=this,c=d.target.element.parent().attr("data-field").replace(/[@]/g,"'"),e=b.grid.dataSource.filter.and;for(a=0;a<e.length;a++)e[a].path==c&&e.splice(a,1);f=d.target.element,d.target.destroy(),f.remove(),b._filters[c]!=F?b._filters[c].value(null):b.grid.trigger(Pa,{field:c,value:null}),b.grid.dataSource.read()},_positionListBox:function(i){var a=this,d=i.target.element,e=d.offset(),b=e.top,c=e.left,g=a.listBox.element.parent().innerWidth(),h=a.listBox.element.parent().innerHeight(),f=(d.innerWidth(),d.innerHeight());0>c&&(c=1),c+g>D.innerWidth&&(c=D.innerWidth-g-20),a._slideUp=!1,b+h>D.innerHeight&&(b-=h,f=0,a._slideUp=!0),0>b&&(b=e.top,f=d.innerHeight(),a._slideUp=!1),a.listBox.element.parent().css({position:"absolute",zIndex:10002,top:b+f,left:c,height:0,display:""})},_setEditorValue:function(b,c,d){var a,e=this;c.customFilter||(a=e._filters[b],a&&a.value(d))},_initializeEditor:function(b,e,c,d){var a=this;if(d.customFilter)a._filters[c]=F,d.customFilter.call(a,b);else switch(e){case Number:a._instantiateNumeric(b,c);break;case Date:a._instantiateDatePicker(b,c);break;case String:a._instantiateTextBox(b,c);break;default:a._instantiateTextBox(b,c)}},_instantiateNumeric:function(f,c){var d,e=this,g=a("<input/>").appendTo(f),h=e.grid.trigger(ba,{field:c,options:{}}),i=l({},h.options);b.ui.NumericTextBox&&(d=new b.ui.NumericTextBox(g,i),e._filters[c]=d)},_instantiateDatePicker:function(f,c){var d,e=this,g=a("<input/>").appendTo(f),h=e.grid.trigger(ba,{field:c,options:{}}),i=l({},h.options);b.ui.DatePicker&&(d=new b.ui.DatePicker(g,i),e._filters[c]=d)},_instantiateTextBox:function(f,c){var d,e=this,g=a('<input type="text"/>').appendTo(f),h=e.grid.trigger(ba,{field:c,options:{}}),i=l({},h.options);b.ui.TextBox&&(d=new b.ui.TextBox(g,i),e._filters[c]=d)},destroy:function(){var c,b=this;for(c in b._filters)b._filters.hasOwnProperty(c)&&(b._filters[c]!=F&&b._filters[c].destroy(),b._filters[c]=null);b.listBox&&(b.listBox.destroy(),b.listBox=null),a(b._menuWrapper).remove(),a(b._tr).remove(),a(d).off(n+b._eventNS),b._filterByField=b._filters=b._slideUp=b._menuWrapper=b._tr=null}}),Xa=o.extend({init:function(b,c){var a=this;a.grid=c,a.sortExpressions=[],a._eventNS=".shieldGridSorting"+B(),oa(b)?(a.allowUnsort=!0,a.multiple=!1,a.firstAscending=!0,a.ascText="&#9650;",a.descText="&#9660;"):Q(b)&&(a.allowUnsort=g(b.allowUnsort)?!0:b.allowUnsort,a.multiple=b.multiple,a.firstAscending=g(b.firstAscending)?!0:b.firstAscending,a.ascText=g(b.ascText)?"&#9650;":b.ascText,a.descText=g(b.descText)?"&#9660;":b.descText),a._initialize()},destroy:function(){var b=this,c=b.grid.headerTable;b.allowUnsort=b.multiple=b.sortExpressions=null,b.length=0,c.find(".sui-headercell .sui-link").each(function(){a(this).parent().html(a(this).html())}),c.off(b._eventNS),c.find('.sui-headercell span[class^="sui-"]').remove()},_initialize:function(){var f,d,h,b=this,e=b.grid,i=e.dataSource.sort,g=e.columns,p={},q=e.headerTable.find(".sui-headercell");if(q.each(function(){var c,b=a(this),d=b.attr("data-field"),f=e._getColumnByField(d);p[d]=b,f&&f.sortable!==!1&&(c=b.html(),b.empty(),b.removeAttr(fa),a('<a href="#" class="sui-link sui-unselectable" unselectable="on" tabindex="-1"/>').appendTo(b).html(c))}),e.headerTable.on(n+b._eventNS,".sui-link",c(b._clickHandler,b)),i)for(f=0;f<i.length;f++)for(h=i[f],d=0;d<g.length;d++)if(g[d].sortable!==!1&&h.path==g[d].field){var l=a(p[g[d].field]),m=l.find(".sui-link"),j=ab,k="sui-asc",o=b.ascText;h.desc&&(j=Oa,o=b.descText,k="sui-desc"),a(l).attr(fa,j),m.addClass(k),a('<span class="sui-'+j+'">'+o+"</span>").appendTo(m)}},_clickHandler:function(e){var b=this,d=a(e.target).closest(".sui-link"),f=b.grid,c=f._getColumnByField(d.parent().attr("data-field"));return d.hasClass("sui-desc")?b.allowUnsort&&b.firstAscending?b._sortInternal(c,!0,!0):b._sortInternal(c,!1,!1):d.hasClass("sui-asc")?b.allowUnsort&&!b.firstAscending?b._sortInternal(c,!1,!0):b._sortInternal(c,!0,!1):b.firstAscending?b._sortInternal(c,!1,!1):b._sortInternal(c,!0,!1),!1},_sortInternal:function(c,b,d){var g=this,e=g.grid,h=e.dataSource,a=h.sort,j=e.trigger(f,{commandName:ra,cancel:!1,column:c,desc:b,unsort:d});if(!j.cancel){if(a){if(!g.multiple&&a)a.length=0;else{var i=da(a,function(a){return a.path===c.field&&a.desc===(d?b:!b)});if(i.length>0){var k=V(i[0],a);a.splice(k,1)}}d||a.push({path:c.field,desc:b})}else d||(a=h.sort=[{path:c.field,desc:b}]);e._refreshOnSort(),e.trigger(ra,{column:c,desc:b,unsort:d})}},_sort:function(b,e,g){var c,d,k=this,f=k.grid,j=f.dataSource,a=j.sort;if(a&&(c=da(a,function(a){return a.path===b&&a.desc===e})),!c||c.length<=0)if(!k.multiple&&a&&(a.length=0),a){var h=!1,i=da(a,function(a){return a.path===b&&a.desc!=e});i&&i.length>0&&(d=V(i[0],a),a.splice(d,1),h=!0),g||(a.push({path:b,desc:e}),h=!0),h&&f._refreshOnSort()}else g||(j.sort=[{path:b,desc:e}],f._refreshOnSort());else g&&(d=V(c[0],a),a.splice(d,1),f._refreshOnSort())}}),Ya=o.extend({init:function(f,g){var h,b=this;h=b._eventNS=".shieldGridSelection"+B(),oa(f)?(b.type="row",b.multiple=!1,b.toggle=!1,b.spreadsheet=!0,b.drawArea=!1,b.disableTextSelection=!1,b._selectOnMouseDown=!1):Q(f)&&(b.type=f.type?f.type:"row",b.multiple=!!f.multiple,b.toggle=e(f.toggle)?f.toggle:!1,b.spreadsheet=e(f.spreadsheet)?f.spreadsheet:!0,b.drawArea=e(f.drawArea)?f.drawArea:f.multiple,b.disableTextSelection=e(f.disableTextSelection)?f.disableTextSelection:!1,b._selectOnMouseDown=!b.drawArea&&f.selectEvent==t),b.grid=g,b.lastSelected=null,a(g.headerTable).add(g.frozenHeaderTable).addClass("sui-non-selectable"),a(g.contentTable).add(g.frozenContentTable).addClass(Na),a(g.contentTable).add(g.frozenContentTable).on(t+h,c(b._mouseDownHandler,b)).on(A+h,c(b._mouseMoveHandler,b)),a(d).on(H+h,c(b._mouseUpHandler,b)),I&&a(g.contentTable).add(g.frozenContentTable).on(Ha+h,function(){return!1}),b.multiple&&b.drawArea&&(b.area=a(d.createElement("span")).addClass("sui-area sui-area-color"))},destroy:function(){var b=this,c=b._eventNS,e=b.grid;a(e.contentTable).add(e.frozenContentTable).off(c),a(d).off(c),b.area&&b.area.remove(),b.type=b.multiple=b.lastSelected=b.toggle=b.spreadsheet=b.area=b.x=b.y=b.elements=null},select:function(g){var d,c,e,b,f=this;{if(!g)return f.grid.contentTable.find("."+h);if(d=a(g),c=d.length,c>0)for(b=0;c>b;b++)e=a(d.get(b)),f._selectElement(e),b==c-1&&(f.lastSelected=e)}},clear:function(){var a=this;"row"==a.type?a._clearSelectedRows():a._clearSelectedCells()},_getParentTable:function(a){return a?"TABLE"==a[0].nodeName.toUpperCase()?a[0]:a.parent()?this._getParentTable(a.parent()):void 0:void 0},_mouseDownHandler:function(g){var e=this,h=e.grid,i=g.pageX,j=g.pageY,f=a(g.target),k=e._getParentTable(f);e.x=i,e.y=j,("TD"!=f[0].nodeName.toUpperCase()||k==a(h.contentTable)[0]||k==a(h.frozenContentTable)[0])&&(!(f.hasClass("sui-cell")||f.hasClass("sui-row")||f.hasClass("sui-alt-row")||ka(g,h.contentTable)||ka(g,h.frozenContentTable))||f.hasClass("sui-detail-cell")||f.hasClass("sui-detail-row")||f.hasClass("sui-collapse-cell")||f.hasClass("sui-expand-cell")||f.hasClass("sui-expand-cell-disabled")||f.hasClass("sui-indent-cell")||(e.multiple&&e.drawArea&&e.area.appendTo(d.body).css({left:i+1,top:j+1,width:0,height:0}),a(d).on(A+e._eventNS,c(e._mouseMoveHandler,e)),(e.drawArea||e.disableTextSelection)&&b.selection(!1),e.elements=ea(g,h.contentTable,h.frozenContentTable),e.elements&&e._selectOnMouseDown&&!ia(e.elements)&&e._performAndProcessSelection(g)))},_mouseMoveHandler:function(d){var a=this,b=d.pageX,c=d.pageY,e=a.x,f=a.y,g={left:e>b?b:e,top:f>c?c:f,width:w(b-a.x),height:w(c-a.y)};a.multiple&&a.drawArea&&a.area.css(g)},_mouseUpHandler:function(f){var c=this,e=c.area;a(d).off(A+c._eventNS),(c.drawArea||c.disableTextSelection)&&b.selection(!0),!c.elements||c._selectOnMouseDown&&!ia(c.elements)||c._performAndProcessSelection(f),e&&e.remove()},_performAndProcessSelection:function(k){var c,g,i,d,b=this,e=b.grid,o=b.area,n=b.elements,m=k.ctrlKey,h=[],j=[],l=[];if(i=e.trigger(f,{commandName:Ia,cancel:!1}),i.cancel)return void(b.elements=null);for(b.elementsToBeSelected=[],"row"==b.type?b._performRowSelection(o,m,n,k):b._performCellSelection(o,m,n,k),d=0;d<b.elementsToBeSelected.length;d++)c=b.elementsToBeSelected[d],!(c.hasClass("sui-cell")||c.hasClass("sui-row")||c.hasClass("sui-alt-row"))||c.hasClass("sui-detail-cell")||c.hasClass("sui-detail-row")||c.hasClass("sui-collapse-cell")||c.hasClass("sui-expand-cell")||c.hasClass("sui-expand-cell-disabled")||c.hasClass("sui-indent-cell")||(h.push(c),g=e._getRowIndex("row"==b.type?c:a(c).parent()),j.push(g),l.push(g>=0?e.dataSource.getDataIndex(g):g));if(i=e.trigger(f,{commandName:ga,cancel:!1,toBeSelected:h,viewIndices:j,indices:l}),!i.cancel){for(d=0;d<h.length;d++)b._selectElement(h[d]);e.trigger(ga,{selected:h,viewIndices:j,indices:l}),b.elements=null}},_performRowSelection:function(e,f,d,b){var c=this;if(!(a(b.target).hasClass("sui-expand-cell")||a(b.target).hasClass("sui-expand-cell-disabled")||a(b.target).hasClass("sui-collapse-cell")||a(b.target)&&a(b.target).parent()&&(a(b.target).parent().hasClass("sui-expand-cell")||a(b.target).parent().hasClass("sui-expand-cell-disabled")||a(b.target).parent().hasClass("sui-collapse-cell"))))if(!c.drawArea||b.type===W||e&&0===e.height()&&0===e.width())c.multiple?c._processMultiRowSelection(b,d):c._processSingleRowSelection(b,d);else if(c.multiple){var h=c.grid.contentTable.find(">tbody > tr"),g=null;_(h,function(f,c){var d=a(c),e=d.offset().top;e<b.pageY&&(g=c.rowIndex)}),f||c._clearSelectedRows(),c._selectRowRange(d.row.rowIndex,g,f)}else c._processSingleRowSelection(b,d)},_performCellSelection:function(f,i,g,b){var c=this;if(!(a(b.target).hasClass("sui-expand-cell")||a(b.target).hasClass("sui-expand-cell-disabled")||a(b.target).hasClass("sui-collapse-cell")||a(b.target)&&a(b.target).parent()&&(a(b.target).parent().hasClass("sui-expand-cell")||a(b.target).parent().hasClass("sui-expand-cell-disabled")||a(b.target).parent().hasClass("sui-collapse-cell"))))if(!c.drawArea||b.type===W||f&&0===f.height()&&0===f.width())c.multiple?c._processMultiCellSelection(b,g):c._processSingleCellSelection(b,g);else if(c.multiple){var d,j=c.grid.contentTable.find(">tbody > tr > td"),e=[];for(_(j,function(u,j){var d=a(j),r=d.get(0).clientWidth,t=d.get(0).clientHeight,g=d.offset().top,h=d.offset().left,o=g+t,n=h+r,k=q(b.pageX,c.x),p=m(b.pageX,c.x),l=q(b.pageY,c.y),s=m(b.pageY,c.y),i=!1,f=!1;l>g?o>l&&(i=!0):s>g&&(i=!0),k>h?n>k&&(f=!0):p>h&&(f=!0),i&&f&&e.push(j)}),i||c._clearSelectedCells(),d=0;d<e.length;d++){var k=a(e[d]);k.hasClass(h)?c._deselectElement(a(e[d])):c.elementsToBeSelected.push(a(e[d]))}}else c._processSingleCellSelection(b,g)},_selectRowRange:function(e,f,g){var b,c,d=this,i=q(e,f),j=m(e,f),k=d.grid.contentTable.find(">tbody > tr");for(b=i;j>=b;b++)c=a(k[b]),g&&c.hasClass(h)?d._deselectElement(c):d.elementsToBeSelected.push(c)},_clearSelectedRows:function(){var b=this,c=b.grid;a(c.frozenContentTable).find("> tbody > tr."+h).each(function(){b._deselectElement(a(this))}),a(c.contentTable).find("> tbody > tr."+h).each(function(){b._deselectElement(a(this))})},_clearSelectedCells:function(){var b=this,c=b.grid;a(c.frozenContentTable).find(">tbody > tr > td."+h).each(function(){b._deselectElement(a(this))}),a(c.contentTable).find(">tbody > tr > td."+h).each(function(){b._deselectElement(a(this))})},_processSingleRowSelection:function(i,d){var b=this,e=b.toggle,f=b.multiple,c=a(d.row),g=c.hasClass(h);f||b._clearSelectedRows(),e?g?b._deselectElement(c):b.elementsToBeSelected.push(c):(b._clearSelectedRows(),b.elementsToBeSelected.push(c)),b.lastSelected=c},_processMultiRowSelection:function(f,i){var b=this,g=b.grid,n=f.ctrlKey,r=f.shiftKey,c=a(i.row);if(n)c.hasClass(h)?(b._deselectElement(c),b.lastSelected=c):(b.elementsToBeSelected.push(c),b.lastSelected=c);else if(r){g.contentTable.find(">tbody > tr."+h);
if(b.lastSelected){var s=b.lastSelected,d=s.get(0).rowIndex,j=g.contentTable.find(">tbody > tr"),k=c.get(0).rowIndex,o=q(k,d),p=m(k,d);b._clearSelectedRows();for(var e=o;p>=e;e++)if(e!==d){var l=a(j[e]);b.elementsToBeSelected.push(l)}b.elementsToBeSelected.push(a(j[d]))}else b.elementsToBeSelected.push(c),b.lastSelected=c}else b._processSingleRowSelection(f,i)},_processSingleCellSelection:function(i,d){var b=this,e=b.toggle,f=b.multiple,c=a(d.cell),g=c.hasClass(h);b.lastSelected;f||b._clearSelectedCells(),e?g?b._deselectElement(c):b.elementsToBeSelected.push(c):(b._clearSelectedCells(),b.elementsToBeSelected.push(c)),b.lastSelected=c},_processMultiCellSelection:function(i,w){var b=this,u=b.grid,x=i.ctrlKey,A=i.shiftKey,c=a(w.cell);if(x)c.hasClass(h)?(b._deselectElement(c),b.lastSelected=c):(b.elementsToBeSelected.push(c),b.lastSelected=c);else if(A)if(b.lastSelected){var d,k=b.lastSelected,s=u.contentTable.get(0),p=s.rows[0].cells.length,n=k.parent().get(0).rowIndex,e=n*p+k.get(0).cellIndex,r=u.contentTable.find(">tbody > tr > td"),l=c.parent().get(0).rowIndex,t=l*p+c.get(0).cellIndex,g=q(t,e),j=m(t,e);if(b._clearSelectedCells(),b.spreadsheet){var o=k[0].cellIndex,v=c[0].cellIndex;g=q(o,v),j=m(o,v);var y=q(n,l),z=m(n,l);for(d=y;z>=d;d++){var f,B=s.rows[d];for(f=g;j>=f;f++)b.elementsToBeSelected.push(a(B.cells[f]))}}else for(d=g;j>=d;d++)if(d!==e){var C=a(r[d]);b.elementsToBeSelected.push(C)}b.elementsToBeSelected.push(a(r[e]))}else b.elementsToBeSelected.push(c),b.lastSelected=c;else b._processSingleCellSelection(i,w)},_selectElement:function(a){a.addClass(h)},_deselectElement:function(a){a.removeClass(h)}}),xa=o.extend({options:{ns:".shieldGridGroupReorder",returnDuration:50,returnEasing:"ease-out",dragTreshold:20,draggedTemplate:"<div style='border-color:transparent;' class='sui-grid sui-grid-core'><div class='sui-group-panel-indicator'><span class='sui-group-title'>{0}</span><span class='sui-group-close-button'></span></div></div>"},init:function(b){var a=this;a.grid=b,a.options=l(!0,{},xa.fn.options),a._eventNS=a.options.ns+B(),a._events(!0)},_events:function(d){var a=this,b=a.grid.element;d?(a._downProxy=c(a._down,a),b.on(t+a._eventNS,".sui-group-panel-indicator",a._downProxy)):(b.off(t+a._eventNS,".sui-group-panel-indicator",a._downProxy),a._downProxy=null)},_down:function(g){var e=this,f=a(g.target).closest(".sui-group-panel-indicator"),j=f.offset(),h=e.grid.element,k=h.offset(),l=g.pageX,m=g.pageY;return e.dataField=f.attr("data-field"),g.button>1?void 0:(e._moveProxy=c(e._move,e),e._upProxy=c(e._up,e),a(d).on(A+e._eventNS,e._moveProxy).on(H+e._eventNS,e._upProxy),e.start={left:l-j.left,top:m-j.top,x:l,y:m,target:f,index:f.parent().find(".sui-group-panel-indicator").index(f),positions:e._positions(f),gridPosition:{left:k.left,top:k.top,width:h.outerWidth(),height:h.outerHeight()},isRtl:i.isRtl(h)},b.selection(!1),!1)},_move:function(g){var c=this,h=c.options,i=c.dragged,b=c.start,e=g.pageX,f=g.pageY,k=h.dragTreshold;i?(i.css({left:e-b.left,top:f-b.top}),c.hovered=c._index(e,f),c._indicator()):(w(b.x-e)>k||w(b.y-f)>k)&&(c.dragged=a(j(h.draggedTemplate,b.target.html())).css({position:"absolute",left:e-b.left,top:f-b.top,zIndex:999}).find("table").css("width","auto").end().find("th").attr("style",b.target[0].style.cssText).css({width:b.target.width(),height:b.target.height()}).end().appendTo(d.body))},_positions:function(f){var a,c,d=f.parent().children(".sui-group-panel-indicator"),b=0,e=[];for(b;b<d.length;b++)a=d.eq(b),c=a.offset(),e.push({left:c.left,top:c.top,width:a.outerWidth(),height:a.outerHeight()});return e},_index:function(d,e){var a,c,g,h,f=this.start,b=f.gridPosition;for(c=0;c<f.positions.length;c++)if(a=f.positions[c],g=a.left<=d&&d<=a.left+a.width&&a.top<=e&&e<=a.top+a.height,h=b.left<=d&&d<=b.left+b.width&&b.top<=e&&e<=b.top+b.height,g&&h)return c;return-1},_indicator:function(){var h,f=this,b=f.start,c=f.hovered,g=b.positions[c],e=f.reorderIndicator,j=b.gridPosition.left,k=b.gridPosition.left+b.gridPosition.width,i=b.target.parent().children(".sui-group-panel-indicator"),l=b.isRtl?b.index<c:b.index>c;i.removeClass("sui-reorder-target"),e&&e.hide(),null!=c&&c>-1&&(i.eq(c).addClass("sui-reorder-target"),e||(e=f.reorderIndicator=a("<div class='sui-grid-reorder-indicator'><span class='sui-grid-indicator-top' /><span class='sui-grid-indicator-bottom' /></div>").appendTo(d.body)),c!==b.index&&(h=g.left+(l?0:g.width),e.css({left:q(m(j,h),k),top:g.top,height:g.height}).show()))},_up:function(q){var e,c=this,o=c.options,g=c.grid,l=c.dragged,n=c.start,h=c.hovered,m=c.dataField;if(c._detachDocumentEvents(),l)if(null!=h&&h>-1){if(l.remove(),e=g.trigger(f,{commandName:va,cancel:!1,index:n.index,newIndex:h}),!e.cancel)for(var j=g.dataSource.group,k=0;k<j.length;k++)if(j[k].field==m){var p=j[k];j[k]=j[h],j[h]=p;break}}else setTimeout(function(){l.remove()},i.transitions?o.returnDuration:0),c.grid.dataSource.group&&(e=g.trigger(f,{commandName:T,cancel:!1,field:m}),e.cancel||(c.grid.ungroup(m),g.trigger(T,e)));c.dragged=c.dataField=c.hovered=h=null,c._indicator(),c.reorderIndicator&&(c.reorderIndicator.remove(),c.reorderIndicator=null),c.start=null,a(d).off(c._eventNS),b.selection(!0),e&&!e.cancel&&(delete e.cancel,delete e.commandName,g.dataSource.read(),g.trigger(va,e))},_detachDocumentEvents:function(){var b=this;b._moveProxy=b._upProxy=null,a(d).off(b._eventNS)},destroy:function(){var a=this;a.dataField=null,a._detachDocumentEvents(),a._events(!1)}}),$a=o.extend({options:{ns:".shieldGridColumnGroupReorder",returnDuration:150,returnEasing:"ease-out",dragTreshold:20,draggedTemplate:"<div class='sui-grid sui-grid-core'><div class='sui-gridheader'><table class='sui-table'><thead><tr class='sui-columnheader'><th class='sui-headercell'>{0}</th></tr></thead></table></div></div>"},init:function(b){var a=this;a.grid=b,a.options=l(!0,{},aa.fn.options),a._eventNS=a.options.ns+B(),a._events(!0),b.headerTable.addClass("sui-reorderable")},_events:function(d){var a=this,b=a.grid.element;d?(a._downProxy=c(a._down,a),b.on(t+a._eventNS,".sui-headercell",a._downProxy)):(b.off(t+a._eventNS,".sui-headercell",a._downProxy),a._downProxy=null)},_down:function(f){var e=this,g=a(f.target).closest(".sui-headercell"),n=g.offset(),h=e.grid.element,o=h.offset(),l=f.pageX,m=f.pageY;if(!(f.button>1)){var p=g.attr("data-field"),k=e.grid.dataSource.group;if(k)for(var j=0;j<k.length;j++)if(p===k[j].field)return;return a(d).on(A+e._eventNS,c(e._move,e)).on(H+e._eventNS,c(e._up,e)),e.start={left:l-n.left,top:m-n.top,x:l,y:m,target:g,index:1e3,positions:e._positions(g),gridPosition:{left:o.left,top:o.top,width:h.outerWidth(),height:h.outerHeight()},isRtl:i.isRtl(h)},b.selection(!1),!1}},_move:function(g){var c=this,h=c.options,i=c.dragged,b=c.start,e=g.pageX,f=g.pageY,k=h.dragTreshold;i?(i.css({left:e-b.left,top:f-b.top}),c.hovered=c._index(e,f),c._indicator()):(w(b.x-e)>k||w(b.y-f)>k)&&(c.dragged=a(j(h.draggedTemplate,b.target.html())).css({position:"absolute",left:e-b.left,top:f-b.top,zIndex:999}).find("table").css("width","auto").end().find("th").attr("style",b.target[0].style.cssText).css({width:b.target.width(),height:b.target.height()}).end().appendTo(d.body))},_positions:function(f){var a,b,d=this.grid.element.find(".sui-group-panel-indicator"),c=0,e=[];for(c;c<d.length;c++)a=d.eq(c),b=a.offset(),e.push({left:b.left,top:b.top,width:a.outerWidth(),height:a.outerHeight()}),c==d.length-1&&e.push({left:b.left,top:b.top,width:a.outerWidth(),height:a.outerHeight()});return e},_index:function(b,c){var d,f,i,h,j,g=this.start,e=g.gridPosition,a=this.grid.element.find(".sui-group-panel");if(g.positions.length>0){for(f=0;f<g.positions.length;f++)if(d=g.positions[f],i=d.left<=b&&b<=d.left+d.width&&d.top<=c&&c<=d.top+d.height,j=e.left<=b&&b<=e.left+e.width&&e.top<=c&&c<=e.top+e.height,h=a.offset().left<=b&&b<=a.offset().left+a.width()&&a.offset().top<=c&&c<=a.offset().top+a.height(),i&&j)return f}else h=a.offset().left<=b&&b<=a.offset().left+a.width()&&a.offset().top<=c&&c<=a.offset().top+a.height();return h?(this.isOnGroupPanel=!0,this.grid.element.find(".sui-group-panel-indicator").length):-1},_indicator:function(){var h,f=this,b=f.start,c=f.hovered,g=b.positions[c],e=f.reorderIndicator,j=b.gridPosition.left,l=b.gridPosition.left+b.gridPosition.width,k=b.target.parent().children(".sui-group-panel-indicator"),i=b.isRtl?b.index<c:b.index>c;k.removeClass("sui-reorder-target"),e&&e.hide(),null!=c&&c>-1&&(k.eq(c).addClass("sui-reorder-target"),e||(e=f.reorderIndicator=a("<div class='sui-grid-reorder-indicator'><span class='sui-grid-indicator-top' /><span class='sui-grid-indicator-bottom' /></div>").appendTo(d.body)),this.isOnGroupPanel&&(i=!1),g?(h=g.left+(i?0:g.width),this.isOnGroupPanel=null,e.css({left:q(m(j,h),l),top:g.top,height:g.height}).show()):(h=j+(i?b.gridPosition.width:0),this.isOnGroupPanel=null,e.css({left:h,top:b.gridPosition.top,height:f.grid.element.find(".sui-group-panel-empty").outerHeight()}).show()))},_up:function(o){var e,c=this,m=c.options,k=c.grid,l=c.dragged,g=c.start,h=c.hovered;if(l)if(l.css({left:g.x-g.left,top:g.y-g.top,transition:j("left {0} {1}ms, top {0} {1}ms",m.returnEasing,m.returnDuration)}),null!=h&&h>-1){l.remove();var n=g.target.attr("data-field");e=k.trigger(f,{commandName:wa,cancel:!1,field:n,index:h}),e.cancel||k.group(n,h,"asc")}else setTimeout(function(){l.remove()},i.transitions?m.returnDuration:0);c.dragged=c.hovered=h=null,c._indicator(),c.reorderIndicator&&(c.reorderIndicator.remove(),c.reorderIndicator=null),c.start=null,a(d).off(c._eventNS),b.selection(!0),e&&!e.cancel&&(delete e.cancel,delete e.commandName,k.dataSource.read(),k.trigger(wa,e))},destroy:function(){this._events(!1),this.grid.headerTable.removeClass("sui-reorderable")}}),aa=o.extend({options:{ns:".shieldGridColumnReorder",returnDuration:150,returnEasing:"ease-out",dragTreshold:20,draggedTemplate:"<div class='sui-grid sui-grid-core'><div class='sui-gridheader'><table class='sui-table'><thead><tr class='sui-columnheader'><th class='sui-headercell'>{0}</th></tr></thead></table></div></div>"},init:function(b){var a=this;a.grid=b,a.options=l(!0,{},aa.fn.options),a._eventNS=a.options.ns+B(),a._events(!0),b.headerTable.addClass("sui-reorderable")},_events:function(d){var a=this,b=a.grid.element;d?(a._downProxy=c(a._down,a),b.on(t+a._eventNS,".sui-headercell",a._downProxy)):(b.off(t+a._eventNS,".sui-headercell",a._downProxy),a._downProxy=null)},_down:function(g){var e=this,f=a(g.target).closest(".sui-headercell"),j=f.offset(),h=e.grid.element,k=h.offset(),l=g.pageX,m=g.pageY;if(!(g.button>1))return a(d).on(A+e._eventNS,c(e._move,e)).on(H+e._eventNS,c(e._up,e)),e.start={left:l-j.left,top:m-j.top,x:l,y:m,target:f,index:f.parent().find(".sui-headercell").index(f),positions:e._positions(f),gridPosition:{left:k.left,top:k.top,width:h.outerWidth(),height:h.outerHeight()},isRtl:i.isRtl(h)},b.selection(!1),!1},_move:function(g){var c=this,h=c.options,i=c.dragged,b=c.start,e=g.pageX,f=g.pageY,k=h.dragTreshold;i?(i.css({left:e-b.left,top:f-b.top}),c.hovered=c._index(e,f),c._indicator()):(w(b.x-e)>k||w(b.y-f)>k)&&(c.dragged=a(j(h.draggedTemplate,b.target.html())).css({position:"absolute",left:e-b.left,top:f-b.top,zIndex:999}).find("table").css("width","auto").end().find("th").attr("style",b.target[0].style.cssText).css({width:b.target.width(),height:b.target.height()}).end().appendTo(d.body))},_positions:function(f){var a,c,d=f.parent().children(".sui-headercell"),b=0,e=[];for(b;b<d.length;b++)a=d.eq(b),c=a.offset(),e.push({left:c.left,top:c.top,width:a.outerWidth(),height:a.outerHeight()});return e},_index:function(d,e){var a,c,g,h,f=this.start,b=f.gridPosition;for(c=0;c<f.positions.length;c++)if(a=f.positions[c],g=a.left<=d&&d<=a.left+a.width&&a.top<=e&&e<=a.top+a.height,h=b.left<=d&&d<=b.left+b.width&&b.top<=e&&e<=b.top+b.height,g&&h)return c;return-1},_indicator:function(){var h,f=this,b=f.start,c=f.hovered,g=b.positions[c],e=f.reorderIndicator,j=b.gridPosition.left,k=b.gridPosition.left+b.gridPosition.width,i=b.target.parent().children(".sui-headercell"),l=b.isRtl?b.index<c:b.index>c;i.removeClass("sui-reorder-target"),e&&e.hide(),null!=c&&c>-1&&(i.eq(c).addClass("sui-reorder-target"),e||(e=f.reorderIndicator=a("<div class='sui-grid-reorder-indicator'><span class='sui-grid-indicator-top' /><span class='sui-grid-indicator-bottom' /></div>").appendTo(d.body)),c!==b.index&&(h=g.left+(l?0:g.width),e.css({left:q(m(j,h),k),top:g.top,height:g.height}).show()))},_up:function(n){var e,c=this,l=c.options,m=c.grid,k=c.dragged,g=c.start,h=c.hovered;k&&(k.css({left:g.x-g.left,top:g.y-g.top,transition:j("left {0} {1}ms, top {0} {1}ms",l.returnEasing,l.returnDuration)}),null!=h&&h>-1?(k.remove(),e=m.trigger(f,{commandName:ta,cancel:!1,index:g.index,newIndex:h}),e.cancel||m.reorderColumn(g.index,h)):setTimeout(function(){k.remove()},i.transitions?l.returnDuration:0)),c.dragged=c.hovered=h=null,c._indicator(),c.reorderIndicator&&(c.reorderIndicator.remove(),c.reorderIndicator=null),c.start=null,a(d).off(c._eventNS),b.selection(!0),e&&!e.cancel&&(delete e.cancel,delete e.commandName,m.trigger(ta,e))},destroy:function(){this._events(!1),this.grid.headerTable.removeClass("sui-reorderable")}}),pa=ca.extend({init:function(){ca.fn.init.apply(this,arguments);var a=this;a._eventNS=".shieldGrid"+a.getInstanceId(),a.refresh()},destroy:function(){this._destroyInternal(),ca.fn.destroy.call(this)},_destroyInternal:function(){var c,e,f,b=this,g=b.options,d=b._eventNS;if(b.contentWrapper){if(b._markedCells){for(e in b._markedCells)b._markedCells.hasOwnProperty(e)&&(b._markedCells[e].length=0);b._markedCells=null}if(a(D).off(d),b._destroyFrozenContainers(),b.sorting&&(b.sorting.destroy(),b.sorting=null),b.virtualizedContainer&&(b.virtualizedContainer.destroy(),b.virtualizedContainer=null),b.columns)for(c=0;c<b.columns.length;c++)b.columns[c].destroy();if(b.contentWrapper&&b.contentWrapper.off(Ba),b.scrollableWrapper=null,b._selectable&&(b._selectable.destroy(),b._selectable=null),g.scrolling?(b.contentWrapper.parent().remove(),b.headerWrapper.parent().remove()):(b.contentWrapper.remove(),b.headerWrapper.remove()),b._hasDetailTemplate()&&b.contentTable.off(d),b.popupWindow&&b.popupWindow.destroy(),b._footer&&(a(b._footer).remove(),b._footer=null),b.columns=b._gridColumns=b._windowEditingIndex=b.contentWrapper=b.headerWrapper=b.contentTable=b.hederTable=null,b._buttons){for(c=0;c<b._buttons.length;c++)f=b._buttons[c].button.element,b._buttons[c].button.destroy(),f.remove();b._buttons.length=0}b.pager&&(b.pager.destroy(),b.pager=null,b.pagerWrapper&&(b.pagerWrapper.parent().remove(),b.pagerWrapper=null)),b.loadingPanel&&(b.loadingPanel=null,clearTimeout(b.loadingPanelTimeout),b.loadingPanelTimeout=null),b._columnResizing&&(b._columnResizing.destroy(),b._columnResizing=null),b._toolbar&&(b._toolbar.destroy(),b._toolbar=null),b._editing&&(b._editing.destroy(),b._editing=null),b._columnReorder&&(b._columnReorder.destroy(),b._columnReorder=null),b._sortingInProgress=b._loadingVirtualRows=b._scrollLeft=b._scrollTop=b._populateInsertedItem=b._preventClosingEditors=b._editingInProcess=null,b._filter&&(b._filter.destroy(),b._filter=null),b._groupReorder&&(b._groupReorder.destroy(),b._groupReorder=null),b._columnGroupReorder&&(b._columnGroupReorder.destroy(),b._columnGroupReorder=null),b.dataSource.off(d),b.element.off(d).removeClass("sui-grid sui-grid-core").css(G,"").empty()}},_resizeHandler:function(){var a=this;a._adjustWidthsLocked(),a._adjustHeightsLocked()},_hasDetailTemplate:function(){var a=this.options;return a.detailTemplate||a.events&&a.events.detailCreated},_hasVirtualScrolling:function(){var a=this.options;return a.scrolling&&a.scrolling.virtual&&!a.paging&&!this._hasDetailTemplate()},_canExpandCollapse:function(){return this.options.detailExpandCollapse!==!1},_resolveColumns:function(d){var a,c=this;if(c.columns=[],u.array(d))for(a=0;a<d.length;a++)c.columns.push(new Ua(d[a]));else b.error("Invalid columns declaration. The columns have to be array.",c.options.dieOnError);for(c._gridColumns={},a=0;a<c.columns.length;a++)c._gridColumns[c.columns[a].field]={index:a}},_createWrappers:function(){var c,d,b=this,e=b.element;b._wrapper(),c=a("<div/>").prependTo(e),c.addClass("sui-gridcontent"),d=a("<div/>").prependTo(e),d.addClass("sui-gridheader"),b.options.showHeader||(d.css(z,s),c.addClass("sui-no-header")),b.headerWrapper=d,b.contentWrapper=c},_wrapper:function(){var b=this.options.height,a=this.element;a.is("div")||(a=a.wrap("<div/>").parent()),a.addClass("sui-grid sui-grid-core"),a&&a.css(G,b)},_createGroupPanel:function(){var e,h,f,c,b=this,g=b.options.grouping,i=!1,d=b.dataSource;if(f=b.element.find(".sui-group-panel"),f.length>0&&f.remove(),g.showGroupHeader)if(d.group&&0!==d.group.length){for(e=a('<div class="sui-group-panel"/>'),a(b.element).prepend(e),c=0;c<d.group.length;c++)h=d.group[c],b._createGroupHeaderIndicator(h,e),i=!0;i&&g.allowDragToGroup&&(b._groupReorder&&b._groupReorder.destroy(),b._groupReorder=new xa(b),b._columnGroupReorder&&b._columnGroupReorder.destroy(),b._columnGroupReorder=new $a(b))}else a(b.element).prepend(a('<div class="sui-group-panel sui-group-panel-empty">'+g.message+"</div>"))},_createGroupHeaderIndicator:function(e,h){var f,g,d,b=this;d=a('<div class="sui-group-panel-indicator" data-field="'+e.field+'"/>').appendTo(h),g="desc"==e.order?a('<span class="sui-descending">&#9660;</span>').appendTo(d):a('<span class="sui-ascending">&#9650;</span>').appendTo(d),a('<span class="sui-group-title">'+e.field+"</span>").appendTo(d),b.options.grouping.allowDragToGroup&&(f=a('<span class="sui-group-close-button">&#10006;</span>').appendTo(d),f.on(n,b._closeButtonClicked=c(b._closeButtonClickedHandler,b))),g.on(n,c(b._sortButtonClickedHandler,b))},_sortButtonClickedHandler:function(f){for(var d=this,e=a(f.currentTarget),g=e.parent().attr("data-field"),c=d.dataSource.group,b=0;b<c.length;b++)c[b].field==g&&(e.hasClass("sui-descending")?c[b].order="asc":c[b].order="desc",d.dataSource.read())},_closeButtonClickedHandler:function(e){var c,b=this,g=a(e.currentTarget),d=g.parent().attr("data-field");b.dataSource.group&&(c=b.trigger(f,{commandName:T,cancel:!1,field:d}),c.cancel||(b.ungroup(d),b.trigger(T,c)))},_createHeaderTable:function(){var c=this,d=c.headerWrapper,b=c.element;b.is("table")||(b=d.children("table"),b.length||(b=a("<table/>").appendTo(d))),x&&b.attr("cellspacing",0),b.addClass("sui-table"),c.headerTable=b,c._createTbody(b,!0),c._createThead(b),c._createFakeRow(b,c.columns.length)},_createContentTable:function(){var b=this,f=b.options,e=b.contentWrapper,d=b.element;d.is("table")||(d=e.children("table"),d.length||(d=a("<table/>").appendTo(e))),x&&d.attr("cellspacing",0),d.addClass("sui-table"),f.rowHover&&d.addClass("sui-hover"),b._hasDetailTemplate()&&(b._canExpandCollapse()&&d.addClass("sui-expandable"),d.on(n+b._eventNS,"> tbody > tr > .sui-expand-cell, > tbody > tr > .sui-collapse-cell",c(b._expandCollapseDetailTemplate,b))),b.contentTable=d,b._createTbody(b.contentTable,!1)},_createTbody:function(c,d){var b=c.find("> tbody");b.length||(b=a("<tbody/>").appendTo(c)),d&&b.addClass("sui-hide"),c.tbody=b},_createThead:function(g){var d,i,b,c,j,m,h=this,e=(h.options,h.columns),k="",f=g.find(">thead");for(f.length||(f=a("<thead/>").insertBefore(g.tbody)),b=g.find("tr:has(th):first"),b.length||(b=f.children().first(),b.length||(b=a("<tr/>").appendTo(f))),b.attr(S,"row"),b.empty(),d=0,i=e.length;i>d;d++)c=e[d],j=c.headerTemplate||c.title||c.field||c,m=e[d].sortable?!0:!1,k+="<th "+la(c.headerAttributes)+' data-field="'+e[d].field+'" role="columnheader"'+(m?' tabindex="-1"':"")+">"+j+"</th>";if(b.html(k),b.addClass("sui-columnheader"),b.find("th").addClass("sui-headercell"),e.length&&h._hasDetailTemplate()&&h._canExpandCollapse()){var l=a('<th class="sui-indent-cell"/>');x&&l.html("&nbsp;"),l.prependTo(b)}g.thead=f},_createFakeRow:function(e,f){var b,c,d=e.find(">tbody");if(d.length){for(b=a("<tr/>"),c=0;f>c;c++)a("<td/>").appendTo(b);b.appendTo(d)}},_createColgroup:function(g){var c,h,b,e=this,i=e.options,f=e.columns,d=g.find(">colgroup");for(d.length||(d=a("<colgroup/>").prependTo(g)),d.html(""),i.columns.length&&e._hasDetailTemplate()&&e._canExpandCollapse()&&a('<col class="sui-indent-col"/>').appendTo(d),c=0,h=f.length;h>c;c++)b=f[c].width,a(b&&0!==parseInt(b,10)?j('<col style="width:{0}"/>',J(b)?b:b+"px"):"<col/>").data(r,f[c].field).appendTo(d)},scrollTop:function(c){var b=this,g=b.options,h=g.scrolling,d=b._hasVirtualScrolling(),f=b.contentWrapper;if(h)if(e(c))d?b.virtualizedContainer&&b.virtualizedContainer.scrollTop(c):a(f).scrollTop(c);else{if(!d)return a(f).scrollTop();if(b.virtualizedContainer)return b.virtualizedContainer.scrollTop()}},_scrolling:function(){var v,f,t,b=this,j=b.options,g=a(b.element),z=(i.isRtl(g),b.dataSource),k=b._hasVirtualScrolling(),h=b.headerWrapper,d=b.contentWrapper,l=h.outerHeight(),u=!(k||"auto"!==j.height&&e(j.height)),m=!k&&e(j.maxHeight)?parseInt(j.maxHeight,10):p,n=0,o=0,q=0;if(h.parent().hasClass("sui-gridheader sui-scrolldiv")?l=h.parent().outerHeight():(h.addClass("sui-headercontent").removeClass("sui-gridheader"),h.wrap('<div class="sui-gridheader sui-scrolldiv"/>'),d.addClass("sui-content").removeClass("sui-gridcontent"),d.wrap('<div class="sui-gridcontent sui-scroller"/>'),x&&(b.headerTable.addClass("sui-table-ie7").removeClass("sui-table"),b.contentTable.addClass("sui-table-ie7").removeClass("sui-table")),t=b.scrollableWrapper=k?d.parent():d,t.on(Ba,c(b._onscroll,b))),b.pagerWrapper&&(n=b.pagerWrapper.outerHeight()),b._toolbar){var r,w=g.find(".sui-toolbar"),s=0;for(r=0;r<w.length;r++)s+=a(w[0]).outerHeight();o+=s+1}var y=g.find(".sui-group-panel");y.length>0&&(q+=y.outerHeight()),u?f="auto":(v=g.innerHeight(),f=v-l-n-o-q),a(d).add(d.parent()).css(G,f),m&&m<g.innerHeight()&&(f=m-l-n-o-q,a(d).add(d.parent()).css(G,f)),k?(b._ensureVirtualizedContainer(),b.virtualizedContainer.options.total=z.total,b.virtualizedContainer.render(),b._fixHeaderPadding(b.virtualizedContainer.wrapper.parent())):(b._fixHeaderPadding(d),u||!I||x||Ra||i.hasScrollbarX(d)||d.css(G,f+1))},_fixHeaderPadding:function(f){var d=this,e=i.isRtl(d.element),b=d.headerWrapper,c=a(f).get(0);c&&(c.scrollHeight-c.clientHeight>1?(b.parent().css(e?"padding-left":"padding-right",i.scrollbar()-1),b.removeClass("sui-no-y-scroll")):(b.parent().css(e?"padding-left":"padding-right",0),b.addClass("sui-no-y-scroll")))},_ensureVirtualizedContainer:function(){var d,e,a=this;a.virtualizedContainer||(d=a._renderRow(0,a.contentTable.tbody,{}),e=d.outerHeight(),d.remove(),a.virtualizedContainer=new b.ui.VirtualizedContainer(a.scrollableWrapper,{itemHeight:e,total:a.dataSource.total,createContainer:function(b){return b.addClass("sui-content").append(a.contentTable).find("tbody").empty()},getItems:c(a._loadVirtualRows,a),skipRender:!0}),a.contentWrapper=a.virtualizedContainer.element.children().eq(0))},_loadVirtualRows:function(d,e,g){var a=this,b=a.dataSource,h=null!=b.skip?b.skip:0,i=null!=b.take?b.take:b.view.length,j=100,f=a.virtualizedContainer.container;if(e>d)if(!a._sortingInProgress&&b.remote&&(h>d||e>=h+i))clearTimeout(a._loadWaitTimeout),a._loadWaitTimeout=setTimeout(function(c,d,e){return function(){a._loadWaitTimeout=null,b.skip=c,b.take=d-c,a._loadingVirtualRows=!0,b.one(Ca+".shieldGrid"+a.getInstanceId(),function(){a._loadWaitTimeout||(a._loadingVirtualRows=!1)}),b.read().then(function(){if(!a._loadWaitTimeout){f.empty();for(var g=c;d>g&&g<b.total;g++)a._renderRow(g-c,f,b.view[g-c]);a.loading(!1),e([],!1),a.trigger(ja)}})}}(d,e,g),j);else{f.empty();for(var c=d;e>c&&c<b.total;c++)a._renderRow(c,f,b.view[c]);g([],!1),a.trigger(ja)}else a._renderNoRecords();a._checkIfVerticalScroll(),a._initSelection()},_checkIfVerticalScroll:function(){var a=this,b=a.element.find(".sui-virtualized").get(0),c=a.element.get(0),d=b.scrollHeight>c.scrollHeight;d?(a.headerWrapper.parent().css("padding-right","16px"),a.headerWrapper.removeClass("sui-grid-no-gap")):(a.headerWrapper.parent().css("padding-right","0px"),a.headerWrapper.addClass("sui-grid-no-gap"))},_onscroll:function(l){var e,b=this,f=b.scrollableWrapper,c=f.get(0),g=b.headerWrapper,d=f.scrollLeft(),j=g.scrollLeft();if(i.isRtl(b.element)&&Qa&&c.clientHeight<c.scrollHeight&&(d+=c.offsetWidth-c.clientWidth),d!=j&&(g.scrollLeft(d),b._footer&&(e=a(b._footer).find(".sui-footer-content"),e.length>0&&e.scrollLeft(d))),b.frozenHeaderWrapper){var h=f.scrollTop(),k=b.frozenContentWrapper.scrollTop();h!=k&&b.frozenContentWrapper.scrollTop(h)}},_sorting:function(){var a=this,b=a.options.sorting;a.element;b&&a.columns.length&&(a.sorting&&a.sorting.destroy(),a.sorting=new Xa(b,a))},_renderData:function(){var c,e,a=this,d=a.dataSource.view,b=a.options;b.scrolling,g(b.altRows)?!0:b.altRows,b.rowTemplate,b.altRowTemplate,a.contentTable;a._loadingVirtualRows||(e=a.trigger(f,{commandName:K,cancel:!1}),e.cancel||(a._sortingInProgress=!1,a.columns.length||(c=[],d.length&&_(d[0],function(a,b){c.push(a)}),b.columns=c,a._resolveColumns(c)),a._filtering(),a._destroyFrozenContainers(),a._createThead(a.headerTable),a._createColgroup(a.headerTable),a._createColgroup(a.contentTable),a.contentTable.tbody.empty(),a._sorting(),a._renderRows(),a._renderFooter(),a._refreshColVisibility(),d&&d.length>0&&a._initFrozenCols(),a._initSelection(),a.loading(!1),a.trigger(K)))},_renderRows:function(){var h,e,g,m,i,j,f,c,b=this,k=b.options,l=b.dataSource,d=l.view,n=k.filtering&&k.filtering.enabled;if(b._markedCells){for(g in b._markedCells)b._markedCells.hasOwnProperty(g)&&(b._markedCells[g].length=0);b._markedCells=null}if(!d||!d.length)return b._renderNoRecords(),void b._initScrolling();if(!b._hasVirtualScrolling()||b._sortingInProgress)if(e=l.group,e&&e.length>0){for(m=0,b._renderGroupedData(d,m,0),i=b.headerTable.find(">colgroup").first(),j=b.contentTable.find(">colgroup").first(),f=b.headerTable.thead.find(".sui-columnheader").first(),n&&(c=b.headerTable.find(".sui-filter-row").first()),i.find(".sui-indent-col").remove(),f.find(".sui-columnheader > .sui-indent-cell").remove(),c&&c.length>0&&c.find(".sui-indent-cell").remove(),h=0;h<e.length;h++)a('<col class="sui-indent-col"/>').prependTo(i),a('<th class="sui-indent-cell"/>').prependTo(f),c&&c.length>0&&a('<th class="sui-indent-cell"/>').prependTo(c),a('<col class="sui-indent-col"/>').prependTo(j);b._addAllIndentCells(),b.contentTable.addClass("sui-grouped-table")}else b._renderRowsAndDetails(d);b._createGroupPanel(),b._initScrolling()},_getVisibleColumnCount:function(){var a,b=this.columns||[],d=b.length,c=0;for(a=0;d>a;a++)b[a].visible&&c++;return c},_renderNoRecords:function(){var b=this,c=b.options,d=b.contentTable;g(c.noRecordsTemplate)?a('<tr><td class="sui-grid-norecords-cell" colspan="'+b._getVisibleColumnCount()+'" role="gridcell">'+(c.noRecordsText||"No records to display")+"</td></tr>").appendTo(d.tbody):a('<td class="sui-grid-norecords-cell" colspan="'+b._getVisibleColumnCount()+'" role="gridcell"/>').append(c.noRecordsTemplate).wrap("<tr/>").parent().appendTo(d.tbody)},_initScrolling:function(){var a=this;a.options.scrolling&&!a._sortingInProgress&&a._scrolling()},_initSelection:function(){this._selection()},_addAllIndentCells:function(){var d,b,c,e,g=this,f=g.contentTable.get(0).rows;for(d=0;d<f.length;d++)if(c=a(f[d]),e=parseInt(c.attr("data-group-level"),10),c.hasClass("sui-group-header")){if(e>1)for(b=0;e-1>b;b++)a("<td class='sui-indent-cell'/>").prependTo(c)}else for(b=0;e>b;b++)a("<td class='sui-indent-cell sui-group-intend-cell'/>").prependTo(c)},_renderGroupedData:function(f,e,b){var d,a,c=this;for(c.options.detailExpandCollapse=!1,d=0;d<f.length;d++)a=f[d],a.hasOwnProperty("field")&&a.hasOwnProperty("items")&&a.hasOwnProperty("value")?(b++,c._renderGroupHeader(a,b),c._renderGroupedData(a.items,e,b),c._renderGroupAggregates(a),b--):(c._renderDataItem(a,e,b),e++)},_renderGroupAggregates:function(n){if(n.aggregate){var k,g,o,b,i,f=this,h=f.columns,l={},d=n.aggregate;for(b=0;b<h.length;b++)if(g=h[b].groupFooterTemplate){k=a("<tr class='sui-group-footer' />").appendTo(f.contentTable.tbody);break}if(k){for(b=0;b<h.length;b++)if(i=a("<td class='sui-group-footer-cell' />").appendTo(k),g=h[b].groupFooterTemplate){o=h[b].field;for(var c=0;c<d.length;c++)d[c].field==o&&(y(d[c].aggregate)?l.custom=d[c].value:l[d[c].aggregate]=d[c].value);if(y(g)){var m=g.call(f,i,l);e(m)&&!L(m)&&""!==m&&i.html(m)}else i.html(j.call(f,g,l))}var p=f.dataSource.group.length;for(b=0;p>b;b++)k.prepend(a("<td class='sui-indent-cell' />"))}}},_renderGroupHeader:function(d,e){var b=this,g=b.contentTable,h=b._getVisibleColumnCount()+b.dataSource.group.length-e+1,i=a('<tr class="sui-group-header" data-group-level="'+e+'"/>').appendTo(g),f=a('<td class="sui-group-header-cell" colspan="'+h+'"/>').appendTo(i),j=a('<span class="sui-collapse">&#9662;</span>').appendTo(f);a('<span class="sui-group-header-text">'+d.field+": "+d.value+"</span>").appendTo(f),j.on(n,c(b._expandCollapseHandler,b))},_expandCollapseHandler:function(g){var e,b=this,c=a(g.currentTarget),d=c.parent().parent();c.hasClass("sui-collapse")?(e=b.trigger(f,{commandName:Aa,cancel:!1,row:d}),e.cancel||(b.collapseGroup(d),c.html("&#9656;"),c.removeClass("sui-collapse").addClass("sui-expand"),b.trigger(Aa,{row:d}))):(e=b.trigger(f,{commandName:za,cancel:!1,row:d}),e.cancel||(b.expandGroup(d),c.html("&#9662;"),c.removeClass("sui-expand").addClass("sui-collapse"),b.trigger(za,{row:d})))},_renderDataItem:function(b,c,d){var a=this,e=a.contentTable;a._renderRow(c,e,b).attr("data-group-level",d)},_renderRowsAndDetails:function(c){var d,a,b=this,e=b.contentTable;for(a=0,d=c.length;d>a;a++)b._renderRow(a,e.tbody,b.dataSource.view[a]),b._hasDetailTemplate()&&!b._canExpandCollapse()&&b._addDetailTemplate(c[a])},_renderRow:function(m,l,h){var r,b,w,q,c=this,x=e(l),k=c.options,F=g(k.altRows)?!0:k.altRows,n=F&&m%2&&k.altRowTemplate?k.altRowTemplate:k.rowTemplate,G=c.columns;if(n)J(n)&&(n=n.replace(/^\s+/,"").replace(/\s+$/,"")),b=a(j(n,h)),x&&l.append(b);else{if(b=a('<tr class="'+(F&&m%2?"sui-alt-row":"sui-row")+'"/>').data(ya,m),arguments.length>3){var A=arguments[3],B=l.find("tr"),H=B.eq(A);B.length==A?l.append(b):b.insertBefore(H)}else x&&l.append(b);for(q=0;q<G.length;q++){var o,p,i=G[q],t=i.columnTemplate,D=i.format,v=i.field,u=i.buttons,d=a("<td "+la(i.attributes)+' role="gridcell" tabindex="-1"/>').addClass("sui-cell").appendTo(b);if(d.attr(S,"gridcell").attr(C,"-1"),i.editable||d.attr(Y,X),u)for(p=0;p<u.length;p++)c._buildButton(u[p],d,m);else t?y(t)?(o=t.call(c,d,h,m),e(o)&&!L(o)&&""!==o&&d.html(o)):d.html(j.call(c,t,h)):D?d.html(j.call(c,D,v?E(h,v):h)):d.html(""+E(h,v));i.visible||d.css(z,s)}}return c._hasDetailTemplate()&&c._canExpandCollapse()&&(w=c.trigger(f,{commandName:Da,cancel:!1,item:h}),w.cancel?r=a('<td class="sui-cell sui-expand-cell-disabled"/>'):(r=a('<td class="sui-cell sui-expand-cell"/>'),c._setExpandCollapseCellText(r,k.detailExpandText,k.detailCollapseText)),r.prependTo(b)),b.attr(S,"row"),b},_renderFooter:function(){var k,i,h,t,d,c,m,b=this,p=b.options,g=b.columns,n={},f=b.dataSource.aggregates;for(b._footer&&(a(b._footer).remove(),b._footer=null),d=0;d<g.length;d++)if(h=g[d].footerTemplate){if(p.scrolling&&p.scrolling.virtual){var q=a('<div class="sui-footer" style="padding-right:16px;"/>').appendTo(b.element),u=a('<div class="sui-footer-content"/>').appendTo(q),r=a('<table class="sui-table"/>').appendTo(u),s=b.element.find(".sui-headercontent > table > colgroup > col"),v=a("<colgroup/>").appendTo(r);for(c=0;c<s.length;c++)a(s[c].outerHTML).appendTo(v);k=a("<tbody/>").appendTo(r),b._footer=q}else k=a("<tfoot/>").appendTo(b.contentTable),b._footer=k;i=a('<tr class="sui-grid-footer"/>').appendTo(k);break}if(i){for(d=0;d<g.length;d++)if(m=a('<td class="sui-footer-cell" role="gridcell" tabindex="-1"/>').appendTo(i),h=g[d].footerTemplate){for(t=g[d].field,c=0;c<f.length;c++)f[c].field==t&&(y(f[c].aggregate)?n.custom=f[c].value:n[f[c].aggregate]=f[c].value);if(y(h)){var l=h.call(b,m,n);e(l)&&!L(l)&&""!==l&&m.html(l);
}else m.html(j.call(b,h,n))}var o=i.prev();(o.find(".sui-expand-cell").length>0||o.find(".sui-expand-cell-disabled").length>0||o.find(".sui-indent-cell").length>0||o.find(".sui-collapse-cell").length>0)&&i.prepend(a("<td/>"))}},_buildButton:function(d,h,j){var k,e=this,f=d.commandName,i=d.click;if(b.ui.Button){var l=a('<button type="button">'+d.caption+"</button>").appendTo(h);h.addClass("sui-button-cell"),"delete"===f?(i=e._deleteButtonClicked,g(d.cls)?d.cls="sui-delete":d.cls+=" sui-delete"):"edit"===f&&(e._editing&&(e._editing.type="row"),e._preventClosingEditors=!0,i=e._editButtonClicked,g(d.cls)?d.cls="sui-edit":d.cls+=" sui-edit"),k=new b.ui.Button(l,{cls:d.cls,events:{click:c(i,e,j,h)}}),("delete"==f||"edit"==f)&&(e._buttons||(e._buttons=[]),e._buttons.push({index:j,button:k}))}},_deleteButtonClicked:function(a,h){var g,b=this,e=b.dataSource,c=b.options.editing,d=c?c.confirmation:null;if(g=b.trigger(f,{commandName:ha,cancel:!1,rowIndex:a}),!g.cancel){if(d&&d["delete"]&&d["delete"].enabled&&!D.confirm(j(d["delete"].template,e.view[a])))return;e.removeAtView(a),c&&!c.batch&&e.save(!1),b.trigger(ha,{rowIndex:a})}},_editButtonClicked:function(i,d){var c=this,g=c._editing,e=c.dataSource,h=a(d).parent(),j=c.trigger(f,{commandName:P,cancel:!1,row:h,cell:d,index:c._getRowIndex(h)});j.cancel||(c._editingInProcess=!0,e.tracker&&e.tracker.changes&&e.tracker.changes.added&&e.tracker.changes.added.length>0?e.cancel():"popup"!=c.options.editing.mode?(c._closeAllEditedRows(),g&&g.options.enabled&&g._putRowInEditMode(h),c._changeEditColumnButtons(i,d)):b.ui.Window&&c._initializePopupForm(i),c.trigger(P,{row:a(d).parent(),cell:d,index:c._getRowIndex(a(d).parent())}))},_initializePopupForm:function(r,o){var s,h,n,k,g,f=this,i=f._editing,m=f.dataSource;for(s=a('<div class="sui-modal-popup-edit-window"/>').appendTo(d.body),h=a('<div class="sui-edit-form-container"/>'),n=f.options.columns,k=0;k<n.length;k++)if(g=n[k],g.editable!==!1&&g.field){var t=e(m.schema.options.fields)?m.schema.options.fields[g.field].type:String,q=m.editView(r).data,l=E(q,g.field);f._windowEditingIndex=r,a('<div class="sui-edit-form-label"><label for="'+g.field+'">'+(g.caption?g.caption:g.field)+"</label></div>").appendTo(h);var j=a('<div class="sui-edit-field"></div>').appendTo(h);if(g.editor)i._instantiateCustomEditor(g,j,q,0,!1,g.field);else switch(t){case Number:i._instantiateNumeric(j,l,!1,g.field);break;case Date:i._instantiateDatePicker(j,l,!1,g.field);break;case String:i._instantiateTextBox(j,l,!1,g.field);break;case Boolean:i._instantiateCheckBox(j,l,!1,g.field)}}var p=a('<div class="sui-update-buttons sui-popup-buttons"></div>').appendTo(h),u=a("<button type='button'>Save</button>").appendTo(p),v=a("<button type='button'>Cancel</button>").appendTo(p);if(b.ui.Button){var w=new b.ui.Button(u,{events:{click:c(f._updateButtonClicked,f)}}),x=new b.ui.Button(v,{events:{click:c(f._cancelButtonClicked,f)}});f._buttons=[],f._buttons.push({index:1e4,button:w}),f._buttons.push({index:1e4,button:x})}h.appendTo(d.body),f.popupWindow=new b.ui.Window(s,{title:o?"Insert":"Edit",draggable:{enabled:!1},events:{close:c(f._cancelButtonClicked,f)},height:a(".sui-edit-form-container").height()+57,modal:!0}),f.popupWindow.content(h),f.popupWindow.resize({width:a(".sui-modal-popup-edit-window").width(),height:a(".sui-edit-form-container").height()+66}),f.trigger(o?Ma:La)},_changeEditColumnButtons:function(c,b){var a=this;a._removeButtons(b,c),a._buildButton({caption:"Update",click:a._updateButtonClicked,cls:"sui-update"},b,c),a._buildButton({caption:"Cancel",click:a._cancelButtonClicked,cls:"sui-cancel"},b,c),b.addClass("sui-update-buttons")},_removeButtons:function(c,d){for(var a=this,b=a._buttons.length;b--;)a._buttons[b].index==d&&(a._buttons[b].button.destroy(),a._buttons.splice(b,1));c.removeClass("sui-update-buttons").empty()},_updateButtonClicked:function(b,c){var a=this;return g(a._windowEditingIndex)||(b=a._windowEditingIndex),a._updateItem(b,c),a._editing._errorDuringEdit?void(a._editing._errorDuringEdit=!1):(a._putRowInViewMode(b,c),void("popup"===a.options.editing.mode&&a._removePopupWindow()))},_updateItem:function(l,o){var d,c,h,b,j,m,e,a=this,i=a.dataSource,k=(a.pager,[]),n=!0;if(i.group&&i.group.length>0&&"popup"!=a.options.editing.mode)for(j=a.contentTable.find(".sui-row, .sui-alt-row"),m=a.contentTable.find("tr").get(l),e=0;e<j.length;e++)if(j[e]==m){l=e;break}d=i.editView(l);for(b in d.data)d.data.hasOwnProperty(b)&&(null!=d.data[b]&&(n=!1),a._editing._editors[b]&&("custom"==a._editing._editors[b]?(h=a.trigger("getCustomEditorValue",{field:b,value:null}),c=h.value,a._editing._editors[b]=null):c=a._editing._editors[b].value?a._editing._editors[b].value():a._editing._editors[b].checked?a._editing._editors[b].checked():p,d.data[b]!=c&&k.push(b),(g(c)||null==c)&&(c=a._getDefaultValue(b)),d.set(b,c)));return a._editing._errorDuringEdit?void(k.length=0):(a._editing.options.batch||(h=a.trigger(f,{commandName:O,cancel:!1}),h.cancel||(i.save(!1),a.trigger(O))),a._populateInsertedItem=n,k)},_getDefaultValue:function(c){var a,e=this,d=e.dataSource.schema;return d&&d.options.fields?(a=d.options.fields,b.Model.def(E(a,c+".type"),E(a,c+".def"),E(a,c+".nullable"))):""},_closeAllEditedRows:function(){var c,d,b=this,e=b.contentTable.find(".sui-editable-cell");e.length>0&&(c=e.get(0).parentNode.rowIndex,d=b.contentTable.find(".sui-update-buttons").get(0),b._cancelButtonClicked(c,a(d)))},_cancelButtonClicked:function(g,h){var c,b,e,a=this,d=a.dataSource,i=a.trigger(f,{commandName:R,cancel:!1,rowIndex:g,cell:h});if(!i.cancel){if(d.tracker&&d.tracker.changes&&d.tracker.changes.added&&d.tracker.changes.added.length>0)d.cancel(),"popup"===a.options.editing.mode&&a._removePopupWindow();else if("popup"!=a.options.editing.mode)a._putRowInViewMode(g,h);else{for(c=a.options.columns,b=0;b<c.length;b++)e=a._editing._editors[c[b].field],e&&(y(e.destroy)&&a._editing._editors[c[b].field].destroy(),delete a._editing._editors[c[b].field]);a._removePopupWindow()}a.trigger(R)}},_removePopupWindow:function(){var b=this;b._removeButtons(a(".sui-window .sui-update-buttons"),1e4),b.popupWindow.destroy(),a(".sui-modal-popup-edit-window").remove()},_getRowIndex:function(c){var b=a(c).data(ya);return e(b)?b:-1},_putRowInViewMode:function(e,n){var q,d,f,c,b=this,i=b.options,o=i.navigation,h=b.dataSource,l=b.contentTable,m=e,k=-1;if(h.group&&h.group.length>0&&"popup"!=i.editing.mode)for(f=l.find(">tbody > tr.sui-row, >tbody > tr.sui-alt-row"),d=l.find(">tbody > tr").get(e),c=0;c<f.length;c++)if(f[c]==d){m=c;break}q=h.view[m],n&&"popup"!=i.editing.mode&&b._removeButtons(n,e),d=l.find(">tbody > tr").get(e);var j=parseInt(a(d).attr("data-group-level"),10);for(o&&(k=a(d).children("td").index(b._activeCell)),b._editing._destroyRow(e),d=b._renderRow(m,b.contentTable.tbody,q,e),o&&k>-1&&(b._activeCell=a(d).children("td").eq(k),a(b._activeCell).focus()),c=0;j>c;c++)a('<td class="sui-indent-cell sui-group-intend-cell"/>').prependTo(d);if(j&&d.attr("data-group-level",j),b._editing.options.batch){var p=d.children(".sui-cell");if(b._markedCells&&b._markedCells[e]){var g,r,s=b._markedCells[e];for(c=0;c<s.length;c++)g=s[c],r=a(p[g]).html(),a(p[g]).html('<span class="sui-updated-marker"/>'+r)}}},_renderUpdateMarkers:function(f,d){var e,c,g,b=this,h=b.columns,i=b.contentTable.find(">tbody > tr").eq(d).children(".sui-cell");for(e=0;e<f.length;e++)for(c=0;c<h.length;c++)h[c].field===f[e]&&(g=a(i[c]).html(),a(i[c]).html('<span class="sui-updated-marker"/>'+g),b._markedCells?(b._markedCells[d]||(b._markedCells[d]=[]),b._markedCells[d].push(c)):(b._markedCells={},b._markedCells[d]=[],b._markedCells[d].push(c)))},_selection:function(){var a=this,b=a.options;b.selection&&(a._selectable&&a._selectable.destroy(),a._selectable=new Ya(b.selection,a))},_filtering:function(){var a=this,b=a.options;b.filtering&&b.filtering.enabled&&(a._filter&&a._filter.destroy(),a._filter=new Wa(a))},_paging:function(d){var e,c=this,f=c.element;b.ui.Pager&&d&&(Q(d)&&d instanceof b.ui.Pager?(c.pager=d,c.pager.dataSource=c.dataSource,c.pager.element.appendTo(f)):(e=a("<div/>").appendTo(f),e.addClass("sui-pager"),c.pagerWrapper=e,c.pager=new b.ui.Pager(e.get(0),l({},d,{dataSource:c.dataSource}))))},_reorder:function(){var a=this,b=a.options;b.columnReorder&&(a._columnReorder=new aa(a))},_expandCollapseDetailTemplate:function(d){var b=this,c=a(d.target).closest(".sui-row",b.contentTable);c.length||(c=a(d.target).closest(".sui-alt-row",b.contentTable)),b._toggleDetailTemplate(c)},_toggleDetailTemplate:function(c){var d,b=this,g=b.contentTable.find("tr:first").parent().children().not(".sui-detail-row"),h=V(c[0],g),i=b.dataSource.view,e=c.next(),f=b.options;e&&e.hasClass("sui-detail-row")?(e.toggle(),d=a(c.get(0).cells[0]),b._toggleClasses(d,"sui-expand-cell","sui-collapse-cell"),b._setExpandCollapseCellText(d,f.detailExpandText,f.detailCollapseText)):b._addDetailTemplate(i[h],c)},_setExpandCollapseCellText:function(a,d,e){g(e)&&(e="-"),g(d)&&(d="+");var b=this.options.detailCollapseCssClass,c=this.options.detailExpandCssClass;b=g(b)?"":" class = '"+b+"'",c=g(c)?"":" class = '"+c+"'",a.hasClass("sui-collapse-cell")?a.html("<span"+b+">"+e+"</span>"):a.hasClass("sui-expand-cell")&&a.html("<span"+c+">"+d+"</span>")},_addDetailTemplate:function(h,c){var i,b=this,d=b.options,e=a("<tr class='sui-detail-row'/>");b._canExpandCollapse()&&(i=a("<td class='sui-cell sui-indent-cell'/>"),x&&i.html("&nbsp;"),i.appendTo(e));var g=a('<td class="sui-detail-cell" colspan="'+b._getVisibleColumnCount()+'"></td>'),l=b.trigger(f,{commandName:sa,cancel:!1,detailCell:g,item:h});if(!l.cancel&&(g.appendTo(e),d.detailTemplate&&g.html(j(d.detailTemplate,h)),c?e.insertAfter(c):e.appendTo(b.contentTable.tbody),b.trigger(sa,{detailCell:g,item:h}),c)){var k=a(c.get(0).cells[0]);b._toggleClasses(k,"sui-expand-cell","sui-collapse-cell"),b._setExpandCollapseCellText(k,d.detailExpandText,d.detailCollapseText)}},_toggleClasses:function(a,b,c){a.hasClass(b)?(a.removeClass(b),a.addClass(c)):(a.removeClass(c),a.addClass(b))},_resizing:function(){var a=this;a.options.resizing&&a.options.scrolling&&(a._columnResizing=new na(a))},_initToolbar:function(){var a=this,b=a.options;b.toolbar&&(a._toolbar=new Sa(b.toolbar,a))},_initEditing:function(){var a=this,b=a.options;b.editing&&(a._buttons=[],a._editing=new Ta(b.editing,a))},_refreshOnSort:function(){this._sortingInProgress=!0,this.dataSource.read()},_dsStartHandler:function(){this.loading(!0)},_initNavigation:function(){var b=this,d=b.element,c=b._eventNS+"nav",e=".sui-headercell[tabindex], .sui-filter-cell[tabindex], .sui-cell[tabindex], .sui-footer-cell[tabindex]";b.options.navigation&&(d.addClass("sui-grid-nav").off(c).on(Ka+c,e,function(c){a(b._activeCell).attr(C,"-1"),b._activeCell=a(this),a(b._activeCell).attr(C,"0")}),b._initActiveCell(),a(b._activeCell).attr(C,"0"))},_initActiveCell:function(){var b=this;(a(b._activeCell).length<=0||!a(b._activeCell).is(":visible"))&&(b._activeCell=a(b.element).find(".sui-cell[tabindex]").first(),a(b._activeCell).length<=0&&(b._activeCell=a(b.element).find(".sui-headercell[tabindex]").first()))},_cellEditable:function(b){return a(b).attr(Y)==X?!1:a(b).hasClass("sui-editable-cell")?!0:!1},_keydown:function(h){var d,b=this,n=b.element,l=h.keyCode,j=b.options,f=j.navigation,o=j.editing,p=j.selection,m=h.ctrlKey,i=(h.shiftKey,b.pager),e=!1,g=b._cellEditable(b._activeCell);if("button"!==a(h.target).prop("tagName").toLowerCase()||l!=k.ENTER&&l!=k.SPACE){switch(l){case k.UP:f&&(g||(d=b._getNextNavCell("up"),d&&(a(d).focus(),e=!0)));break;case k.DOWN:f&&(g||(d=b._getNextNavCell("down"),d&&(a(d).focus(),e=!0)));break;case k.LEFT:f&&(g||(d=b._getNextNavCell("left"),d&&(a(d).focus(),e=!0)));break;case k.RIGHT:f&&(g||(d=b._getNextNavCell("right"),d&&(a(d).focus(),e=!0)));break;case k.HOME:f&&(g||(d=m?a(n).find(".sui-cell[tabindex], .sui-headercell[tabindex], .sui-footer-cell[tabindex]").first():b._getNextNavCell("first"),d&&(a(d).focus(),e=!0)));break;case k.END:f&&(g||(d=m?a(n).find(".sui-cell[tabindex], .sui-headercell[tabindex], .sui-footer-cell[tabindex]").last():b._getNextNavCell("last"),d&&(a(d).focus(),e=!0)));break;case k.ENTER:f&&(a(b._activeCell).hasClass("sui-cell")?o&&(g?b._updateButtonClicked(a(b._activeCell).parent().get(0).rowIndex,a(b._activeCell)):b._editing._editingTriggered(h),e=!0):a(b._activeCell).hasClass("sui-headercell")&&(a(b._activeCell).children(".sui-link").length>0&&(b.one(K,c(b.focus,b)),a(b._activeCell).children(".sui-link").first().click()),e=!0));break;case k.PAGEUP:f&&(i&&i.hasPrev()&&(b.one(K,c(b.focus,b)),b.pager.prev()),e=!0);break;case k.PAGEDOWN:f&&(i&&i.hasNext()&&(b.one(K,c(b.focus,b)),b.pager.next()),e=!0);break;case k.ESC:g&&(b.cancelEditing(),f&&a(b._activeCell).focus(),e=!0);break;case k.SPACE:f&&p&&b._selectable&&!g&&(b._selectable.elements=ea(h,b.contentTable,b.frozenContentTable),b._selectable.elements&&b._selectable._performAndProcessSelection(h),e=!0)}e&&h.preventDefault()}},_getNextNavCell:function(e){var b,c=this,d=(c.element,c._activeCell);return(!d||a(d).length<=0)&&(d=a(c.element).find('.sui-cell[tabindex="0"], .sui-headercell[tabindex="0"]').first()),"left"==e?b=c.__findPrevFocusCell(d):"right"==e?b=c.__findNextFocusCell(d):"up"==e?b=c.__findAboveFocusCell(d):"down"==e?b=c.__findBelowFocusCell(d):"first"==e?b=c.__findFirstFocusCell(d):"last"==e&&(b=c.__findLastFocusCell(d)),b&&a(b).length>0?a(b).get(0):null},__findFirstFocusCell:function(d){for(var b,c=this,a=c.__findPrevFocusCell(d);a&&a.length>0;)b=a,a=c.__findPrevFocusCell(a);return b},__findLastFocusCell:function(d){for(var b,c=this,a=c.__findNextFocusCell(d);a&&a.length>0;)b=a,a=c.__findNextFocusCell(a);return b},__findPrevFocusCell:function(c){for(var b=a(c).prev();b&&b.length>0;){if(M(b,C))return b;b=a(c).prev()}return p},__findNextFocusCell:function(c){for(var b=a(c).next();b&&b.length>0;){if(M(b,C))return b;b=a(c).next()}return p},__findAboveFocusCell:function(e){for(var b,c=this,g=a(e).closest("tr"),h=a(e).index(),f=c.headerTable.find(">thead > tr").add(c.contentTable.find(">tbody > tr")).add(c.contentTable.find(">tfoot > tr")),d=a(f).index(g);d>0;){if(b=a(a(f)[d-1]).children().eq(h),M(b,C))return b;d--}return p},__findBelowFocusCell:function(f){for(var b,c=this,g=a(f).closest("tr"),h=a(f).index(),d=c.headerTable.find(">thead > tr").add(c.contentTable.find(">tbody > tr")).add(c.contentTable.find(">tfoot > tr")),e=a(d).index(g);e<d.length-1;){if(b=a(a(d)[e+1]).children().eq(h),M(b,C))return b;e++}return p},focus:function(){var b=this;b.options.navigation?(b._initActiveCell(),a(b._activeCell).length>0?a(b._activeCell).focus():N(b.element)):N(b.element)},refresh:function(e){var d=this,h=e?e.dataSource:null,f=d._eventNS;e=b.extend([o],d.options,e),h&&(e.dataSource=h);var i,j=d.element,k=e.scrolling,l=d.pager?d.pager.options:e.paging,g=0;k&&d.contentWrapper&&(g=d.contentWrapper.get(0).scrollLeft),d._destroyInternal(),i=d.dataSource=_a.create(e.dataSource),j.attr(S,"grid").on(W+f,c(d._keydown,d)),e.editing||j.attr(Y,X),i.on(Ca+f,c(d._renderData,d)).on(Ja+f,c(d._dsStartHandler,d)),a(D).on(Ga+f,c(d._resizeHandler,d)),d._resolveColumns(e.columns),d._createWrappers(),d._createHeaderTable(),d._createContentTable(),d._initToolbar(),d._initEditing(),d._filtering(),d._paging(l),d._resizing(),d._reorder(),d._initNavigation(),d.pager||d.dataSource.read(),d._sorting(),g&&(d.contentWrapper.get(0).scrollLeft=g)},loading:function(d,e){var a=this,c=function(){a.loadingPanel&&a.loadingPanel.show()};b.ui.LoadingPanel&&(d?(a.loadingPanel||(a.loadingPanel=new b.ui.LoadingPanel(a.element.get(0))),e?c():a.loadingPanelTimeout=setTimeout(c,50)):a.loadingPanel&&(clearTimeout(a.loadingPanelTimeout),a.loadingPanelTimeout=null,a.loadingPanel.hide()))},select:function(b){var d=this,c=d._selectable;return b=J(b)?d.contentTable.find(b):a(b),b.length?(c.multiple||(c.clear(),b=b.first()),void c.select(b)):c.select()},selectedRowIndices:function(){var b=this,c=[],d=[];return b.contentTable.children("tbody").children(".sui-row, .sui-alt-row").each(function(){if(a(this).hasClass(h)){var e=b._getRowIndex(a(this));c.push(e),d.push(e>=0?b.dataSource.getDataIndex(e):e)}}),{view:c,data:d}},clearSelection:function(){this._selectable.clear()},sort:function(a,b,c){this.sorting&&this.sorting._sort(a,b,c)},_getItemRow:function(b){return a(Za(b)?this.contentTable.children("tbody").children(".sui-row, .sui-alt-row").get(b):b)},expandRow:function(d){var a=this,b=a._getItemRow(d),c=b.next();c.hasClass("sui-detail-row")?c.css(z)==s&&a._toggleDetailTemplate(b):a._toggleDetailTemplate(b)},collapseRow:function(d){var b=this,a=b._getItemRow(d),c=a.next();c.hasClass("sui-detail-row")?c.css(z)!=s&&b._toggleDetailTemplate(a):(b._toggleDetailTemplate(a),a.next().toggle())},reorderColumn:function(b,c,k){var d,g=this,e=g.element,f=g.columns,h=g.options.columns||[],l=g.headerWrapper,i="before",j=l.find(".sui-columnheader").first().find(".sui-indent-cell").length;if(b=+b,c=+c,isNaN(b)||isNaN(c)||0>b||0>c||b>f.length-1||c>f.length-1)throw new Error("Invalid index in column reorder.");b!==c&&(c>b&&(i="after"),d=f[b],!d.visible||!k&&d.locked||(d=f.splice(b,1)[0],f.splice(c,0,d),d=h.splice(b,1)[0],h.splice(c,0,d),b+=j,c+=j,e.find(".sui-gridheader col:nth-child("+(b+1)+")").add(e.find(".sui-gridheader .sui-columnheader th:nth-child("+(b+1)+")")).add(e.find(".sui-gridheader .sui-filter-row th:nth-child("+(b+1)+")")).add(e.find(".sui-gridcontent col:nth-child("+(b+1)+")")).add(e.find(".sui-gridcontent tr:not(.sui-detail-row) td:nth-child("+(b+1)+")")).each(function(){a(this).parent().children().eq(c)[i](this)})))},addRow:function(a){return this.dataSource.add(e(a)?a:{})},insertRow:function(b,a){return this.dataSource.insertView(b,e(a)?a:{})},saveChanges:function(){this.dataSource.save()},revertChanges:function(){this.dataSource.cancel()},dataItem:function(a){return this.dataSource.view[a]},editCell:function(b,c){var a=this,d=a.contentTable.find(">tbody > tr").eq(b).children("td").eq(c).get(0);a._editingInProcess=!0,a._editing._putCellInEditMode(d,b)},editRow:function(c){var b=this,d=b.contentTable.find(">tbody > tr").eq(c).get(0);b._editingInProcess=!0,b._editing._putRowInEditMode(a(d),0)},editRowPopup:function(c){var a=this;a._editingInProcess=!0,b.ui.Window&&a._initializePopupForm(c)},cancelEditing:function(){var c,d,b=this,e=b.contentTable.find(".sui-editable-cell");e.length>0&&(c=e.get(0).parentNode.rowIndex,d=b.contentTable.find(".sui-update-buttons").get(0),b._putRowInViewMode(c,a(d))),b._editingInProcess=!1},deleteRow:function(a){this.dataSource.removeAtView(a)},filter:function(){var c=this,a=c.dataSource,b=[].slice.call(arguments);return b.length>0?(a.filter=b[0],void a.read()):a.filter},group:function(b,f,c,d){var a=this,e=a.dataSource.group;e?e.splice(f,0,{field:b,order:c,aggregates:d}):(a.dataSource.group=[],a.dataSource.group.push({field:b,order:c,aggregates:d}))},ungroup:function(d){var a,b=this,c=b.dataSource.group;for(b.headerTable.thead.find(".sui-columnheader > .sui-indent-cell").remove(),a=0;a<c.length;a++)c[a].field==d&&(c.splice(a,1),0===c.length&&(b.dataSource.group=null),b.dataSource.read())},collapseGroup:function(a){for(var b=!0,c=parseInt(a.attr("data-group-level"),10);b;)if(a=a.next().css(z,s),a.next().length>0){var d=parseInt(a.next().attr("data-group-level"),10);c>=d&&a.next().hasClass("sui-group-header")&&(b=!1)}else b=!1},expandGroup:function(a){for(var b=!0,c=parseInt(a.attr("data-group-level"),10);b;){if(a=a.next().css(z,""),a.hasClass("sui-group-header")&&a.find(".sui-expand").length>0)return;if(a.next().length>0){var d=parseInt(a.next().attr("data-group-level"),10);c>=d&&a.next().hasClass("sui-group-header")&&(b=!1)}else b=!1}},_getColumnByField:function(c){var a,d=this,b=d.columns||[];for(a=0;a<b.length;a++)if(b[a].field===c)return b[a];return p},_refreshColVisibility:function(){var a,c=this,b=c.columns,d=b.length,e=!1;for(a=0;d>a;a++)if(!b[a].visible){e=!0;break}if(e)for(a=0;d>a;a++)b[a].visible?c.showColumn(b[a].field):c.hideColumn(b[a].field)},_getNextVisibleColumnRealIndex:function(c){var a,d=this,b=d.columns;for(a=c.index+1;a<b.length;a++)if(b[a].visible)return a;return-1},isHidden:function(b){var a=this._getColumnByField(b);return a?!a.visible:p},hideColumn:function(c){var b=this,d=(a(b.element),b._getColumnByField(c));d&&!d.locked&&(a(b.headerTable).find("colgroup").first().find("col").each(function(){return a(this).data(r)==c?(b._gridColumns[c].headerCol=a(this),a(this).detach(),!1):void 0}),a(b.contentTable).find("colgroup").first().find("col").each(function(){return a(this).data(r)==c?(b._gridColumns[c].contentCol=a(this),a(this).detach(),!1):void 0}),b._changeColumnVisibility(c,"hide"),d.visible=!1,b._afterColumnVisibilityChange())},showColumn:function(d){var c,e,f,g,h,b=this,i=(a(b.element),b._getColumnByField(d)),j=a(b.headerTable).find("colgroup"),k=a(b.contentTable).find("colgroup");i&&!i.locked&&(c=b._gridColumns[d],e=c.headerCol,f=c.contentCol,g=b._getNextVisibleColumnRealIndex(c),-1===g?(j.append(e),k.append(f)):(h=b.columns[g].field,j.find("col").each(function(){return a(this).data(r)==h?(a(e).insertBefore(a(this)),!1):void 0}),k.find("col").each(function(){return a(this).data(r)==h?(a(f).insertBefore(a(this)),!1):void 0})),b._changeColumnVisibility(d,"show"),c.headerCol=c.contentCol=p,i.visible=!0,b._afterColumnVisibilityChange())},_changeColumnVisibility:function(i,e){var b,d,f=this,g=a(f.element),h=a(f.headerTable).find(".sui-columnheader").first(),j=a(f.headerTable).find(".sui-filter-row").first(),c=-1;if(h.length&&a(h).children().each(function(b){return a(this).attr("data-field")==i?(c=b,!1):void 0}),!(0>c))for(a(h.find("th")[c])[e](),a(j.find("th")[c])[e](),b=g.find("> .sui-gridcontent > table > tbody > tr"),0===b.length&&(b=g.find("> .sui-gridcontent > .sui-virtualized > table > tbody > tr")),0===b.length&&(b=g.find("> .sui-gridcontent > .sui-content > table > tbody > tr")),d=0;d<b.length;d++)a(b[d].cells[c])[e]()},_afterColumnVisibilityChange:function(){var b=this,c=b._getVisibleColumnCount(),d=b.dataSource,e=d.group?d.group.length:0;a(b.contentTable).find(".sui-grid-norecords-cell, .sui-detail-cell, .sui-group-header-cell").each(function(){a(this).hasClass("sui-group-header-cell")?a(this).attr("colspan",c+e-v(a(this).parent().attr("data-group-level"))+1):a(this).attr("colspan",c)})},_getVisibleColumnFields:function(){var a,d=this,b=d.columns||[],e=b.length,c=[];for(a=0;e>a;a++)b[a].visible&&c.push(b[a].field);return c},_initFrozenCols:function(){var a,c=this,b=c.columns,d=b.length,e=!1;for(a=0;d>a;a++)if(b[a].locked){e=!0;break}if(e)for(c._initFrozenContainers(),a=0;d>a;a++)b[a].locked&&c.lockColumn(b[a].field)},_initFrozenContainers:function(){var b=this,d=b.options,e=d.scrolling;b.frozenHeaderWrapper||(b.frozenHeaderWrapper=a('<div class="sui-header-locked"/>').prependTo(e?b.headerWrapper.parent():b.headerWrapper),b.frozenHeaderTable=a('<table class="sui-table sui-non-selectable"'+(x?' cellspacing="0"':"")+'><colgroup/><thead><tr class="sui-columnheader"/>'+(d.filtering&&d.filtering.enabled?'<tr class="sui-filter-row"/>':"")+'</thead><tbody class="sui-hide"/></table>').appendTo(b.frozenHeaderWrapper)),b.frozenContentWrapper||(b.frozenContentWrapper=a('<div class="sui-content-locked"/>').prependTo(e?b.contentWrapper.parent():b.contentWrapper),b.frozenContentWrapper.height(b.frozenContentWrapper.parent().find(".sui-content").first().height()),b.frozenContentTable=a('<table class="sui-table'+(d.rowHover?" sui-hover":"")+'"'+(x?' cellspacing="0"':"")+'><colgroup/><tbody/><tfoot><tr class="sui-grid-footer"/></tfoot></table>').appendTo(b.frozenContentWrapper),b._hasDetailTemplate()&&(b._canExpandCollapse()&&b.frozenContentTable.addClass("sui-expandable"),b.frozenContentTable.on(n+b._eventNS,"> tbody > tr > .sui-expand-cell, > tbody > tr > .sui-collapse-cell",c(b._expandCollapseDetailTemplate,b))))},_destroyFrozenContainers:function(){var b=this;b.frozenHeaderWrapper&&(a(b.frozenHeaderWrapper).remove(),b.frozenHeaderWrapper=null),b.frozenContentWrapper&&(a(b.frozenContentWrapper).find(".sui-table").off(b._eventNS),a(b.frozenContentWrapper).remove(),b.frozenContentWrapper=null)},isLocked:function(b){var a=this._getColumnByField(b);return a?a.locked:p},lockColumn:function(f){var c,d,b=this,i=a(b.element),k=b.options.filtering,h=b._getColumnByField(f),e=-1,j=b._footer;if(h&&h.visible){if(a(b.headerTable).find("colgroup").first().find("col").each(function(){return a(this).data(r)==f?(a(this).appendTo(a(b.frozenHeaderTable).find("colgroup")),!1):void 0}),a(b.contentTable).find("colgroup").first().find("col").each(function(){return a(this).data(r)==f?(a(this).appendTo(a(b.frozenContentTable).find("colgroup")),!1):void 0}),a(b.headerTable).find(".sui-columnheader").children().each(function(c){return a(this).attr("data-field")==f?(e=c,a(this).appendTo(a(b.frozenHeaderTable).find(".sui-columnheader")),!1):void 0}),k&&k.enabled&&e>=0&&a(b.headerTable).find(".sui-filter-row").children().each(function(c){return a(this).attr("data-field")==f?(a(this).appendTo(a(b.frozenHeaderTable).find(".sui-filter-row")),!1):void 0}),j&&e>=0){var m=a(b.frozenContentTable).find("> tfoot > .sui-grid-footer");a(j).find(".sui-grid-footer td:eq("+e+")").appendTo(m)}if(e>=0){c=i.find("> .sui-gridcontent > table > tbody > tr"),0===c.length&&(c=i.find("> .sui-gridcontent > .sui-virtualized > table > tbody > tr")),0===c.length&&(c=i.find("> .sui-gridcontent > .sui-content > table > tbody > tr"));var g=a(b.frozenContentTable).find("tbody"),n=g.children().length>0;for(d=0;d<c.length;d++){var l=null;l=n?a(g).children()[d]:a(c[d]).clone(!0,!1).empty().appendTo(g),a(c[d].cells[e]).appendTo(l)}}h.locked=!0,b._adjustWidthsLocked(),b._adjustHeightsLocked()}},unlockColumn:function(f){var j,l,g,d,b=this,h=(a(b.element),b.options.filtering),e=b.columns,i=b._footer,k=b._getColumnByField(f),c=-1,m=-1;if(k&&k.visible){for(a(b.frozenHeaderTable).find("colgroup").first().children().each(function(){return a(this).data(r)==f?(j=a(this),c=a(this).index(),!1):void 0}),a(b.frozenContentTable).find("colgroup").first().children().each(function(){return a(this).data(r)==f?(l=a(this),m=a(this).index(),!1):void 0}),d=0;d<e.length;d++)if(e[d].field===f){d<=e.length-2&&(g=e[d+1].field);break}if(g)a(b.headerTable).find("> colgroup col").each(function(d){if(a(this).data(r)===g){if(a(j).insertBefore(a(this)),a(b.frozenHeaderTable).find(".sui-columnheader th:eq("+c+")").insertBefore(a(b.headerTable).find(".sui-columnheader th:eq("+d+")")),h&&h.enabled&&a(b.frozenHeaderTable).find(".sui-filter-row th:eq("+c+")").insertBefore(a(b.headerTable).find(".sui-filter-row th:eq("+d+")")),i){var e=a(b.frozenContentTable).find("> tfoot > .sui-grid-footer");a(e).find("td:eq("+c+")").insertBefore(a(i).find(".sui-grid-footer td:eq("+d+")"))}return!1}}),a(b.contentTable).find("> colgroup col").each(function(c){if(a(this).data(r)===g){a(l).insertBefore(a(this));var d=a(b.contentTable).find(">tbody").first().children();return a(b.frozenContentTable).find(">tbody > tr").each(function(b){a(this).find("td:eq("+m+")").insertBefore(a(d[b]).find("td:eq("+c+")"))}),!1}});else{if(a(b.headerTable).find("colgroup").append(j),a(b.contentTable).find("colgroup").append(l),a(b.frozenHeaderTable).find(".sui-columnheader th:eq("+c+")").appendTo(a(b.headerTable).find(".sui-columnheader")),h&&h.enabled&&a(b.frozenHeaderTable).find(".sui-filter-row th:eq("+c+")").appendTo(a(b.headerTable).find(".sui-filter-row")),i){var n=a(b.frozenContentTable).find("> tfoot > .sui-grid-footer");a(n).find("td:eq("+c+")").appendTo(a(i).find(".sui-grid-footer"))}var o=a(b.contentTable).find(">tbody").first().children();a(b.frozenContentTable).find(">tbody > tr").each(function(b){a(this).find("td:eq("+m+")").appendTo(a(o[b]))})}k.locked=!1,b._adjustWidthsLocked(),b._adjustHeightsLocked()}},_adjustWidthsLocked:function(){var b=this;b.frozenHeaderWrapper&&(a(b.headerWrapper).parent().css(i.isRtl(b.element)?"padding-left":"padding-right",0),a(b.headerWrapper).outerWidth(a(b.headerWrapper).parent().innerWidth()-a(b.frozenHeaderWrapper).outerWidth()-i.scrollbar()),a(b.contentWrapper).outerWidth(a(b.contentWrapper).parent().innerWidth()-a(b.frozenContentWrapper).outerWidth()-1))},_adjustHeightsLocked:function(w){var k,j,d,o,f,g,h,i,e,n,l,m,b,c=this,u=c.options.filtering,t=c._footer;if(c.frozenHeaderWrapper){for(f=a(c.frozenHeaderTable).find("tr").first(),f.height("auto"),g=v(f.height()),h=a(c.headerTable).find("tr").first(),h.height("auto"),i=v(h.height()),g>i?(f.height(g),h.height(g)):i>g&&(f.height(i),h.height(i)),u&&u.enabled&&(e=a(c.frozenHeaderTable).find("tr.sui-filter-row").first(),e.height("auto"),n=v(e.height()),l=a(c.headerTable).find("tr.sui-filter-row").first(),l.height("auto"),m=v(l.height()),n>m?(e.height(n),l.height(n)):m>n&&(e.height(m),l.height(m))),k=a(c.frozenContentTable).find("tbody").first().children(),d=a(c.contentTable).find("> tbody").children(),b=0;b<d.length;b++)a(k[b]).height("auto"),j=v(a(k[b]).height()),a(d[b]).height("auto"),o=v(a(d[b]).height()),j>o?(a(k[b]).height(j),a(d[b]).height(j)):o>j&&(a(k[b]).height(o),a(d[b]).height(o));if(t){var q,p,s=a(c.frozenContentTable).find("> tfoot > .sui-grid-footer"),r=a(t).find(".sui-grid-footer").first();s.height("auto"),q=v(s.height()),r.height("auto"),p=v(r.height()),q>p?(s.height(q),r.height(q)):p>q&&(s.height(p),r.height(p))}w&&c._initScrolling()}}});pa.defaults=ma,b.ui.plugin("Grid",pa)}(jQuery,shield,this);
!function(a,c,g,p){var t,m,l,n=c.ui.Widget,r=c.Class,b=document,k=c.is,y=(c.get,c.format,c.to["int"]),d=(Math.abs,a.each,a.proxy),h=(a.extend,a.map,k.undefined),x=g.opera,A=navigator.userAgent,w=/msie/i.test(A)&&!x,q=(w&&7===b.documentMode,"keydown"),s="click",o="mousedown",u="change",e="select",v="cancel",j="display",i="none",z=function(a){return k.string(a)?a.replace(/^\s+/,"").replace(/\s+$/,""):a};t={cls:p,palette:"basic",basicPalette:{columns:10,tileSize:{width:16,height:16},tileBorderWidth:0,palette:["#FFFFFF","#FFCCCC","#FFCC99","#FFFF99","#FFFFCC","#99FF99","#99FFFF","#CCFFFF","#CCCCFF","#FFCCFF","#CCCCCC","#FF6666","#FF9966","#FFFF66","#FFFF33","#66FF99","#33FFFF","#66FFFF","#9999FF","#FF99FF","#BBBBBB","#FF0000","#FF9900","#FFCC66","#FFFF00","#33FF33","#66CCCC","#33CCFF","#6666CC","#CC66CC","#999999","#CC0000","#FF6600","#FFCC33","#FFCC00","#33CC00","#00CCCC","#3366FF","#6633FF","#CC33CC","#666666","#990000","#CC6600","#CC9933","#999900","#009900","#339999","#3333FF","#6600CC","#993399","#333333","#660000","#993300","#996633","#666600","#006600","#336666","#000099","#333399","#663366","#000000","#330000","#663300","#663333","#333300","#003300","#003333","#000066","#330099","#330033"]},advancedPalette:{type:"hex",buttons:!0,messages:{apply:"Apply",cancel:"Cancel"}},displayInline:!1,showLetter:!1,value:p,valueTemplate:function(a){return a?a.hex?a.hex():a.toRGB().hex():null}},m=n.extend({init:function(q,h){n.fn.init.apply(this,arguments);var g,c=this,e=c.options,l=e.cls,m=k.defined(e.value)?e.value:c._value();if(arguments.length>1&&(h=arguments[1],h.basicPalette&&h.basicPalette.palette&&(e.basicPalette.palette=h.basicPalette.palette)),c.element.css(j,i),c._enabled=!0,c.currentColor=new f({color:m}),e.displayInline)c._buildPalette(),l&&c._picker.addClass(l);else{if(c._picker=g=a('<span class="sui-color-picker-dropdown" tabindex="0"><span class="sui-color-cell sui-unselectable" unselectable="on">&nbsp;</span><span class="sui-caret-container sui-unselectable" unselectable="on"><span class="sui-caret" unselectable="on"></span></span></span>').insertAfter(c.element),l&&c._picker.addClass(l),e.showLetter){var p=g.find(".sui-color-cell");a('<span class="sui-tool-letter">A<span class="sui-selected-color"></span></span>').appendTo(p),g.find(".sui-selected-color").css("background-color",c.currentColor.color.cssa())}else g.find(".sui-color-cell").css("background-color",c.currentColor.color.cssa());g.on(s,c._pickerClicked=d(c._pickerClickedHandler,c)),a(b).on(o+".shieldColorPicker"+c.getInstanceId(),d(c._hidePopup,c))}c.currentColor.color.cssa?c._oldColor=c.currentColor.color.cssa():c._oldColor=c.currentColor.color.toRGB().cssa(),c._changed()},hidePalette:function(){this._hidePopup({})},hide:function(){var b=this;b.options.displayInline?a(b.wrapperDiv).hide():(a(b._picker).hide(),b._hidePopup({}))},show:function(){var b=this;b.options.displayInline?a(b.wrapperDiv).hide():a(b._picker).show()},isVisible:function(){var b=this;return b.options.displayInline?a(b.wrapperDiv).is(":visible"):a(b._picker).is(":visible")},_changed:function(){var a=this;a._value(c.format.call(a,a.options.valueTemplate,a.currentColor.color))},_value:function(){return this.element.attr.apply(this.element,["value"].concat([].slice.call(arguments)))},_buildPalette:function(){var a=this;"basic"==a.options.palette?a._buildBasicPalette():(a._buildAdvancedPalette(),a._changeAdvancedPaletteColor())},_changeAdvancedPaletteColor:function(){var a=this,b=a.currentColor.color.toHSV();a.wrapperDiv&&(a._hue=b.hue,a._isHsl?(b=a.currentColor.color.toHSL(),a._XY(a,{pointer:a.wrapperDiv.find(".sui-color-palette .pointer").get(0),x:b.hue,y:1-b.saturation}),a._Z(a,1-b.lightness,a.wrapperDiv.find(".sui-color-scale .pointer").get(0))):(a._XY(a,{pointer:a.wrapperDiv.find(".sui-color-palette .pointer").get(0),x:b.saturation,y:1-b.value}),a._Z(a,b.hue,a.wrapperDiv.find(".sui-color-scale .pointer").get(0))))},_pickerClickedHandler:function(){var a=this;a.wrapperDiv||a._buildPalette(),a._showPopup()},_showPopup:function(){var c=this,e=c._picker.offset(),l=e.top-a(b).scrollTop(),h=c._picker.height(),m=a(g).height();if("advanced"===c.options.palette&&(c.currentColor.color.cssa?c._oldColor=c.currentColor.color.cssa():c._oldColor=c.currentColor.color.toRGB().cssa()),!c.wrapperDiv||c.wrapperDiv.css(j)==i){c._popupIsOver=!1;var d=e.top+h+1,k=e.left,f=c.wrapperDiv.height();f+l+h>m?d=e.top-f-1:d++,(0>d||a(b).scrollTop()>d)&&(d=e.top+h+1),e.top>d?c._popupIsOver=!0:c._popupIsOver=!1,c.wrapperDiv||this._buildPalette(),c._popupIsOver?(c.wrapperDiv.css({position:"absolute",zIndex:10002,top:d+f,left:k,height:0,display:""}),c.wrapperDiv.animate({height:f,top:d},150)):(c.wrapperDiv.css({position:"absolute",zIndex:10002,top:d-1,left:k}),c.wrapperDiv.slideDown(150,function(){}))}},_hidePopup:function(k){var e,b=this,c=b.options,g=a(k.target);if(("basic"==c.palette||!(g.hasClass("sui-colorpicker")||g.parents(".sui-colorpicker").length>0))&&b.wrapperDiv&&b.wrapperDiv.css(j)!=i){if("basic"===c.palette){var d=b._picker.find(".sui-tool-letter > .sui-selected-color");0===d.length&&(d=b._picker.find(".sui-color-cell")),d.css("background-color",b.currentColor.color.css())}b._popupIsOver?(e=b.wrapperDiv.height(),b.wrapperDiv.animate({height:0,top:b._picker.offset().top},150,function(){a(this).css(j,i).css("height",e)})):b.wrapperDiv.slideUp(150,function(){});var h;h=b.currentColor.color.cssa?b.currentColor.color.cssa():b.currentColor.color.toRGB().cssa(),"basic"!=c.palette&&(c.advancedPalette.buttons?h!==b._oldColor?(b.currentColor=new f({color:b._oldColor}),setTimeout(function(){b._update(),b.trigger(v)},200)):b._changed():(b._changeSelectedColorCell(),b._changed(),b.trigger(u)))}},_buildBasicPalette:function(){var f,e=this,l=e.options,c=l.basicPalette,h=c.palette,k=c.tileSize,m=0,n=a("<div class='sui-colorpicker sui-colorpicker-basic-palette'/>");f=l.displayInline?n.insertAfter(e.element):n.appendTo(b.body).css(j,i);for(var g=0;g<h.length;g++)a("<div class='sui-palette-tile'/>").css({backgroundColor:h[g],width:k.width,height:k.height,borderWidth:c.tileBorderWidth,margin:"0 "+c.tileBorderWidth+"px "+c.tileBorderWidth+"px 0"}).on(o,e._tileClicked=d(e._tileClickedHandler,e)).appendTo(f).addClass(e.currentColor.color.hex().toUpperCase()==h[g].toUpperCase()?"sui-palette-tile-selected":"");m=c.columns*y(k.width)+c.columns*c.tileBorderWidth,f.css("width",m+"px"),e.wrapperDiv=f},_tileClickedHandler:function(c){var b=this;if(b._enabled){b.wrapperDiv.find(".sui-palette-tile-selected").removeClass("sui-palette-tile-selected"),a(c.target).addClass("sui-palette-tile-selected");var d=a(c.target).css("background-color");b.currentColor=new f({color:d}),b.trigger(e),b._changed()}},_buildAdvancedPalette:function(){var k,m,f,e=this,h=e.options;f=h.displayInline?a("<div/>").insertAfter(e.element).addClass("sui-colorpicker"):a("<div/>").appendTo(b.body).addClass("sui-colorpicker").css(j,i),e.wrapperDiv=f,m=a("<div class='sui-hex-wrapper'/>").appendTo(f),e.colorDiv=a("<div class='sui-color-div'/>").appendTo(m),"hsl"==h.advancedPalette.type?e.colorInput=a("<input class='sui-alpha-input'/>").appendTo(m):e.colorInput=a("<input class='sui-hex-input'/>").appendTo(m),e.colorInput.on(q,e._colorInputKeyDown=d(e._colorInputKeyDownHandler,e));var n="<div class='sui-color-palette'><div class='pointer'><div class='shape shape1'></div><div class='shape shape2'></div></div><div class='bg bg1'></div><div class='bg bg2'></div></div><div class='sui-color-scale'><div class='pointer'><div class='shape'></div></div><div class='bg'></div></div>";a(n).appendTo(f);var o=new l({twod:f.find(".sui-color-palette").get(0),pointer:f.find(".sui-color-palette .pointer").get(0),oned:f.find(".sui-color-scale").get(0),isXYslider:!0,cbs:{begin:e._changeXY,change:e._changeXY,end:e._done}},e);e.xy=o;var p=new l({twod:f.find(".sui-color-palette").get(0),pointer:f.find(".sui-color-scale .pointer").get(0),oned:f.find(".sui-color-scale").get(0),isXYslider:!1,cbs:{begin:e._changeZ,change:e._changeZ,end:e._done}},e);if(e.z=p,"rgb"==h.advancedPalette.type){k="<div class='extras'/>";var g=a(k).appendTo(f);a("<span class='sui-r-text'>R:</span>").appendTo(g),e.rInput=a("<input class='sui-r-input'/>").appendTo(g),e._rInputKeyDown=d(e._rInputKeyDownHandler,e),a("<span class='sui-g-text'>G:</span>").appendTo(g),e.gInput=a("<input class='sui-g-input'/>").appendTo(g),e._gInputKeyDown=d(e._gInputKeyDownHandler,e),a("<span class='sui-b-text'>B:</span>").appendTo(g),e.bInput=a("<input class='sui-b-input'/>").appendTo(g),e._bInputKeyDown=d(e._bInputKeyDownHandler,e),c.ui.NumericTextBox&&(e.rInput=new c.ui.NumericTextBox(e.rInput,{min:0,max:255,step:.01,spinners:!1,cls:"rgbInputs",events:{change:e._rInputKeyDown}}),e.gInput=new c.ui.NumericTextBox(e.gInput,{min:0,max:255,step:.01,spinners:!1,cls:"rgbInputs",events:{change:e._gInputKeyDown}}),e.bInput=new c.ui.NumericTextBox(e.bInput,{min:0,max:255,step:.01,spinners:!1,cls:"rgbInputs",events:{change:e._bInputKeyDown}}))}if("hsl"==h.advancedPalette.type){e._isHsl=!0,k="<div class='sui-transparent-slider'><div class='sui-color-scale alpha'><div class='pointer' style='top: 0%;'><div class='shape'></div></div><div class='bg'></div></div></div>",f.addClass("sui-hsl"),a(k).appendTo(f);var r=new l({twod:f.find(".alpha").get(0),pointer:f.find(".alpha .pointer").get(0),oned:f.find(".alpha").get(0),isXYslider:!1,cbs:{begin:e._changeA,change:e._changeA,end:e._done}},e);e.a=r}h.advancedPalette.buttons&&e._buildButtons()},_buildButtons:function(){var b=this,e=this.options.advancedPalette.messages,f=a("<div class='sui-buttons-wrapper'/>").appendTo(this.wrapperDiv);if(c.ui.Button){var g=a("<button type='button'>"+e.apply+"</button>").appendTo(f),h=new c.ui.Button(g,{cls:"sui-apply",events:{click:d(b._applyHandler,this)}});b._applyButton=h;var i=a("<button type='button'>"+e.cancel+"</button>").appendTo(f),j=new c.ui.Button(i,{cls:"sui-cancel",events:{click:d(b._cancelHandler,this)}});b._cancelButton=j}},_applyHandler:function(b){var a=this;a.currentColor.color.cssa?a._oldColor=a.currentColor.color.cssa():a._oldColor=a.currentColor.color.toRGB().cssa(),a._changeSelectedColorCell(),a.options.displayInline||a._hidePopup(b),a._changed(),a.trigger(u)},_changeSelectedColorCell:function(){var b,a=this,c=a.options,d=a._picker;b=a.currentColor.color.cssa?a.currentColor.color.cssa():a.currentColor.color.toRGB().cssa(),c.displayInline||(c.showLetter?d.find(".sui-selected-color").css("background-color",b):d.find(".sui-color-cell").css("background-color",b))},_cancelHandler:function(b){var a=this;a.options.displayInline?(a.currentColor=new f({color:a._oldColor}),setTimeout(function(){a._update(),a.trigger(v)},200)):a._hidePopup(b)},_update:function(){var b,a=this,c=a._shouldUpdateMainInput,d=a._shouldUpdateRgbInputs;a._isHsl?(b=a.currentColor.color.toHSL(),a._XY(a,{pointer:a.wrapperDiv.find(".sui-color-palette .pointer").get(0),x:b.hue,y:1-b.saturation}),a._shouldUpdateMainInput=c,a._Z(a,1-b.lightness,a.wrapperDiv.find(".sui-color-scale .pointer").get(0)),a.Y(a.wrapperDiv.find(".alpha .pointer").get(0),(1-b.alpha).toFixed(2))):(b=a.currentColor.color.toHSV(),a._XY(a,{pointer:a.wrapperDiv.find(".sui-color-palette .pointer").get(0),x:b.saturation,y:1-b.value}),a._shouldUpdateMainInput=c,a._shouldUpdateRgbInputs=d,a._Z(a,b.hue,a.wrapperDiv.find(".sui-color-scale .pointer").get(0)))},_rInputKeyDownHandler:function(b){var a=this;setTimeout(function(){var c=b.value;a.currentColor.color.red=parseFloat(c)/255,a._shouldUpdateRgbInputs=!1,a._update(),a.trigger(e)},1)},_gInputKeyDownHandler:function(b){var a=this;setTimeout(function(){var c=b.value;a.currentColor.color.green=parseFloat(c)/255,a._shouldUpdateRgbInputs=!1,a._update(),a.trigger(e)},1)},_bInputKeyDownHandler:function(b){var a=this;setTimeout(function(){var c=b.value;a.currentColor.color.blue=parseFloat(c)/255,a._shouldUpdateRgbInputs=!1,a._update(),a.trigger(e)},1)},_colorInputKeyDownHandler:function(b){var a=this;b.ctrlKey||setTimeout(function(){var c=b.currentTarget,d=c.value,g=a.currentColor;a.currentColor=new f({color:d}),k.object(a.currentColor.color)?(a._shouldUpdateRgbInputs=!0,a._shouldUpdateMainInput=!1,a._update()):a.currentColor=g,a.trigger(e)},1)},_changeA:function(a,b){if(a.colorPicker._enabled){a.colorPicker.colorInput.val("rgba(0,0,0,1)");a.colorPicker._A(a.colorPicker,a.colorPicker.clamp(b.y,0,1),a.colorPicker.a.pointer)}},_changeZ:function(a,b){if(a.colorPicker._enabled){a.colorPicker._isHsl?a.colorPicker.colorInput.val("rgba(0,0,0,1)"):a.colorPicker.colorInput.val("#000000");a.colorPicker._Z(a.colorPicker,a.colorPicker.clamp(b.y,0,1),a.colorPicker.z.pointer);a.colorPicker.trigger(e)}},_changeXY:function(a,b){if(a.colorPicker._enabled){a.colorPicker._isHsl?a.colorPicker.colorInput.val("rgba(0,0,0,1)"):a.colorPicker.colorInput.val("#000000");a.colorPicker._XY(a.colorPicker,{x:a.colorPicker.clamp(b.x,0,1),y:a.colorPicker.clamp(b.y,0,1),pointer:b.pointer},a.colorPicker.xy);a.colorPicker.X(b.pointer,b.x),a.colorPicker.Y(b.pointer,b.y),a.colorPicker.trigger(e)}},_XY:function(a,b){var c,d=this;if(a._enabled){if(a.X(b.pointer,b.x),a.Y(b.pointer,b.y),d._isHsl){c=a.currentColor.color.toHSL?a.currentColor.color.toHSL():a.currentColor.color,c.hue=b.x,c.saturation=1-b.y;var g=c.lightness;c.lightness=.5,d.wrapperDiv.find(".sui-color-scale").css("background-color",c.toRGB().cssa()),c.lightness=g}else c=a.currentColor.color.toHSV(),b.x>1&&(b.x=1),b.x<0&&(b.x=0),b.y<0&&(b.y=0),b.y>1&&(b.y=1),c.saturation=b.x,c.value=1-b.y,0===c.hue&&(c.hue=d._hue);var e=c.toRGB(),f=a.colorInput.val();f!=e.hex()&&(d._shouldUpdateMainInput?(f.length>4||0===f.length)&&(d._isHsl?a.colorInput.val(e.cssa()):a.colorInput.val(e.hex())):d._shouldUpdateMainInput=!0),a.rInput&&(d._shouldUpdateRgbInputs?(a.rInput.value((255*e.red).toFixed(2)),a.gInput.value((255*e.green).toFixed(2)),a.bInput.value((255*e.blue).toFixed(2))):d._shouldUpdateRgbInputs=!0),a.colorDiv.get(0).style.background=e.cssa(),a.currentColor.color=e}},_Z:function(a,f,g){var b,c=this,e=a.colorInput.val();if(c._isHsl)b=a.currentColor.color.toHSL?a.currentColor.color.toHSL():a.currentColor.color,a.Y(g,f),b.lightness=1-f,a.colorDiv.get(0).style.background=b.toRGB().cssa(),a.currentColor.color=b,e!=b.toRGB().hex()&&(c._shouldUpdateMainInput?(e.length>4||0===e.length)&&(c._isHsl?a.colorInput.val(b.toRGB().cssa()):a.colorInput.val(b.toRGB().hex())):c._shouldUpdateMainInput=!0);else{b=a.currentColor.color.toHSV(),a.Y(g,f),a._rgbBg(a,a.wrapperDiv.find(".sui-color-palette").get(0),f),c._hue=b.hue=f;var d=b.toRGB();e!=d.hex()&&(e.length>4||0===e.length)&&(c._isHsl?a.colorInput.val(d.cssa()):a.colorInput.val(d.hex())),a.rInput&&(c._shouldUpdateRgbInputs?(a.rInput.value((255*d.red).toFixed(2)),a.gInput.value((255*d.green).toFixed(2)),a.bInput.value((255*d.blue).toFixed(2))):c._shouldUpdateRgbInputs=!0),a.colorDiv.get(0).style.background=d.cssa(),a.currentColor.color=d}},_A:function(a,f,g){var b,c=this,d=a.colorInput.val();b=a.currentColor.color.toHSL?a.currentColor.color.toHSL():a.currentColor.color,a.Y(g,f),b.alpha=(1-f).toFixed(2),a.colorDiv.get(0).style.background=b.toRGB().cssa(),a.currentColor.color=b,d!=b.toRGB().hex()&&(c._shouldUpdateMainInput?(d.length>4||0===d.length)&&(a.colorInput.val(b.toRGB().cssa()),c.trigger(e)):c._shouldUpdateMainInput=!0)},_rgbBg:function(a,b,c){var d=new f({}).HSV(c,1,1).toRGB().cssa();a.BG(b,d)},clamp:function(a,b,c){return Math.min(Math.max(a,b),c)},X:function(a,b){a.style.left=this.clamp(100*b,0,100)+"%"},Y:function(a,b){a.style.top=this.clamp(100*b,0,100)+"%"},BG:function(a,b){a.style.background=b},_done:function(){},enabled:function(){var b,a=this,c=(a.options,[].slice.call(arguments));return c.length>0?(b=c[0],b?(a._picker&&a._picker.removeClass("sui-colorpicker-disabled"),a.wrapperDiv&&a.wrapperDiv.removeClass("sui-colorpicker-disabled")):(a._picker&&a._picker.addClass("sui-colorpicker-disabled"),a.wrapperDiv&&a.wrapperDiv.addClass("sui-colorpicker-disabled")),a._applyButton&&a._applyButton.enabled(b),a._cancelButton&&a._cancelButton.enabled(b),b?(a.colorInput&&a.colorInput.removeAttr("readonly"),a.rInput&&(a.rInput.enable(!0),a.gInput.enable(!0),a.bInput.enable(!0))):(a.colorInput&&a.colorInput.attr("readonly","readonly"),a.rInput&&(a.rInput.enable(!1),a.gInput.enable(!1),a.bInput.enable(!1))),a._enabled=b,void 0):a._enabled},value:function(){var c,b=this,g=b.options,h=[].slice.call(arguments);if(!(h.length>0))return c=b.currentColor.color,c.css||(c=c.toRGB()),c;if(c=h[0],b.currentColor=new f({color:c}),"basic"==g.palette){var i=b.currentColor.color.css();if(b.wrapperDiv)for(var d=b.wrapperDiv.find(".sui-palette-tile"),e=0;e<d.length;e++)d[e].style.backgroundColor.replace(/\s+/g,"")===i.replace(/\s+/g,"")&&(d.removeClass("sui-palette-tile-selected"),a(d[e]).addClass("sui-palette-tile-selected"))}else b._changeAdvancedPaletteColor();if(!g.displayInline)if(g.showLetter){b._picker.find(".sui-color-cell");b._picker.find(".sui-selected-color").css("background-color",b.currentColor.color.cssa())}else b._picker.find(".sui-color-cell").css("background-color",b.currentColor.color.cssa());b._changed()},destroy:function(){var c=this;c.element.show(),c.wrapperDiv.remove(),c.colorInput&&c.colorInput.off(q,c._colorInputKeyDown),c.rInput&&(c.rInput.destroy(),c.gInput.destroy(),c.bInput.destroy()),c.options.displayInline&&"basic"==c.options.palette&&(c.wrapperDiv.find(".sui-palette-tile").off(s,c._tileClicked),c.wrapperDiv.remove()),c._applyButton&&c._applyButton.destroy(),c._cancelButton&&c._cancelButton.destroy(),a(b).off(o+".shieldColorPicker"+c.getInstanceId()),c._tileClicked=c._rInputKeyDown=c._gInputKeyDown=c._bInputKeyDown=c._hidePopupDelegate=c._picker=c._applyButton=c._cancelButton=c._isHsl=c.currentColor=c.wrapperDiv=c.colorInput=c.colorDiv=c.rInput=c.gInput=c._enabled=c._popupIsOver=c.bInput=null,n.fn.destroy.call(c)}}),l=r.extend({init:function(b,g){var a=this,h=b.isXYslider,d=b.cbs,e=b.twod,c=b.pointer,f=b.oned;return a.colorPicker=g,h?(a.drag(e,a.attachPointer(a,d,c)),{background:e,pointer:c}):(a.drag(f,a.attachPointer(a,d,c)),{background:f,pointer:c})},drag:function(a,b){return a?void(this.isTouch()?this.dragTemplate(a,b,"touchstart","touchmove","touchend"):this.dragTemplate(a,b,"mousedown","mousemove","mouseup")):void console.warn("drag is missing elem!")},attachPointer:function(f,a,d){function e(a){return function(c,b){b.pointer=d,a(c,b)}}var c={};for(var b in a)a.hasOwnProperty(b)&&(c[b]=e(a[b]));return c},isTouch:function(){return"undefined"!=typeof g.ontouchstart},dragTemplate:function(d,c,h,e,f){var a=this,g=!1;c=a.getCbs(c);var i=c.begin,j=c.change,k=c.end;a.on(d,h,function(c){function h(){g=!1,a.off(b,e,l),a.off(b,f,h),a.callCb(k,d,c)}g=!0;var l=a.partial(a,a.callCb,j,d);a.on(b,e,l),a.on(b,f,h),a.callCb(i,d,c)})},on:function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)},off:function(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent&&a.detachEvent("on"+b,c)},getCbs:function(a){if(a)return{begin:a.begin||function(){},change:a.change||function(){},end:a.end||function(){}};var b,c;return{begin:function(a){b={x:a.elem.offsetLeft,y:a.elem.offsetTop},c=a.cursor},change:function(a){a.elem.style.left=b.x+a.cursor.x-c.x+"px",a.elem.style.top=b.y+a.cursor.y-c.y+"px"},end:function(){}}},callCb:function(i,b,c){var e=this;c.preventDefault();var f=a(b).offset(),j=b.clientWidth,k=b.clientHeight,d={x:e.cursorX(b,c),y:e.cursorY(b,c)},g=(d.x-f.left)/j,h=(d.y-f.top)/k;i(this,{x:isNaN(g)?0:g,y:isNaN(h)?0:h,cursor:d,elem:b,e:c})},partial:function(e,b){var a=Array.prototype.slice,c=a.apply(arguments,[2]),d=this;return function(){return b.apply(d,c.concat(a.apply(arguments)))}},cursorX:function(c,a){var d=this;if(d.isFixed(c)){var e=parseInt(d.getStyle(b.body,"marginLeft"),10)-d.calc(c,"scrollLeft")+g.pageXOffset+c.style.marginLeft;return a.clientX-e}return a.pageX?a.pageX:a.clientX?a.clientX+b.body.scrollLeft:void 0},cursorY:function(c,a){var d=this;if(d.isFixed(c)){var e=parseInt(d.getStyle(b.body,"marginTop"),10)-d.calc(c,"scrollTop")+g.pageYOffset+c.style.marginTop;return a.clientY-e}return a.pageY?a.pageY:a.clientY?a.clientY+b.body.scrollTop:void 0},calc:function(a,c){for(var b=0;"HTML"!=a.nodeName;)b+=a[c],a=a.parentNode;return b},isFixed:function(a){for(;"HTML"!=a.nodeName&&"fixed"!=this.usedStyle(a,"position");)a=a.parentNode;return"HTML"==a.nodeName?!1:!0},getStyle:function(a,c){return a.currentStyle?a.currentStyle[c]:b.defaultView&&b.defaultView.getComputedStyle?b.defaultView.getComputedStyle(a,"")[c]:a.style[c]},usedStyle:function(a,c){var b;return b=g.getComputedStyle?g.getComputedStyle(a,null):a.currentStyle,b[c]}});var f=r.extend({init:function(e){var a=this,b=e.color;if(h(b)||null===b||""===z(b))a.color=a.getColor("#000");else if(k.integer(b)){var c=b+0,d=[(16711680&c)>>16,(65280&c)>>8,255&c];a.color=a.getColor("rgb("+d[2]+","+d[1]+","+d[0]+")")}else a.color=a.getColor(b)},getColor:function(b){var g,a,c,f=this,d=/\s*(\.\d+|\d+(?:\.\d+)?)(%)?\s*/,j=/\s*(\.\d+|\d+(?:\.\d+)?)\s*/,o=new RegExp("^(rgb|hsl|hsv)a?\\("+d.source+","+d.source+","+d.source+"(?:,"+j.source+")?\\)$","i");if(g=b.toLowerCase(),"transparent"===g&&(b="rgba(0,0,0,0)"),a=b.match(o)){var i=a[1].toUpperCase(),k=h(a[8])?a[8]:parseFloat(a[8]),e="H"===i[0],m=a[3]?100:e?360:255,n=a[5]||e?100:255,l=a[7]||e?100:255;return f[i](parseFloat(a[2])/m,parseFloat(a[4])/n,parseFloat(a[6])/l,k)}return b.length<6&&(b=b.replace(/^#?([0-9a-f])([0-9a-f])([0-9a-f])$/i,"$1$1$2$2$3$3")),c=b.match(/^#?([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])$/i),c?f.RGB(parseInt(c[1],16)/255,parseInt(c[2],16)/255,parseInt(c[3],16)/255):b},RGB:function(c,d,e,a){var b=this;return{red:c,green:d,blue:e,alpha:h(a)?1:a,hex:function(){var a=(65536*Math.round(255*this.red)+256*Math.round(255*this.green)+Math.round(255*this.blue)).toString(16);return"#"+"00000".substr(0,6-a.length)+a},hexa:function(){var a=Math.round(255*this.alpha).toString(16);return"#"+"00".substr(0,2-a.length)+a+this.hex().substr(1,6)},css:function(){return"rgb("+Math.round(255*this.red)+","+Math.round(255*this.green)+","+Math.round(255*this.blue)+")"},cssa:function(){return"rgba("+Math.round(255*this.red)+","+Math.round(255*this.green)+","+Math.round(255*this.blue)+","+this.alpha+")"},toHSV:function(){var e,f=this.red,c=this.green,d=this.blue,g=Math.max(f,c,d),i=Math.min(f,c,d),h=g-i,j=0===g?0:h/g,k=g;if(0===h)e=0;else switch(g){case f:e=(c-d)/h/6+(d>c?1:0);break;case c:e=(d-f)/h/6+1/3;break;case d:e=(f-c)/h/6+2/3}return b.HSV(e,j,k,a)},toHSL:function(){var a=this.toHSV();return b.HSV(a.hue,a.saturation,a.value,a.alpha).toHSL()},toCMYK:function(){var g=this.red,h=this.green,i=this.blue,d=1-g,e=1-h,f=1-i,c=1;return g||h||i?(c=Math.min(d,Math.min(e,f)),d=(d-c)/(1-c),e=(e-c)/(1-c),f=(f-c)/(1-c)):c=1,b.CMYK(d,e,f,c,a)}}},HSV:function(c,d,e,a){var b=this;return{hue:c,saturation:d,value:e,alpha:h(a)?1:a,toRGB:function(){var d,f,e,k=this.hue,h=this.saturation,c=this.value,l=Math.min(5,Math.floor(6*k)),m=6*k-l,g=c*(1-h),i=c*(1-m*h),j=c*(1-(1-m)*h);switch(l){case 0:d=c,f=j,e=g;break;case 1:d=i,f=c,e=g;break;case 2:d=g,f=c,e=j;break;case 3:d=g,f=i,e=c;break;case 4:d=j,f=g,e=c;break;case 5:d=c,f=g,e=i}return b.RGB(d,f,e,a)},toHSL:function(){var c,a=(2-this.saturation)*this.value,e=this.saturation*this.value,d=1>=a?a:2-a;return c=1e-9>d?0:e/d,b.HSL(this.hue,c,a/2,this.alpha)}}},HSL:function(b,c,d,a){var e=this;return{hue:b,saturation:c,lightness:d,alpha:h(a)?1:a,toHSV:function(){var c,a=2*this.lightness,b=this.saturation*(1>=a?a:2-a);return c=1e-9>a+b?0:2*b/(a+b),e.HSV(this.hue,c,(a+b)/2,this.alpha)},toRGB:function(){return this.toHSV().toRGB()}}},CMYK:function(b,c,d,e,a){var f=this;return{cyan:b,magenta:c,yellow:d,black:e,alpha:h(a)?1:a,toRGB:function(){return f.RGB(1-this.cyan*(1-this.black)-this.black,1-this.magenta*(1-this.black)-this.black,1-this.yellow*(1-this.black)-this.black,this.alpha)}}},destroy:function(){this.color=null}});m.defaults=t,c.ui.plugin("ColorPicker",m),c.ui.ColorPicker=m}(jQuery,shield,this);
!function(a,d,v,b){var fa,K,ia,V,la,G,ma,J,i=d.ui.Widget,D=(d.Class,d.DataSource),oa=d.ui.Position,u=d.Constants.KeyCode,w=d.strid,sa=document,qa=Math.abs,H=Math.min,pa=Math.max,e=a.proxy,ta=a.each,ba=a.map,ka=d.to,R=ka["int"],k=d.format,T=d.error,o=d.is,c=o.defined,ja=o.string,Y=o.object,wa=o.func,ha=o["null"],xa=o.number,ya=d.is["boolean"],j="id",s="role",M="true",N="false",aa="aria-valuenow",P="aria-controls",Q="aria-expanded",ea="aria-disabled",da="aria-describedby",na="aria-selected",U="single",za="keydown",t="mouseenter",E="mouseleave",x="click",Z="focus",$="blur",_="change",C="title",p="center",ca="middle",f="left",g="right",q="up",r="down",l="top",n="bottom",h="horizontal",O="vertical",va="collapse",ua="expand",z="resize",A="tabindex",m="disabled",B="suiaccitemindex",X="suiaccitemdata",ra="suiaccitemloaded",S="suiaccelparent",I="suiaccelprev",y={top:n,bottom:l,left:g,right:f,center:p},F="sui-tooltip-title",ga="sui-tooltip-sto",W="sui-tooltip-hto",L="sui-tooltip-target-hover";fa={cls:b,enabled:!0,visible:b,width:b,height:b,delay:100,filter:b,content:function(b){return a(b).data(F)},position:l,trigger:t,autoHide:!0,callout:!0,events:{}},K=i.extend({init:function(){i.fn.init.apply(this,arguments);var h,r,q,j,k,b=this,d=b.options,o=d.content,g=d.position,G=d.cls,u=d.filter,m=d.trigger,z=d.autoHide,A=d.visible,B=d.width,C=d.height,D=d.callout,F=a(b.element),v=w();return!Y(o)||o.remote&&o.remote.url?(b._eventNS=".shieldTooltip"+b.getInstanceId(),b._currentTarget=null,b._tooltip=h=a('<div id="'+v+'"/>').appendTo(sa.body),h.addClass("sui-tooltip"+(G?" "+G:"")),k={position:"absolute"},c(B)&&(k.width=B),c(C)&&(k.height=C),h.css(k),b._content=a('<div class="sui-tooltip-content"></div>').appendTo(h),z||h.addClass("sui-tooltip-with-button").append('<div class="sui-tooltip-button">&times;</div>').click(e(b._hide,b,!0)),Y(g)?b._pos=g:(q=y[g]?y[g]:n,j=y[g]?g:l,D&&g!=p&&(j+=j==f||j==l?"-5":"+5"),b._pos={source:q,target:j,overflow:"flipfit"}),D&&(b._pos.callback=e(b._posSet,b)),b._targets=r=u?F.find(u):F,b._showEvent=m,b._hideEvent=null,z&&(m==t||m==x?b._hideEvent=E:m==Z&&(b._hideEvent=$)),r.each(function(d){var c=a(this);c.on(t+b._eventNS,e(b._targetMouseEnter,b,c)).on(E+b._eventNS,e(b._targetMouseLeave,b,c)).on(b._showEvent+b._eventNS,e(b._onShow,b,c,!0)),b._hideEvent&&c.on(b._hideEvent+b._eventNS,e(b._onHide,b,c,!0)),c.attr(da,v)}),b._destroyed=!1,h.attr(s,"tooltip"),b.enabled(!!d.enabled),void(c(A)&&b.visible(A))):void T("shieldTooltip: Invalid content options",d.dieOnError)},_targetMouseEnter:function(a){a.addClass(L),a.attr(C)&&a.data(F,a.attr(C)).removeAttr(C)},_targetMouseLeave:function(a){a.removeClass(L),a.data(F)&&a.attr(C,a.data(F))},_onShow:function(c,d){var b=this;if(b._enabled){var f=(b._tooltip,setTimeout(e(b._show,b,c,d),b.options.delay));c.one(E,function(){var c=a(this),b=c.data(ga);b&&clearTimeout(b)}).data(ga,f)}},_onHide:function(d,c){var b=this,f=b._tooltip,g=setTimeout(e(b._hide,b,c),50);f.one(t,function(){var b=a(this),c=b.data(W);c&&(clearTimeout(c),b.data(W,null))}).one(E,function(){setTimeout(function(){d.hasClass(L)||b._hide(b,c)},50)}).data(W,g)},_show:function(d,k){var c,g,e,a=this,f=a.options,b=f.content,h=f.height,i=a._tooltip,j=a._content;a._destroyed||a._currentTarget!=d&&(k&&(e=a.trigger("show",{target:d}),e.isDefaultPrevented())||(ja(b)?c=b:Y(b)?b.remote.iframe?c='<iframe class="sui-tooltip-iframe" src="'+b.remote.url+'" style="border:none; border-width:0px; width:100%; height:'+(h?h+"px":"100%")+';"></iframe>':(g=!0,c=" "):wa(b)&&(c=b(d)),c&&(i.show(),a._currentTarget=d,g?j.load(b.remote.url):j.html(c),a._visible=!0,oa.Set(i,d,a._pos))))},_hide:function(d){var c,b=this;b._currentTarget&&(d&&(c=b.trigger("hide"),c.isDefaultPrevented())||(a(b._tooltip).hide().find(".sui-tooltip-callout-container").remove(),b._currentTarget=null,b._visible=!1))},_posSet:function(o){var z,c,h,t,i,s,r,b,A=this,B=A.options,x=A._tooltip,m=o.horizontal,q=o.vertical,e=(o.important,o.element),j=o.target,u=e.width,w=e.height,k=6;if(B.callout){if(m==p&&q==ca)return;if(m==p||q==ca)c=m==p?q:m,t=y[c],h={source:t,target:c+(t==n||t==g?"+1":"-1")};else if(i=d.ui.Util.GetWithinInfo(v),m==f&&e.left-i.scrollLeft>3&&(c=f,h={source:g,target:f+"+1"}),m==g&&i.scrollLeft+i.width-e.left-e.width>3&&(c=g,h={source:f,target:g+"-1"}),c&&(s=e.top+w/2,r=j.top+j.height-(j.top+j.height-i.scrollTop)/2,b=s-r,qa(b)>w/2-k&&(b=b>0?w/2-k:k-w/2),0!==b&&(h.target+=" "+p+(b>0?"-"+b:"+"+b))),c||(q==l&&e.top-i.scrollTop>3&&(c=l,h={source:n,target:l+"+1"}),q==n&&i.scrollTop+i.height-e.top-e.height>3&&(c=n,h={source:l,target:n+"-1"}),c&&(s=e.left+u/2,r=j.left+j.width-(j.left+j.width-i.scrollLeft)/2,b=s-r,qa(b)>u/2-k&&(b=b>0?u/2-k:k-u/2),0!==b&&(h.target=p+(b>0?"-"+b:"+"+b)+" "+h.target))),!c)return;z=a('<div class="sui-tooltip-callout-container"><div class="sui-tooltip-callout sui-tooltip-callout-'+c+'"></div>').appendTo(x),oa.Set(z,x,h)}},visible:function(){var b,a=this,c=[].slice.call(arguments);if(!a._destroyed)return c.length>0?(b=!!c[0],b?a._show(c[1]):a._hide(),a._visible=b,void 0):a._visible},enabled:function(){var a,b=this,c=[].slice.call(arguments);return c.length>0?(a=!!c[0],a||b.visible(!1),b._enabled=a,void 0):b._enabled},destroy:function(){var b=this,c=b._targets;b._destroyed=!0,c&&(c.each(function(d){var c=a(this);c.off(b._eventNS)}),b._targets=null),a(b._tooltip).remove(),i.fn.destroy.call(b)}}),K.defaults=fa,d.ui.plugin("Tooltip",K),ia={cls:b,barSize:5,orientation:h,panes:b,events:{}},V=i.extend({init:function(){i.fn.init.apply(this,arguments);var f,c=this,g=c.options,j=g.cls,d=(g.orientation==h,a(c.element));d.addClass("sui-splitter-container"+(j?" "+j:"")),"absolute"!==d.css("position")&&"relative"!==d.css("position")&&d.css({position:"relative"}),d.css("width")===b&&d.css({width:"100%"}),c._height=d.css("height")?d.css("height"):d.parent().innerHeight(),d.css({height:c._height}),c._children=f=d.children(),c._offset=0,c._barSize=g.barSize,c._bars=[],c._dragBars=[],c._navigators=[],f.each(function(b){c._addPane(f,a(this),b)}),a(v).on(z+".shieldSplitter"+c.getInstanceId(),e(c._adjust,c)),c._adjust(),c._adjustDraggables(),c._manageCollapsedPanes()},_adjust:function(){var b=this,c=b.element,d=b._children.last(),e=b.options.orientation==h,f=(e?c.innerWidth():c.innerHeight())-b._offset+"px";c.children(".sui-splitter-pane-horizontal, .sui-splitter-dragbar-horizontal, .sui-splitter-bar-horizontal").each(function(){a(this).outerHeight(a(this).parent().innerHeight())}),e?d.outerWidth(f):d.outerHeight(f)},_adjustHeights:function(b,c){var d=this,e=d.options.orientation==h;e?(b.children(".sui-splitter-collapsible-vertical-up, .sui-splitter-collapsible-vertical-down").each(function(){var b=a(this);b.css({top:b.prev().innerWidth()/2})}),c.children(".sui-splitter-collapsible-vertical-up, .sui-splitter-collapsible-vertical-down").each(function(){var b=a(this);b.css({top:b.prev().innerWidth()/2})})):(b.children(".sui-splitter-pane-horizontal, .sui-splitter-dragbar, .sui-splitter-bar").each(function(){a(this).outerHeight(a(this).parent().innerHeight())}),c.children(".sui-splitter-pane-horizontal, .sui-splitter-dragbar, .sui-splitter-bar").each(function(){a(this).outerHeight(a(this).parent().innerHeight())}),b.children(".sui-splitter-collapsible-horizontal-left, .sui-splitter-collapsible-horizontal-right").each(function(){var b=a(this);b.css({top:b.prev().innerHeight()/2})}),c.children(".sui-splitter-collapsible-horizontal-left, .sui-splitter-collapsible-horizontal-right").each(function(){var b=a(this);b.css({top:b.prev().innerHeight()/2})}))},_adjustDraggables:function(){var g,c,q,k,d,l,j,f,r,m,n,o,p,e=this,i=e.options.orientation==h;for(c=0;c<e._dragBars.length;c++)e._dragBars[c]&&(q=e._dragBars[c],k=a(e._children[c]),d=a(e._children[c+1]),l=q.initialOptions,j=i?k.position().left:k.position().top,m=e._getPaneMin(c),m!==b&&(j+=m),n=e._getPaneMax(c+1),n!==b&&(g=i?d.position().left:d.position().top,r=i?d.innerWidth():d.innerHeight(),j=pa(j,g-(n-r))),f=i?d.position().left+d.innerWidth():d.position().top+d.innerHeight(),o=e._getPaneMax(c),o!==b&&(g=i?k.position().left:k.position().top,f=H(f,g+o)),p=e._getPaneMin(c+1),p!==b&&(g=i?d.position().left:d.position().top,f=H(f,g+p)),l.min=j,l.max=f,q.refresh(l))},_createCollapseNavigator:function(d,c){var n,k,p,l,s,e=this,t=a(e.element),o=e.options,i=o.orientation,j=o.panes,m=i==h;l=j&&c<j.length&&j[c].collapsible,s=j&&c<j.length-1&&j[c+1].collapsible,(l||s)&&(n=m?l?f:g:l?q:r,k=a('<div class="sui-splitter-collapsible sui-splitter-collapsible-'+i+"-"+n+'"/>'),k.insertAfter(d),p={left:m?d.position().left+1:d.position().left+t.innerWidth()/2,top:m?d.position().top+d.innerHeight()/2:d.position().top+1},k.css(p),k.on(x,function(){var o=a(e._children[c]),n=a(e._children[c+1]),l=e._dragBars[c]?a(e._dragBars[c].element):b,k=e._navigators[c],m=k.navigator,p=k.direction,j=k.collapsed,h=k.delta;switch(l&&j&&l.show(),p){case f:j?o.show():(h=0===c?o.outerWidth():o.innerWidth(),o.hide()),n.css({left:n.position().left+(j?h:-h)}),d.css({left:d.position().left+(j?h:-h)}),l&&l.css({left:l.position().left+(j?h:-h)}),m.css({left:m.position().left+(j?h:-h)}),n.outerWidth(n.outerWidth()+(j?-h:h)),m.removeClass("sui-splitter-collapsible-"+i+"-"+(j?g:f)),m.addClass("sui-splitter-collapsible-"+i+"-"+(j?f:g)),k.collapsed=!j,k.delta=k.collapsed?h:0;break;case g:j?n.show():(h=n.innerWidth(),n.hide()),d.css({left:d.position().left+(j?-h:h)}),l&&l.css({left:l.position().left+(j?-h:h)}),m.css({left:m.position().left+(j?-h:h)}),o.outerWidth(o.outerWidth()+(j?-h:h)),m.removeClass("sui-splitter-collapsible-"+i+"-"+(j?f:g)),m.addClass("sui-splitter-collapsible-"+i+"-"+(j?g:f)),k.collapsed=!j,k.delta=k.collapsed?h:0;break;case q:j?o.show():(h=0===c?o.outerHeight():o.innerHeight(),o.hide()),n.css({top:n.position().top+(j?h:-h)}),d.css({top:d.position().top+(j?h:-h)}),l&&l.css({top:l.position().top+(j?h:-h)}),m.css({top:m.position().top+(j?h:-h)}),n.outerHeight(n.outerHeight()+(j?-h:h)),m.removeClass("sui-splitter-collapsible-"+i+"-"+(j?r:q)),m.addClass("sui-splitter-collapsible-"+i+"-"+(j?q:r)),k.collapsed=!j,k.delta=k.collapsed?h:0;break;case r:j?n.show():(h=n.innerHeight(),n.hide()),d.css({top:d.position().top+(j?-h:h)}),l&&l.css({top:l.position().top+(j?-h:h)}),m.css({top:m.position().top+(j?-h:h)}),o.outerHeight(o.outerHeight()+(j?-h:h)),m.removeClass("sui-splitter-collapsible-"+i+"-"+(j?q:r)),m.addClass("sui-splitter-collapsible-"+i+"-"+(j?r:q)),k.collapsed=!j,k.delta=k.collapsed?h:0}l&&k.collapsed&&l.hide(),k.collapsed?e.trigger(va,{paneIndex:c}):e.trigger(ua,{paneIndex:c}),e._adjustHeights(o,n)}),e._navigators[c]={navigator:k,delta:0,direction:n,collapsed:!1,index:l?c:c+1})},_manageCollapsedPanes:function(){var c,d,f,a,b=this,e=b.options.panes;if(b._navigators)for(a=0;a<b._navigators.length;a++)c=b._navigators[a],d=c.index,f=c.navigator,e&&d<e.length&&e[d].collapsed&&f.trigger(x)},_getPaneSize:function(d){var f,e,b=this,g=b.options,c=g.panes,j=g.orientation==h,i=a(b.element);return c&&d<c.length&&(c[d].size||c[d].min)&&(e=c[d].size||c[d].min),e?b._getSize(e,"Invalid pane size")+"px":(f=j?i.innerWidth():i.innerHeight(),(f-(b._children.length-1)*b._barSize)/b._children.length)},_getPaneMin:function(c){var d,e=this,a=e.options.panes;return a&&c<a.length&&a[c].min&&(d=a[c].min),d?e._getSize(d,"Invalid min pane size!"):b},_getPaneMax:function(c){var d,e=this,a=e.options.panes;return a&&c<a.length&&a[c].max&&(d=a[c].max),d?e._getSize(d,"Invalid max pane size!"):b},_getSize:function(b,g){var e,d,c=this,i=c.options,j=i.orientation==h,f=a(c.element);if(e=j?f.innerWidth():f.innerHeight(),ja(b)&&"%"==b.charAt(b.length-1)){if(d=parseInt(b.substring(0,b.length-1),10),d>=100)throw g;b=(e-(c._children.length-1)*c._barSize)*d/100}else b=parseInt(b,10);return b},_addPane:function(r,f,e){var o,t,q,n,i,k,p,x,v,c=this,u=c.options,g=u.orientation,l=g==h,m=u.panes,y=m&&e<m.length&&m[e].resizable===!1,A=m&&e<m.length&&m[e].scrollable===!0;a(c.element);if(f.attr(j)||f.attr(j,w()),f.addClass("sui-splitter-pane sui-splitter-pane-"+g),A&&f.css({overflow:"auto"}),o=c._getPaneSize(e),t=c._getPaneMin(e),t!==b&&t>o)throw"Size less that min pane size!";if(q=c._getPaneMax(e),q!==b&&o>q)throw"Size bigger that max pane size!";n={left:(l?c._offset:0)+"px",top:(l?0:c._offset)+"px"},l?(n.width=o,n.height=c._height):n.height=o,f.css(n),e!=r.length-1&&(c._offset+=l?f.outerWidth():f.outerHeight(),i=a("<div>&nbsp;</div>").addClass("sui-unselectable sui-splitter-bar sui-splitter-bar-"+g),k={left:g==h?c._offset:0,top:g==O?c._offset:0},l?(k.width=c._barSize,k.height=c._height):k.height=c._barSize,i.css(k),i.insertAfter(f),y||(p=a("<div>&nbsp;</div>").addClass("sui-unselectable sui-splitter-dragbar sui-splitter-dragbar-"+g).css(k).insertAfter(i),p.attr(s,"separator").attr(P,f.attr(j)).attr(aa,R(g==h?f.width():f.height())),x={iframeFix:!0,direction:l?h:O,stack:!1,events:{start:function(d){var b=f,c=a(r[e+1]);b.addClass("sui-unselectable"),c.addClass("sui-unselectable")},stop:function(k){var d,i=f,j=a(r[e+1]),m=c._bars[e],n=c._navigators[e],l=n?n.navigator:b;i.removeClass("sui-unselectable"),j.removeClass("sui-unselectable"),g==h?(d=k.left-m.position().left,i.width(i.width()+d),j.css({left:k.left+m.outerWidth()}),j.width(j.width()-d),p.attr(aa,R(i.width())),l&&l.css({left:l.position().left+d})):(d=k.top-m.position().top,i.height(i.height()+d),j.css({top:k.top+m.outerHeight()}),j.height(j.height()-d),p.attr(aa,R(i.height())),l&&l.css({top:l.position().top+d})),m.css({left:k.left,top:k.top}),c._adjustHeights(i,j),c._adjustDraggables(),c.trigger(z,{paneIndex:e})}}},v=new d.ui.Draggable(p,x),c._dragBars[e]=v),c._bars.push(i),c._createCollapseNavigator(i,e),c._offset+=c._barSize)},destroy:function(){var c,b=this,e=b.element;for(e.removeClass("sui-splitter-container"),a(v).off(z+".shieldSplitter"+b.getInstanceId()),c=0;c<b._children.length;c++){var d=b._navigators[c];if(d){var f=d.navigator;f.off(x)}}b._children=b._bars=b._dragBars=b._navigators=null,b._offset=b._height=b._barSize=0,i.fn.destroy.call(b)}}),V.defaults=ia,d.ui.plugin("Splitter",V),la={cls:b,enabled:!0,animation:{enabled:!0,duration:200},mode:U,expanded:b,dataSource:b,titleTemplate:"{title}",contentTemplate:"{content}",width:b,height:b,maxHeight:b,events:{}},G=i.extend({init:function(){i.fn.init.apply(this,arguments);var f,h,k,j,b=this,d=b.options,l=d.cls,n=d.dieOnError,m=d.dataSource,g=(d.expanded,a(b.element));if(b._original=f=a(b.element),b._tagname=k=f.prop("tagName").toLowerCase(),f.wrap("<span/>"),f.hide(),b.element=g=a('<ul class="sui-accordion'+(l?" "+l:"")+'"/>').on(Z,function(){b.trigger(Z)}).on($,function(){b.trigger($)}),f.after(g),h=f.attr(A),g.attr(A,c(h)?h:"0"),c(d.width)&&g.css("width",d.width),c(d.height)&&g.css("height",d.height),c(d.maxHeight)&&g.css("max-height",d.maxHeight),m)b.dataSource=D.create(m);else{if("ul"!==k)return b.destroy(),void T("shieldAccordion: No dataSource or underlying UL element found.",n);j=function(c){var b=[];return a(c).children("li").each(function(d,e){var c={title:a(this).children("h1, h2, h3, h4, h5, h6").first().html(),content:a(this).children("div, p").first()};a(this).children("ul").length>0&&(c.items=j(a(this).children("ul")[0])),b.push(c)}),b},b.dataSource=D.create({data:f,schema:{parse:j}}),b.options.contentTemplate=function(a,d,c){b._moveElement(a.content,c)},b._fromUL=!0}b.dataSource.on(_+".shieldAccordion"+b.getInstanceId(),e(b._dsChange,b)),b.dataSource.read()},refresh:function(a){this.refreshWithElement(this._original,a)},_dsChange:function(){var a=this,b=a.options;a._render(),a._dsLoadedOnce||(a._dsLoadedOnce=!0,c(b.expanded)?a.expanded(b.expanded):a.dataSource.view&&a.dataSource.view.length>0&&a.expanded(0),a.enabled(b.enabled))},_moveElement:function(b,c){a(b).data(S,a(b).parent()).data(I,a(b).prev()).addClass("sui-accordion-elm").appendTo(c)},_restoreElement:function(b){var c=a(b).data(I),d=a(b).data(S);a(c).length>0?a(b).insertAfter(c):a(b).prependTo(d),a(b).removeData(S).removeData(I).removeClass("sui-accordion-elm")},_restoreAll:function(){var b=this;a(b.element).find(".sui-accordion-elm").each(function(){b._restoreElement(a(this))})},_render:function(){var d=this,b=d.options,e=d.dataSource.view,f=a(d.element),g=e.length;f.empty(),e&&ta(e,function(m,e){var h,i,l,q,p=w(),n=a('<li class="sui-accordion-item '+(m+1>=g?"sui-accordion-item-last ":"")+'sui-accordion-item-collapsed"/>').data(B,m).data(X,e).appendTo(f);i=a('<div class="sui-accordion-item-title"/>').click(function(b){d._enabled&&d._itemClick(a(n))}).appendTo(n),h=k.call(d,b.titleTemplate,e,m,i),c(h)&&!ha(h)&&i.html(h),l=a('<div class="sui-accordion-item-body"/>').appendTo(n).hide(),i.attr(s,"button").attr(P,p).attr(Q,N),l.attr(j,p),q=a('<div class="sui-accordion-item-body-content"/>').appendTo(l),o.array(e.items)&&e.items.length>0&&a("<div/>").appendTo(l).shieldAccordion({cls:"sui-accordion-item-body-items "+(b.cls?" "+b.cls:""),enabled:b.enabled,animation:b.animation,mode:b.mode,dataSource:{data:e.items},titleTemplate:b.titleTemplate,contentTemplate:b.contentTemplate,events:b.events})})},_itemClick:function(a){var b=this,d=b.options,c=a.hasClass("sui-accordion-item-collapsed");d.mode==U?c&&(b._collapse(a.siblings(".sui-accordion-item").not(".sui-accordion-item-collapsed").first(),!1,!0),b._expand(a,!1,!1)):c?b._expand(a,!1,!1):b._collapse(a,!1,!1)},_expand:function(b,n,o){var e,g,h,i,f=this,d=f.options,p=d.animation.enabled&&!n,q=d.animation.duration,j=a(b).children(".sui-accordion-item-body").first(),l=b.data(B),m=b.data(X);(o||(i=f.trigger("expand",{item:m,index:l,element:b}),!i.isDefaultPrevented()))&&(1!==b.data(ra)&&(b.data(ra,1),h=b.children(".sui-accordion-item-body").first().children(".sui-accordion-item-body-content").first(),e=k.call(f,d.contentTemplate,m,l,h),c(e)&&!ha(e)&&h.html(e)),b.removeClass("sui-accordion-item-collapsed").addClass("sui-accordion-item-expanded"),g=a(b).children(".sui-accordion-item-title").first(),g.attr(Q,M),d.mode==U&&g.attr(ea,M),p?j.slideDown(q):j.show())},_collapse:function(b,g,j){var e,f=this,c=f.options,h=c.animation.enabled&&!g,i=c.animation.duration,d=a(b).children(".sui-accordion-item-body").first(),k=b.data(B),l=b.data(X);(j||(e=f.trigger("collapse",{item:l,index:k,element:b}),!e.isDefaultPrevented()))&&(b.removeClass("sui-accordion-item-expanded").addClass("sui-accordion-item-collapsed"),a(b).children(".sui-accordion-item-title").first().attr(Q,N).removeAttr(ea),h?d.slideUp(i):d.hide())},expanded:function(){var g,h,e,f,d=this,i=a(d.element),b=(d._original,[].slice.call(arguments));return b.length>0?(g=ka.array(b[0]),h=c(b[1])?!!b[1]:!0,e=c(b[2])?!!b[2]:!0,f=i.children(),ba(g,function(b){b>=0&&(h?d._expand(a(f[b]),e,!0):d._collapse(a(f[b]),e,!0))}),void 0):ba(i.children(".sui-accordion-item").not(".sui-accordion-item-collapsed"),function(a){return a.data(B)})},enabled:function(){var c,b=this,d=a(b.element),e=b._original,f=[].slice.call(arguments);return f.length>0?(c=!!f[0],c?(d.removeAttr(m).removeClass("sui-accordion-disabled"),e.removeAttr(m)):(d.attr(m,m).addClass("sui-accordion-disabled"),e.attr(m,m)),b._enabled=c,void 0):b._enabled},destroy:function(){var c=this;c.dataSource&&c.dataSource.off(".shieldAccordion"+c.getInstanceId()),c._restoreAll(),a(c.element).remove(),c._original&&c._original.unwrap().show(),c._original=c._dsLoadedOnce=c._fromUL=c._currItemEl=b,i.fn.destroy.call(c)}}),G.defaults=la,d.ui.plugin("Accordion",G),ma={cls:b,active:b,collapsible:!1,animation:{enabled:!0,activateDuration:160,deactivateDuration:60},titleTemplate:"{title}",titleClsTemplate:"{titleCls}",itemClsTemplate:"{itemCls}",hrefTemplate:"{href}",contentTemplate:"{content}",disabledTemplate:"{disabled}",iconUrlTemplate:"{iconUrl}",iconClsTemplate:"{iconCls}",position:l,dataSource:b,readDataSource:!0,trigger:x,events:{}},J=i.extend({init:function(){i.fn.init.apply(this,arguments);var k,b=this,d=a(b.element),h=a(d).children("ul, ol").first(),j=b.options,l=j.position,p=j.dieOnError,n=j.dataSource,o=j.cls;if(k=b._eventNS=".shieldTabs"+b.getInstanceId(),h.length<=0?(h=null,b._noTabList=!0):b._noTabList=!1,b._tabList=h,d.addClass("sui-tabs sui-tabs-"+l+(o?" "+o:"")),d.on(za+k,e(b._keydown,b)),n)b.dataSource=D.create(n);else{if(!h)return b.destroy(),void T("shieldTabs: No dataSource or tabs UL element found.",p);b.dataSource=D.create({data:h,schema:{parse:function(d){var b=[];return a(d).children("li").each(function(){var d=a(this),e={title:d.html(),titleCls:d.attr("data-title-class"),itemCls:d.attr("data-item-class"),href:d.attr("data-href"),disabled:d.attr("data-disabled")?!!d.attr("data-disabled"):c(d.attr(m))&&null!==d.attr(m),iconUrl:d.attr("data-icon-url"),iconCls:d.attr("data-icon-cls")};b.push(e)}),b}}})}a(v).on(z+k,e(b._adjustTabListHeight,b)),a(d).children("div").hide(),b.dataSource.on(_+k,e(b._dsChange,b)),d.attr(s,"tablist"),(l==f||l==g)&&d.attr("aria-orientation",O),(!n||j.readDataSource)&&b.dataSource.read()},_dsChange:function(){this._render()},_getItemIcon:function(e){var c,f=this.options,d=k(f.iconUrlTemplate,e);return d&&"undefined"!==d?a('<span class="sui-tabs-tab-icon"/>').append('<img src="'+d+'"/>'):(c=k(f.iconClsTemplate,e),c&&"undefined"!==c?a('<span class="sui-tabs-tab-icon"/>').addClass(c):b)},_render:function(){var q,f,p,m,o,d=this,i=a(d.element),l=d.options,h=l.active,g=d._tabList,u=d.dataSource.view||[],v=u.length,t=[];if(d._initialized&&(a(g).remove(),a(i).children("div").remove(),d._tabList=g=d._divs=q=b),!g)for(d._tabList=g=a("<ul/>").prependTo(i),f=0;v>f;f++)o=u[f],g.append(a("<li/>").append(d._getItemIcon(o),'<span class="sui-tabs-tab-text">'+k(l.titleTemplate,o)+"</span>"));if(l.position==n&&g.appendTo(i),g.addClass("sui-tabs-tablist"+(l.collapsible?" sui-tabs-tablist-collapsible":"")),g.children("li").each(function(){a(this).attr(j)||a(this).attr(j,w()),a(this).attr(s,"tab")}),d._initialized||c(i.attr(A))||i.attr(A,"0"),d._tabListHeight=g.outerHeight(),a(i).children("div").length<=0)for(f=0;v>f;f++)a(i).append('<div class="sui-tabs-cust"/>');for(d._divs=q=a(i).children("div"),a(q).addClass("sui-tabs-item"),a(q).hide(),f=0;v>f;f++){o=u[f],p=g.children("li:eq("+f+")"),m=a(q[f]);var x=k(l.titleClsTemplate,o),y=k(l.itemClsTemplate,o),r=k(l.disabledTemplate,o);x&&"undefined"!==x&&p.addClass(x),y&&"undefined"!==y&&m.addClass(y),(ya(r)&&r||"true"===r||"1"===r||1===r)&&t.push(f),p.on(l.trigger+d._eventNS,e(d._select,d,f,p,m)),m.attr(s,"tabpanel").attr(da,p.attr(j)),m.attr(j)||m.attr(j,w()),p.attr(P,m.attr(j))}if(d._initialized=!0,h!==!1&&(h=xa(h)?h:0,h=pa(0,H(h,q.length-1)),d._selectedIndex=h,d._activate(h,!0,!1)),t.length>0)for(f=0;f<t.length;f++)d.enabled(t[f],!1)},_select:function(c,d,e){var f,g,h,b=this,i=b.options,j=i.collapsible,k=b.dataSource.view||[];b.enabled(c)&&(c!==b._selectedIndex||j)&&(d=d||a(b._tabList).children("li:eq("+c+")"),e=e||a(b._divs[c]),f=a(d).hasClass("sui-tabs-tab-active"),g=!(f&&j&&i.trigger!==t),h=b.trigger("select",{tab:d,content:e,active:f,activate:g,index:c,item:k[c]}),h.isDefaultPrevented()||(b._selectedIndex=c,b._activate(c,g,!0,d,e)))},_activate:function(e,j,s,g,f){var h,r,l,i,m,n,d=this,o=d.options,p=o.animation,q=p.enabled,t=d.dataSource.view||[];d.enabled(e)&&(j||e===d._activeIndex)&&(g=g||a(d._tabList).children("li:eq("+e+")"),f=f||a(d._divs[e]),h=t[e],a(d._divs).stop(!0,!0),a(d._tabList).children("li").removeClass("sui-tabs-tab-active").attr(na,N),m=function(){n=function(){s&&(r=d.trigger("activate",{tab:g,content:f,active:j,index:e,item:h})),d._adjustTabListHeight()},j?(d._activeIndex=e,a(g).addClass("sui-tabs-tab-active").attr(na,M),l=k(o.hrefTemplate,h),l&&"undefined"!==l?a(f).load(l,b,function(a,b,c){d.trigger("load",{responseText:a,textStatus:b,jqXHR:c,tab:g,content:f,active:j,index:e,item:h}),d._adjustTabListHeight()}):(i=k(o.contentTemplate,h),i&&"undefined"!==i&&a(f).html(i)),a(f).fadeIn(q?p.activateDuration:0,n)):(d._activeIndex=b,n())},c(d._activeIndex)?a(d._divs).each(function(b){b!==d._activeIndex?a(this).hide():a(this).fadeOut(q?p.deactivateDuration:0,m)}):m())},_adjustTabListHeight:function(){var c,d,e,b=this,h=b.options.position;(h==f||h==g&&b._divs&&b._divs[b._activeIndex])&&(c=a(b._tabList),d=a(b._divs[b._activeIndex]).innerHeight(),c.css("min-height",d),e=a(c.children("li").last()),b._tabListHeight>=d?e.addClass("sui-tabs-tab-last-bottom"):e.removeClass("sui-tabs-tab-last-bottom"))},_keydown:function(b){var d,c=this;if(a(c.element)[0]===a(b.target)[0]){switch(b.keyCode){case u.UP:case u.LEFT:c._selectPrevNext(b,!0),d=!0;break;case u.DOWN:case u.RIGHT:c._selectPrevNext(b,!1),d=!0;break;case u.SPACE:c.options.collapsible&&c._toggleCurrent(b),d=!0}d&&b.preventDefault()}},_toggleCurrent:function(d){var a=this,b=a._selectedIndex;c(b)&&a._activate(b,b!==a._activeIndex,!0)},_selectPrevNext:function(f,e){var a=this,d=a._selectedIndex,b=c(d)?e?a._getPrevSelectableIndex():a._getNextSelectableIndex():a._getFirstSelectableIndex();c(b)&&b!==d&&a._select(b)},_getFirstSelectableIndex:function(){var b,c=this;return a(c._tabList).children("li").each(function(a){return c.enabled(a)?(b=a,!1):void 0}),b},_getNextSelectableIndex:function(){var c,d=this,e=d._selectedIndex,g=a(d._tabList).children("li"),f=g.length;if(f-1>e)for(c=e+1;f>c;c++)if(d.enabled(c))return c;if(e>0)for(c=0;e>c;c++)if(d.enabled(c))return c;return b},_getPrevSelectableIndex:function(){var c,d=this,e=d._selectedIndex,g=a(d._tabList).children("li"),f=g.length;if(e>0)for(c=e-1;c>=0;c--)if(d.enabled(c))return c;if(f-1>e)for(c=f-1;c>e;c--)if(d.enabled(c))return c;return b},enabled:function(){var b,d=this,c=[].slice.call(arguments),e=c[0];if(b=a(d._tabList).children("li:eq("+e+")"),b.length>0){if(!(c.length>1))return!a(b).hasClass("sui-tabs-tab-disabled");c[1]?a(b).removeClass("sui-tabs-tab-disabled"):a(b).addClass("sui-tabs-tab-disabled")}},enabledIndices:function(){var c=this,b=[];return a(c._tabList).children("li").each(function(c,d){a(this).hasClass("sui-tabs-tab-disabled")||b.push(c)}),b},active:function(){var b=this,a=[].slice.call(arguments);return a.length>0?void b._activate(a[0],a[1],!1):b._activeIndex},content:function(b){return a(this._divs)[b]},destroy:function(){var c=this,d=a(c.element),g=c.options,h=g.cls,e=c._tabList,f=c._eventNS;c.dataSource&&c.dataSource.off(_+f),a(v).off(f),a(d).removeClass("sui-tabs sui-tabs-"+g.position+(h?" "+h:"")),a(d).children("div").removeClass("sui-tabs-item"),a(d).children(".sui-tabs-cust").remove(),c._divs=null,a(e).children("li").removeClass("sui-unselectable").off(f),a(e).removeClass("sui-tabs-tablist"),c._noTabList&&a(e).remove(),c._tabList=c._noTabList=c._activeIndex=c._selectedIndex=c._initialized=c._tabListHeight=b,i.fn.destroy.call(c)}}),J.defaults=ma,d.ui.plugin("Tabs",J)}(jQuery,shield,this);
!function(a,c,Y,d){var B,u,K,y,n,s,m=c.ui.Widget,M=(c.Class,c.DataSource),J=c.ui.Position,j=c.Constants.KeyCode,V=c.strid,q=document,e=a.proxy,R=a.each,C=a.grep,I=a.extend,W=c.error,P=c.format,b=c.is.defined,w=c.is["boolean"],T=c.is.integer,X=c.is.func,O="id",x="role",z="true",N="false",r="aria-expanded",v="aria-activedescendant",f="horizontal",h="vertical",Q="click",A="focus",D="blur",E="change",U="keydown",F="tabindex",G="disabled",H="sui-menu-item-level",l="sui-menu-item-expanded",t="sui-menu-item-disabled",k="sui-menu-item-selected",L="sui-menu-item-index",p="sui-menu-item-hover",g="sui-menu-item-data-item",o="sui-menu-item-parent",i="sui-menu-item-cc",S="sui-menu-item-cc-parent";B={cls:d,width:d,height:d,dataSource:d,readDataSource:!0,orientation:f,delay:100,animation:{enabled:!0,openDelay:100,closeDelay:50},contentTemplate:"{content}",overflow:"flipfit",events:{}},u=m.extend({init:function(){m.fn.init.apply(this,arguments);var h,k,l,j,i,d=this,g=a(d.element),f=d.options,r=f.dieOnError,n=f.dataSource,o=f.cls,p=f.renderToINTERNAL,q=f.wrapOriginalINTERNAL,s=b(q)?q:!0;if(d._original=h=a(d.element),d._tagname=l=h.prop("tagName").toLowerCase(),d._isContext=f.isContextINTERNAL,i=d._eventNS=".shieldMenu"+d.getInstanceId(),s?(d.wrapper=h.wrap("<div/>").parent(),d._isWrapped=!0):d._isWrapped=!1,h.hide(),d.element=g=a('<ul class="sui-menu sui-menu-top sui-menu-'+f.orientation+(o?" "+o:"")+'"/>').on(A+i,e(d._focus,d)).on(D+i,e(d._blur,d)).on(U+i,e(d._keydown,d)),a(p).length>0?a(p).append(g):h.after(g),b(f.width)&&g.css("width",f.width),b(f.minWidth)&&g.css("minWidth",f.minWidth),b(f.height)&&g.css("height",f.height),k=h.attr(F),g.attr(F,b(k)?k:"0"),d._isRtl=c.support.isRtl(g),n)d.dataSource=M.create(n);else{if("ul"!==l)return d.destroy(),void W("shieldMenu: No dataSource or underlying UL element found.",r);j=function(d){var c=[];return a(d).children("li").each(function(){var d=a(this),e=d.children("ul").length>0,f={cls:d.attr("data-class"),content:e?d.children().not("ul").first().html():d.html(),href:d.attr("data-href")?d.attr("data-href"):d.children().not("ul").first().attr("href"),disabled:d.attr("data-disabled")?d.attr("data-disabled"):b(d.attr(G))&&null!==d.attr(G),separator:"separator"===d.attr("data-role"),iconUrl:d.attr("data-icon-url"),iconCls:d.attr("data-icon-cls")};e&&(f.items=j(d.children("ul")[0])),c.push(f)}),c},d.dataSource=M.create({data:h,schema:{parse:j}})}d.dataSource.on(E+i,e(d._dsChange,d)),g.attr(x,d._isContext?"menu":"menubar").attr("aria-orientation",f.orientation),f.readDataSource&&d.dataSource.read()},refresh:function(a){this.refreshWithElement(this._original,a)},_isFocused:function(){return a(this.element).hasClass("sui-menu-focus")},_focus:function(c){var b=this;b._blurTimeout&&(clearTimeout(b._blurTimeout),b._blurTimeout=null),b._isFocused()||(a(b.element).addClass("sui-menu-focus"),a(b.element).focus(),b.trigger(A))},_blur:function(c){var b=this;b._isFocused()&&(b._blurTimeout&&clearTimeout(b._blurTimeout),b._blurTimeout=setTimeout(function(){a(b.element).removeClass("sui-menu-focus"),b._collapseAll(),b._deselectAll(),b.trigger(D)},100))},_dsChange:function(){var a=this;a._renderItems(a.dataSource.view,a.element,0,null)},_getItemIcon:function(b){var c=a('<span class="sui-menu-item-icon"/>');return b.iconUrl?c.append('<img src="'+b.iconUrl+'"/>'):b.iconCls&&c.addClass(b.iconCls),c},_renderItems:function(s,E,n,F){var l,b,p,D,v,k,j,m,y,w,r,B,d=this,u=d.options,G=(s||[]).length,I=C(s||[],function(a){return a.iconUrl||a.iconCls}).length>0;for(l=0;G>l;l++)b=s[l],p=!!b.disabled,v=b.href,k=b.separator,w=!k&&b.items&&b.items.length>0,y=b.iconUrl||b.iconCls,D=k?"&nbsp;":P.call(d,u.contentTemplate,b),m=a('<a class="sui-menu-item-link" '+(v?'href="'+v+'"':"")+' tabindex="-1"/>').append('<span class="sui-menu-item-text'+(w?" sui-menu-item-text-hc":"")+'">'+D+"</span>"),j=a('<li class="sui-menu-item sui-unselectable'+(p?" sui-menu-item-disabled":"")+(k?" sui-menu-item-separator":"")+(b.cls?" "+b.cls:"")+'"/>').on("selectstart",function(){return!1}).appendTo(E).data(g,b).data(o,F).data(H,n).data(t,p).data(L,l).attr(x,k?"separator":"menuitem").attr(O,V()).append(m),k?j.attr("aria-orientation",n>0||u.orientation===h?f:h):p&&j.attr("aria-disabled",z),m.click(e(d._itemClicked,d,j)).on(A,e(d.focus,d)),!k&&I&&(n>0||y||u.orientation===h)&&m.prepend(d._getItemIcon(b)),w&&(m.append('<span class="sui-menu-item-children-caret"/>'),r=a('<div class="sui-menu-submenu"/>').hide().data(S,j).appendTo(j),r.css("z-index",c.ui.Util.GetMaxZIndex(".sui-menu, .sui-menu-submenu",q.body)+1),B=a('<ul class="sui-menu sui-menu-vertical"/>').attr(x,"menu").appendTo(r),d._renderItems(b.items,B,n+1,j),j.data(i,r).attr("aria-haspopup","true").hover(e(d._itemMouseEnter,d,j,!0),e(d._itemMouseLeave,d,j,!0)))},_itemMouseEnter:function(a,c){var b=this;a.addClass(p),setTimeout(function(){a.hasClass(p)&&b._itemExpand(a,c)},b.options.delay)},_itemMouseLeave:function(a,b){var c=this;a.removeClass(p),c._itemCollapse(a,!0,b)},_itemExpand:function(a,m,p){var k,c=this,d=c.options,h=d.animation,n=a.data(H),b=a.data(i),j=0===n&&d.orientation===f,q=a.data(g),e=a.data(o);c._isExpandable(a)&&c._canHaveFocus(a)&&b&&(b.stop(!0,!0),e&&!c._isExpanded(e)&&c._itemExpand(e,!1,!0,!0),m&&(k=c.trigger("expand",{element:a,item:q})),j&&b.css("min-width",a.outerWidth()),b.show(),J.Set(b,a,{source:"left top",target:j?"left bottom":"right top",overflow:d.overflow}),!p&&h&&h.enabled?b.hide().slideDown(h.openDelay,function(){a.data(l,!0).attr(r,z)}):a.data(l,!0).attr(r,z))},_itemCollapse:function(d,c,k,m){var n,e=this,j=e.options.animation,h=d.data(i),q=d.data(g),f=d.data(o);h&&(h.stop(!0,!0),k&&(n=e.trigger("collapse",{element:d,item:q})),c=b(c)?!!c:!0,a(h).find("ul").first().children().each(function(){var b=a(this);e._isExpanded(b)&&e._itemCollapse(b,c,!1,!0)}),!m&&j&&j.enabled?h.slideUp(j.closeDelay,function(){d.data(l,!1).attr(r,N),c&&f&&!f.hasClass(p)&&e._itemCollapse(f,!0,!1,!0)}):(h.hide(),d.data(l,!1).attr(r,N),c&&c&&f&&!f.hasClass(p)&&e._itemCollapse(f,!0,!1,!0)))},_collapseAll:function(){var b=this;a(b.element).children("li").each(function(){var c=a(this);b._isExpanded(c)&&b._itemCollapse(c,!1,!1,!0)})},_isExpandable:function(a){return!!a.data(i)},_isExpanded:function(a){return a.data(l)===!0},_hasExpanded:function(b){var c=this,d=b.data(i);return b.data(l)!==!0?!1:C(a(d).find("ul").first().children(),function(b){return c._isExpanded(a(b))||c._hasExpanded(a(b))}).length>0},_canHaveFocus:function(a){return!a.data(t)&&!a.data(g).separator},_keydown:function(c){var d,a=this,e=!0;switch(c.keyCode){case j.UP:a._move("up",c);break;case j.DOWN:a._move("down",c);break;case j.LEFT:a._move("left",c);break;case j.RIGHT:a._move("right",c);break;case j.SPACE:case j.ENTER:d=a._getSelected(),b(d)&&(a._isExpanded(d)||a._itemExpand(d,!0),a._itemClicked(d));break;default:e=!1}e&&c.preventDefault()},_getFirstSelectableItem:function(c){var b,d=this;return a(c).children("li").each(function(){var c=a(this);return d._canHaveFocus(c)?(b=c,!1):void 0}),b},_getNextSelectableItem:function(e){var c,b,g=this,i=e.parent(),d=e.index(),f=i.children("li"),h=f.length;if(h-1>d)for(b=d+1;h>b;b++)if(c=a(f[b]),g._canHaveFocus(c))return c;if(d>0)for(b=0;d>b;b++)if(c=a(f[b]),g._canHaveFocus(c))return c;return e},_getPrevSelectableItem:function(e){var c,b,g=this,i=e.parent(),d=e.index(),f=i.children("li"),h=f.length;if(d>0)for(b=d-1;b>=0;b--)if(c=a(f[b]),g._canHaveFocus(c))return c;if(h-1>d)for(b=h-1;b>d;b--)if(c=a(f[b]),g._canHaveFocus(c))return c;return e},_move:function(i,m){var l,j,k,a,e=this,c=e._getSelected();e._isRtl;if(b(c))if(l=c.parent().hasClass("sui-menu-vertical")?h:f,j=c.data(o),k=j?j.parent().hasClass("sui-menu-vertical")?h:f:d,l===f){if("up"===i)return void e._itemCollapse(c,!1,!0);if("down"===i){if(!e._isExpandable(c))return;e._itemExpand(c,!0),a=e._getFirstSelectableItem(c.find(".sui-menu-submenu > .sui-menu").first())}else if("left"===i){if(a=e._getPrevSelectableItem(c),a===c)return}else{if("right"!==i)return;if(a=e._getNextSelectableItem(c),a===c)return}}else if("up"===i){if(0===c.index()){if(j&&k===f)a=j,e._itemCollapse(a,!1,!0);else if(a=e._getPrevSelectableItem(c),a===c)return}else if(a=e._getPrevSelectableItem(c),a===c)return}else if("down"===i){if(a=e._getNextSelectableItem(c),a===c)return}else if("left"===i){if(!j||k!==h)return;a=j,e._itemCollapse(a,!1,!0)}else{if("right"!==i)return;if(!e._isExpandable(c))return;e._itemExpand(c,!0),a=e._getFirstSelectableItem(c.find(".sui-menu-submenu > .sui-menu").first())}else a=e._getFirstSelectableItem(e.element);b(a)&&(e._setSelected(a,!0),e.trigger("select",{element:a,item:a.data(g)}))},_deselectAll:function(){var c=this,b=c.element;a(b).find("."+k).each(function(){a(this).removeClass(k)}),b.removeAttr(v)},_setSelected:function(b,e){var c=this,d=c.element;c._canHaveFocus(b)&&(e?(c._deselectAll(),a(b).addClass(k),d.attr(v,b.attr(O))):(a(b).removeClass(k),d.removeAttr(v)))},_getSelected:function(){var c=this,b=a(c.element).find("."+k).first();return a(b).length>0?b:d},_isSelected:function(b){return a(b).hasClass(k)},_itemClicked:function(d,a){var e,c,b=this,f=d.data(g);a&&a.isPropagationStopped()||(b._focus(),b._canHaveFocus(d)&&(c={item:f},b._isContext&&(c.element=s),e=b.trigger(Q,c),a&&(a.stopPropagation(),e.isDefaultPrevented()&&a.preventDefault())))},_getItemByIndex:function(){var c,b,g=this,f=[].slice.call(arguments),e=d;if(f.length>0)for(b=0;b<f.length;b++){if(c=f[b],!T(c))return d;if(e=0===b?a(g.element).children("li:eq("+c+")"):a(a(e).data(i)).children("ul").first().children("li:eq("+c+")"),a(e).length<=0)return d}return e},_getItemIndex:function(a){var b=[];do b.unshift(a.data(L)),a=a.data(o);while(a);return b},enabled:function(){var c,g=this,e=[].slice.call(arguments),f=w(e[0])?e.shift():d;if(c=g._getItemByIndex.apply(this,e),b(c)){if(!b(f))return!c.data(t);c.data(t,!f),a(c)[f?"removeClass":"addClass"]("sui-menu-item-disabled")}},expanded:function(){var c,a=this,e=[].slice.call(arguments),f=w(e[0])?e.shift():d;if(c=a._getItemByIndex.apply(this,e),b(c)){if(!b(f))return a._isExpanded(c);f?(a._collapseAll(),a._itemExpand(c,!1)):a._itemCollapse(c,!1,!1)}b(f)&&f===!1&&0===e.length&&a._collapseAll()},selected:function(){var a,c=this,e=[].slice.call(arguments),f=w(e[0])?e.shift():d;if(a=c._getItemByIndex.apply(this,e),b(a)){if(!b(f))return c._isSelected(a);c._setSelected(a,f)}b(f)&&f===!1&&0===e.length&&c._deselectAll()},selectedIndex:function(){var a=this,c=a._getSelected();return b(c)?a._getItemIndex(c):void 0},selectedData:function(){var d=this,c=d._getSelected();return b(c)?a(c).data(g):void 0},selectedItem:function(){return this._getSelected()},destroy:function(){var b=this,c=b._eventNS;b.dataSource&&b.dataSource.off(E+c),b._blurTimeout&&(clearTimeout(b._blurTimeout),b._blurTimeout=null),a(b.element).off(c).remove(),b._isWrapped&&b._original.unwrap(),b._original.show(),b._original=null,m.fn.destroy.call(b)}}),u.defaults=B,c.ui.plugin("Menu",u),K=I({},B,{orientation:h,target:d,filter:d,focusOnOpen:!0,minWidth:d}),y=m.extend({init:function(){m.fn.init.apply(this,arguments);var f,g,b=this,i=a(b.element),d=b.options,j=d.events,h={};f=b._eventNS=".shieldContextMenu"+b.getInstanceId(),b.menuElement=g=a('<div class="sui-context-menu"/>').hide().appendTo(q.body),d.minWidth&&b.menuElement.css("min-width",d.minWidth),R(["focus","blur","expand","collapse","click","select"],function(d,a){var c=j[a];X(c)&&(h[a]=e(c,b))}),b._menu=new u(i,I({},d,{renderToINTERNAL:g,wrapOriginalINTERNAL:!1,isContextINTERNAL:!0,events:h})),b._mouseTracker=new c.MouseTracker,a(d.target).on("contextmenu"+f,d.filter,function(c){return c.preventDefault(),b._open(b._mouseTracker.getPosition(c),a(c.currentTarget),!0,!1),!1}),a(q).on("mousedown"+f,function(c){a(c.target).closest(".sui-context-menu").length<=0&&b._closeOpen(!0)})},_open:function(g,d,j,k){var h,a=this,b=a.menuElement,e=a.options,f=e.animation,i=e.focusOnOpen;a._closeOpen(!1),j&&(h=a.trigger("open",{element:d}),h.isDefaultPrevented())||(b.stop(!0,!0),b.show(),J.Set(b,new c.Event({pageX:g.x,pageY:g.y}),{source:"left top",target:"left top",overflow:e.overflow}),f&&f.enabled?b.hide().slideDown(f.openDelay,function(){n=a,s=d,a._visible=!0,i&&a.focus()}):(n=a,s=d,a._visible=!0,i&&a.focus()))},_close:function(e){var d,a=this,b=a.menuElement,c=a.options.animation;e&&(d=a.trigger("close"),d.isDefaultPrevented())||(n=s=null,b.stop(!0,!0),c&&c.enabled?b.slideUp(c.closeDelay,function(){a._visible=!1}):(b.hide(),a._visible=!1))},_closeOpen:function(a){n&&n.closeINTERNAL(!0)},closeINTERNAL:function(a){this._close(a)},focus:function(){a(this.menuElement).find(".sui-menu").first().focus()},visible:function(){var c,d,a=this,b=[].slice.call(arguments);return b.length>0?(c=!!b[0],d=b[1]?b[1]:a._mouseTracker.getPosition(),c?a._open(d,b[2],!1,!1):a._close(!1),a._visible=c,void 0):a._visible},enabled:function(){return this._menu.enabled.apply(this._menu,arguments)},expanded:function(){return this._menu.expanded.apply(this._menu,arguments)},selected:function(){return this._menu.selected.apply(this._menu,arguments)},selectedIndex:function(){return this._menu.selectedIndex.apply(this._menu,arguments)},selectedData:function(){return this._menu.selectedData.apply(this._menu,arguments)},selectedItem:function(){return this._menu.selectedItem.apply(this._menu,arguments)},destroy:function(){var b=this,c=b._eventNS;a(q).off(c),a(b.options.target).off(c),b._mouseTracker&&(b._mouseTracker.destroy(),b._mouseTracker=null),b._close(),b._menu&&(b._menu.destroy(),b._menu=null),a(b.menuElement).remove(),m.fn.destroy.call(b)}}),y.defaults=K,c.ui.plugin("ContextMenu",y)}(jQuery,shield,this);
!function(a,b,l,v){var j=b.ui.Widget,u=(b.Class,b.Constants),e=document,n=u.SVG_NS,o=!!e.createElementNS&&!!e.createElementNS(n,"svg").createSVGRect,t=(a.map,a.each,a.proxy),i=b.to["int"],s=(b.is.func,b.error,Math.min),y=Math.max,h="disabled",d="px",p="float",f="left",g="right",k="horizontal",q="vertical",c="circular",m=function(c,d,a,e){var b=(e-90)*Math.PI/180;return{x:c+a*Math.cos(b),y:d+a*Math.sin(b)}},w=function(b,c,a,d,e){var f=m(b,c,a,e),g=m(b,c,a,d),h=180>=e-d?"0":"1";return["M",f.x,f.y,"A",a,a,0,h,0,g.x,g.y].join(" ")},x={cls:v,enabled:!0,min:0,max:100,value:0,layout:k,layoutOptions:{circular:{width:30,color:"#197BB5",colorDisabled:"#C4C4C4",borderColor:"#C4C4C4",borderWidth:1,backgroundColor:"#FFFFFF"}},reversed:!1,text:{enabled:!1,template:"{0}"},events:{}},r=j.extend({init:function(){j.fn.init.apply(this,arguments);var d,b=this,h=a(b.element),i=b.options,m=i.layout,n=i.cls;b._eventNS=".shieldProgressbar"+b.getInstanceId(),h.addClass("sui-progressbar"),m===q?h.addClass("sui-progressbar-vertical"):m===c&&h.addClass("sui-progressbar-circular"),m!==c&&(b.inner=a("<div/>").addClass("sui-progressbar-value").appendTo(h)),n&&h.addClass(n),m===k?(d=b.inner.css(p)||f,d=i.reversed?d===f?g:f:d===g?g:f,b.inner.css(p,d)):m==c&&(o||e.namespaces.scvprogressbar||e.namespaces.add("scvprogressbar","urn:schemas-microsoft-com:vml","#default#VML")),a(l).on("resize"+b._eventNS,t(b._winResize,b)),b._value=i.value,b._render(),b.enabled(i.enabled)},_winResize:function(){this._render()},_render:function(){var B,G,N,f=this,r=f.options,y=r.layout,L=r.reversed,D=r.min,A=r.max,x=f._value,F=r.text,t=a(f.element),m=t.width(),j=t.height(),J=f.inner,I=A-D,P=i(100*(x-D)/I);if(y===q)B=i(P*j/100),J.css({width:"100%",height:B+d,"margin-top":(L?"0":j-B)+d});else if(y===k)J.css({width:P+"%",height:j+d});else{if(y!==c)return;var e="",s=r.layoutOptions[y],z=s.width,E=s.borderWidth,v=f._enabled?s.color:s.colorDisabled,K=s.borderColor,H=s.backgroundColor,g=m/2,h=j/2,u=(m>j?h:g)-z/2-1,l=2*u,M=i(360*(x-D)/I),C=L?360-M:0,O=C+M,p=z-2*E;o?(e='<svg xmlns="'+n+'" version="1.1" width="'+m+'" height="'+j+'">',E>0&&(e+='<circle cx="'+g+'" cy="'+h+'" r="'+u+'" stroke="'+K+'" stroke-width="'+z+'" fill="none" />'),x>=A?e+='<circle cx="'+g+'" cy="'+h+'" r="'+u+'" stroke="'+v+'" stroke-width="'+p+'" fill="none" />':(e+='<circle cx="'+g+'" cy="'+h+'" r="'+u+'" stroke="'+H+'" stroke-width="'+p+'" fill="none" />',e+='<path d="'+w(g,h,u,C,O)+'" stroke="'+v+'" stroke-width="'+p+'" fill="none" />'),e+="</svg>"):(e+='<scvprogressbar:group style="width:'+m+"px; height:"+j+'px;" coordsize="'+m+","+j+'">',E>0&&(e+='<scvprogressbar:oval style="width:'+l+"px; height:"+l+"px; position:relative; top:"+h+"px; left:"+g+'px;" strokeweight="'+z+'px" strokecolor="'+K+'" fill="false"><scvprogressbar:fill opacity="0%" color="transparent" /></scvprogressbar:oval>'),x>=A?e+='<scvprogressbar:oval style="width:'+l+"px; height:"+l+"px; position:relative; top:"+h+"px; left:"+g+'px;" strokeweight="'+p+'px" strokecolor="'+v+'" fill="false"><scvprogressbar:fill opacity="0%" color="transparent" /></scvprogressbar:oval>':(e+='<scvprogressbar:oval style="width:'+l+"px; height:"+l+"px; position:relative; top:"+h+"px; left:"+g+'px;" strokeweight="'+p+'px" strokecolor="'+H+'" fill="false"><scvprogressbar:fill opacity="0%" color="transparent" /></scvprogressbar:oval>',e+='<scvprogressbar:arc style="width:'+l+"px; height:"+l+"px; position:relative; top:"+h+"px; left:"+g+'px;" fill="false" strokeweight="'+p+'px" strokecolor="'+v+'" startangle="'+C+'" endangle="'+O+'"><scvprogressbar:fill opacity="0%" color="transparent" /></scvprogressbar:arc>'),e+="</scvprogressbar:group>"),t.html(e)}F.enabled&&(t.find(".sui-progressbar-text").remove(),f.text=a('<div class="sui-progressbar-text" />').appendTo(t).html(b.format.call(f,F.template,f._value)),G=f.text.width(),N=f.text.height(),f.text.css({top:(j-N)/2+d,left:(m-G)/2+d}))},value:function(){var b,a=this,c=a.options,d=[].slice.call(arguments);if(!(d.length>0))return a._value;if(a._enabled){b=y(s(d[0],c.max),c.min);var e=a.trigger("change",{value:b});e.isDefaultPrevented()||(a._value=b,a._render(),b>=c.max&&a.trigger("complete"))}},enabled:function(){var d,b=this,e=a(b.element),f=[].slice.call(arguments);return f.length>0?(d=!!f[0],d?e.removeAttr(h).removeClass("sui-progressbar-disabled"):e.attr(h,h).addClass("sui-progressbar-disabled"),b._enabled=d,b.options.layout==c&&b._render(),void 0):b._enabled},destroy:function(){var b=this,c=b.options.cls;a(l).off(b._eventNS),a(b.element).removeClass("sui-progressbar sui-progressbar-disabled sui-progressbar-vertical sui-progressbar-circular"+(c?" "+c:"")).empty(),j.fn.destroy.call(b)}});r.defaults=x,b.ui.plugin("ProgressBar",r)}(jQuery,shield,this);
!function(b,c,g,j){var a,d,e=c.ui.Widget,h=(b.extend,c.is),f=h.undefined,i="change";a={min:0,max:5,step:1,symbolWidth:16,symbolHeight:16,enabled:!0,markPreset:!1,value:0,events:{}},d=e.extend({init:function(b,c){var a=this;e.fn.init.apply(a,arguments),a._enabled=a.options.enabled,a._renderRating(b,c,!1)},_setSelection:function(b){var a=this;return a._enabled?(a._value=b,a._markPreset&&(a._markPreset=!1),a._range.find(".sui-rating-hover").hide(),a._range.find(".sui-rating-selected").width(b*a._symbolWidth-a._min*a._symbolWidth).show(),a.trigger(i),!0):void 0},_calcRawScore:function(e,d){var c=this,f=d.changedTouches?d.changedTouches[0].pageX:d.pageX,a=f-b(e).offset().left;return c._ltr||(a=c._range.width()-a),a>c._range.width()&&(a=c._range.width()),0>a&&(a=0),Math.ceil(a/c._symbolWidth*(1/c._step))},_setHover:function(d){var b,c,a=this;a._enabled&&(b=d*a._symbolWidth*a._step,c=a._range.find(".sui-rating-hover"),c.width()!=b&&(a._range.find(".sui-rating-selected").hide(),c.width(b).show()))},_touchHandler:function(b){var e=b.originalEvent.changedTouches,a=e[0],c="";switch(b.type){case"touchmove":c="mousemove";break;case"touchend":c="mouseup";break;default:return}var d=document.createEvent("MouseEvent");d.initMouseEvent(c,!0,!0,g,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(d),b.preventDefault()},_renderRating:function(e,c,g){var b=this,h=1;if(b._item=b.element,b._item.hasClass("sui-rating")||b._item.addClass("sui-rating"),b._ltr=!b.element.parent().hasClass("sui-rtl"),g){var d=null;f(b._value)?(d=isNaN(c.value)?a.value:c.value,b._value=d):d=b._value,b._enabled&&(b._wired=!1)}if(!b._initialized){b._min=isNaN(c.min)?a.min:c.min,b._max=isNaN(c.max)?a.max:c.max,b._step=isNaN(c.step)?a.step:c.step,b._symbolWidth=isNaN(c.symbolWidth)?a.symbolWidth:c.symbolWidth,b._symbolHeight=isNaN(c.symbolHeight)?a.symbolHeight:c.symbolHeight,b._value=isNaN(c.value)?a.value:c.value,b._markPreset=isNaN(c.markPreset)?a.markPreset:c.markPreset,e="DIV"==b._item[0].nodeName?"div":"span",h++;var j='<{{element}} id="shieldRating-range-{{index}}" class="sui-rating-range" tabindex="0"><{{element}} class="sui-rating-selected" style="height:'+b._symbolHeight+'px"></{{element}}><{{element}} class="sui-rating-hover" style="height:'+b._symbolHeight+'px"></{{element}}></{{element}}>',k=j.replace(/{{index}}/gi,h).replace(/{{element}}/gi,e);this.element.append(k),b._initialized=!0}b._item.find(".sui-rating-selected, .sui-rating-hover").height(b._symbolHeight),b._range=b._item.find(".sui-rating-range"),b._range.width(b._symbolWidth*(b._max-b._min)).height(b._symbolHeight);var i="sui-rating-preset"+(b._ltr?"":"-rtl");if(b._markPreset?b._item.find(".sui-rating-selected").addClass(i):b._item.find(".sui-rating-selected").removeClass(i),null!=b._value){var l=(b._value-b._min)*b._symbolWidth;b._item.find(".sui-rating-selected").width(l)}b._wired||(b._enabled&&(g||(b._range.on("touchmove touchend",b._touchHandler),b._range.mousemove(function(a){var c=b._calcRawScore(this,a);b._setHover(c)}),b._range.mouseleave(function(a){b._range.find(".sui-rating-hover").hide().width(0),b._item.trigger("hover",[null]).trigger("over",[null]),b._range.find(".sui-rating-selected").show()}),b._range.mouseup(function(a){var c=b._calcRawScore(this,a),d=c*b._step+b._min;b._setSelection(d),b._range.blur()}),b._range.keyup(function(a){(38==a.which||a.which==(b._ltr?39:37))&&b._setSelection(Math.min(b._value+b._step,b._max)),(40==a.which||a.which==(b._ltr?37:39))&&b._setSelection(Math.max(b._value-b._step,b._min))}))),b._wired=!0)},value:function(){var a=this,c=a.options,d=[].slice.call(arguments);if(!(d.length>0))return f(a._value)?f(c.value)?a._value:c.value:a._value;var b=d[0];b<a._min||b>a._max||(a.options.value=b,a._value=b,a._renderRating(a,c,!0))},enabled:function(){var a=this,d=a.options,b=a.element,c=[].slice.call(arguments);return c.length>0?(a._enabled=c[0],a._renderRating(a,d,!0),a._enabled?b.removeClass("sui-rating-disabled"):b.addClass("sui-rating-disabled"),void 0):a._enabled},destroy:function(){var a=this;b(a.element).removeClass("sui-rating-hover sui-rating-selected sui-rating-disabled sui-rating-preset-rtl sui-rating-preset sui-rating").empty(),a._range.off("touchmove touchend",a._touchHandler),a._markPreset=a._enabled=a._min=a._max=a._value=a._ltr=a._item=a._symbolWidth=a._symbolHeight=a._step=a._wired=a._initialized=a._range=null,e.fn.destroy.call(a)}}),d.defaults=a,c.ui.plugin("Rating",d)}(jQuery,shield,this);
!function(a,d,v,f){var y,p,n=d.ui.Widget,z=(d.Class,document,Math.abs),i=(Math.min,Math.max,Math.floor),g=a.proxy,e=(a.each,a.map,d.Constants.KeyCode),s=d.format,H=d.error,k=d.is,j=k.defined,G=(k.string,k.object,k.func,d.to.number),l="aria-describedby",I="value",t="tabindex",h="disabled",c="horizontal",q="both",r="top",F="bottom",m="left",C="up",A="right",B="down",o="click",D="keydown",E="slide",x="change",u="focus",w="blur",b="px";y={cls:f,orientation:c,min:0,max:100,value:f,step:1,largeStep:2,enabled:!0,buttons:!1,values:{enabled:!0,template:"{0}"},ticks:{enabled:!1,type:q,step:1},tooltip:{enabled:!1,template:"{0}"},width:f,height:f,events:{}},p=n.extend({init:function(){n.fn.init.apply(this,arguments);var d,e,h,f,b=this,c=b.options,k=c.cls,i=c.value,m=c.dieOnError,l=c.orientation;return b._original=e=a(b.element),"input"!==e.prop("tagName").toLowerCase()?void H("shieldSlider: Underlying element is not INPUT",m):(b.element=d=e.wrap('<div class="sui-slider sui-slider-'+l+(k?" "+k:"")+'" />').parent(),b._eventNS=f=".shieldSlider"+b.getInstanceId(),e.hide(),h=e.attr(t),d.attr(t,j(h)?h:"0"),d.on(u+f,g(b._focus,b)).on(w+f,g(b._blur,b)).on(D+f,g(b._keyDown,b)),a(v).on("resize"+f,g(b._onWinResize,b)),j(c.width)&&d.css("width",c.width),j(c.height)&&d.css("height",c.height),b._buttonOffset=5,b._buttonScaleOffset=20,b._width=d.innerWidth(),b._height=d.innerHeight(),b._buttons=b._createButtons(),b._scale=b._createScale(),b._ticks=b._createTicks(),b._createBar(),b._showValues(),b._elWidth=d.width(),b._elHeight=d.height(),j(i)||(i=G(b._value())),d.attr("role","slider").attr("aria-orientation",l).attr("aria-valuemin",c.min).attr("aria-valuemax",c.max),b.value(i),void b.enabled(c.enabled))},refresh:function(a){this.refreshWithElement(this._original,a)},_createButtons:function(){var d,h,e,b=this,i=b.options,j=i.orientation,f=j==c,g=[];if(i.buttons)return d=a('<div class="sui-slider-button sui-unselectable" unselectable="on" />').appendTo(b.element),h=a('<span class="sui-slider-button-arrow-'+(f?m:C)+' sui-unselectable" unselectable="on" />').appendTo(d),e=d.outerWidth(),d.css({left:f?b._buttonOffset:(b._width-e)/2,top:f?(b._height-e)/2:b._buttonOffset}),d.click(function(){b._hasFocus||b.element.focus(),b._stepPrev()}),g.push(d),d=a('<div class="sui-slider-button sui-unselectable" unselectable="on" />').appendTo(b.element),h=a('<span class="sui-slider-button-arrow-'+(f?A:B)+' sui-unselectable" unselectable="on" />').appendTo(d),d.css({left:f?b._width-(b._buttonOffset+e):(b._width-e)/2,top:f?(b._height-e)/2:b._height-(b._buttonOffset+e)}),d.click(function(){b._hasFocus||b.element.focus(),b._stepNext()}),g.push(d),g},_createScale:function(){var b=this,i=b.options,h=i.orientation,f=h==c,e=b._buttons?b._buttons[0].outerWidth():0,d=a('<div class="sui-slider-scale sui-slider-scale-'+h+' sui-unselectable" unselectable="on" />').appendTo(b.element);return d.css({left:f?b._buttonOffset+e+b._buttonScaleOffset:(b._width-d.outerWidth())/2,top:f?(b._height-d.outerHeight())/2:b._buttonOffset+e+b._buttonScaleOffset}),f?d.width(b._width-2*(b._buttonOffset+b._buttonScaleOffset+e)):d.height(b._height-2*(b._buttonOffset+b._buttonScaleOffset+e)),d.on(o,g(b._scaleClick,b)),d},_scaleClick:function(o){var g,d,e,h,b,a=this,m=a.options.orientation,j=m==c,k=o.originalEvent,n=j?k.clientX:k.clientY,l=a.element.offset(),p=i(j?l.left:l.top);if(a._hasFocus||a.element.focus(),a._enabled){for(b=0;b<a._ticks.length;b++)g=a._ticks[b],d=z(n-(g.tick+p)),(e===f||e>d)&&(e=d,h=g);a._moveBar(h)}},_keyDown:function(d){var a=this,m=a.options.orientation,f=m==c,g=d.originalEvent,b=g.keyCode,o=a._ticks.length-1,j=b===(f?e.LEFT:e.UP),k=b===(f?e.RIGHT:e.DOWN),h=b===(f?e.PAGEDOWN:e.PAGEUP),i=b===(f?e.PAGEUP:e.PAGEDOWN),n=b==e.HOME,l=b==e.END;!g.ctrlKey&&a._enabled&&(j||h?(a._stepPrev(h),d.preventDefault()):k||i?(a._stepNext(i),d.preventDefault()):n?(a._moveBar(a._ticks[0]),d.preventDefault()):l&&(a._moveBar(a._ticks[o]),d.preventDefault()))},_createTicks:function(){var k,s,g,h,p,x,o,e,a=this,n=a.options,D=n.orientation,j=D==c,z=n.max,w=n.min,t=n.step,v=n.ticks,l=v.type,B=v.step,C=0,d=i((z-w)/t),y=f,u=0;for(s=[],h=j?a._scale.outerWidth():a._scale.outerHeight(),h>=d?(p=i(h/d),C=h%d,x=h/d-p):(y=d/h*t,d=h,p=1,t=1),o=j?a._scale.position().left:a._scale.position().top,e=0;d>=e;e++)g={value:w+e*(y||t),tick:o},s.push(g),u+=x,u>=1&&(o++,u--),o+=p;if(v.enabled)for(e=0;d>=e;e+=B)g=s[e],(l===r||l===m||l===q)&&(k=a._createTick(),k.css({left:j?g.tick+b:a._scale.position().left-k.outerWidth()+b,top:j?a._scale.position().top-k.outerHeight()+b:g.tick+b})),(l===F||l===A||l===q)&&(k=a._createTick(),k.css({left:j?g.tick+b:a._scale.position().left+a._scale.outerWidth()+b,top:j?a._scale.position().top+a._scale.outerHeight()+b:g.tick+b}));return s},_createTick:function(){return a('<div class="sui-slider-tick sui-slider-tick-'+this.options.orientation+' sui-unselectable" unselectable="on" />').insertAfter(this._scale)},_showValues:function(){var d,f,g,b=this,e=b.options,j=e.orientation,h=j==c,k=e.max,l=e.min,i=(e.step,e.values||{});if(i.enabled)for(g=0;g<b._ticks.length;g++)d=b._ticks[g],(d.value===l||d.value===k)&&(f=a('<div class="sui-slider-mark sui-unselectable" unselectable="on">'+s(i.template,d.value)+"</div>").insertAfter(b._scale),f.css({left:h?d.tick-2-f.width()/2:b._scale.position().left+b._scale.outerWidth()+b._bar.width()/2,top:h?b._scale.position().top-b._scale.height()-b._bar.width()/2:d.tick-f.height()/2}))},_createBar:function(){var g,l,m,j,k,h,e=this,i=e.options.orientation==c;for(e._bar=g=a('<div class="sui-slider-bar sui-unselectable" id="'+d.strid()+'" unselectable="on" />').appendTo(e.element).mousedown(function(){e._hasFocus||e.element.focus()}),l=(g.innerWidth()-e._scale.outerHeight())/2+1,m=(g.innerWidth()-e._scale.outerWidth())/2+1,g.css({left:i?e._scale.position().left-g.outerWidth()/2+b:e._scale.position().left-m+b,top:i?e._scale.position().top-l+b:e._scale.position().top-g.outerWidth()/2+b}),k=[],h=0;h<e._ticks.length;h++)j=e._ticks[h],k.push({x:i?j.tick-g.outerWidth()/2:f,y:i?f:j.tick-g.outerWidth()/2});e._dragBar=new d.ui.Draggable(g,{allowedPositions:k,events:{drag:function(a){e._changeTooltipValue(!0),e.trigger(E)},stop:function(b){e._value(e.value()),e._tooltip&&a("#"+e._bar.attr("id")+":hover").length<=0&&e._tooltip.visible(!1),e.trigger(x,{value:e.value()})}}}),e._createTooltip()},_stepNext:function(b){var d,e,g,a=this,f=a.options,h=(f.orientation==c,f.step),j=f.largeStep;a._enabled&&(b=!!b,d=a._getCurrentTickInfoIndex(),e=b?d+i(j/h):d+1,e>=a._ticks.length||(g=a._ticks[e],a._moveBar(g)))},_stepPrev:function(b){var d,e,g,a=this,f=a.options,h=(f.orientation==c,f.step),j=f.largeStep;a._enabled&&(b=!!b,d=a._getCurrentTickInfoIndex(),e=b?d-i(j/h):d-1,0>e||(g=a._ticks[e],a._moveBar(g)))},_moveBar:function(e,g){var a=this,f=a.options.orientation==c,d=a._bar;e&&(d.css({left:f?e.tick-d.outerWidth()/2+b:d.css(m),top:f?d.css(r):e.tick-d.outerWidth()/2+b}),a._changeTooltipValue(),a._value(a.value()),a.element.attr("aria-valuenow",e.value),g||a.trigger(x,{value:a.value()}))},_createTooltip:function(){var a=this,e=a.options,b=e.tooltip,f=e.orientation==c;b&&b.enabled&&(a._tooltip=new d.ui.Tooltip(a._bar,{content:s(b.template,a.value()),position:f?r:m,delay:0}),a.element.attr(l,a._bar.attr(l)))},_changeTooltipValue:function(d){var c,a=this,e=a.options.tooltip,b=a._tooltip;b&&(c=s(e.template,a.value()),b.options.content!==c&&(b.refresh({content:c,enabled:a._enabled}),a.element.attr(l,a._bar.attr(l))),d&&b.visible(!0,a._bar))},_getCurrentTickInfoIndex:function(){var b,a,d,e=this,l=e.options.orientation==c,j=e._ticks,f=e._bar,i=l?f.position().left:f.position().top,k=f.outerWidth()/2,h=Number.POSITIVE_INFINITY,g=-1;for(a=0;a<j.length;a++){if(b=j[a].tick-k,i==b)return a;d=z(i-b),h>d&&(h=d,g=a)}return g},_getTickInfoIndexByValue:function(c){var a,d=this,b=d._ticks;for(a=0;a<b.length;a++)if(c==b[a].value)return a;return-1},_focus:function(c){var b=this;b._hasFocus||(b._hasFocus=!0,a(b.element).addClass("sui-slider-focus"),b.trigger(u))},_blur:function(c){var b=this;b._hasFocus&&(b._hasFocus=!1,a(b.element).removeClass("sui-slider-focus"),b.trigger(w))},_onWinResize:function(b){var a=this;a._onWinResTimeout&&clearTimeout(a._onWinResTimeout),a._onWinResTimeout=setTimeout(g(a._winResized,a),100)},_winResized:function(){var a=this,b=a.element;(a._elWidth!==b.width()||a._elHeight!==b.height())&&a.refresh()},_value:function(){return this._original.attr.apply(this._original,[I].concat([].slice.call(arguments)))},value:function(){var b,c,a=this,e=a.options.min,d=[].slice.call(arguments);return d.length>0?(c=a._getTickInfoIndexByValue(d[0]),void(-1!==c&&(b=a._ticks[c],a._moveBar(b,!0)))):(c=a._getCurrentTickInfoIndex(),b=a._ticks[c],b?b.value:e)},enabled:function(){var c,b=this,d=a(b.element),e=b._original,f=[].slice.call(arguments);return f.length>0?(c=!!f[0],c?(d.removeAttr(h).removeClass("sui-slider-disabled"),e.removeAttr(h)):(d.attr(h,h).addClass("sui-slider-disabled"),e.attr(h,h)),b._enabled=c,b._dragBar.enabled(c),b._tooltip&&b._tooltip.enabled(c),void 0):b._enabled},destroy:function(){var c,b=this,d=b._eventNS;if(a(v).off(d),clearTimeout(b._onWinResTimeout),b._onWinResTimeout=null,a(b.element).off(d),b._dragBar&&(b._dragBar.destroy(),b._dragBar=null),b._buttons)for(c=0;c<b._buttons.length;c++)b._buttons[c].off(o);b._tooltip&&(b._tooltip.destroy(),b._tooltip=null),a(b.element).find(".sui-slider-scale, .sui-slider-mark, .sui-slider-tick, .sui-slider-bar, .sui-slider-button").remove(),b._original.unwrap().show(),b._scale.off(o),b._original=b._buttons=b._bar=b._scale=b._ticks=null,n.fn.destroy.call(b)}}),p.defaults=y,d.ui.plugin("Slider",p)}(jQuery,shield,this);
!function(b,a,s,c){function f(a){return d(a)&&!q(a)&&"undefined"!==a}var j,g,h=a.ui.Widget,r=(a.Class,a.DataSource),n=(Math.min,Math.max,b.proxy),p=b.each,o=b.map,m=a.error,e=a.format,d=a.is.defined,q=a.is["null"],i=a.to["int"],l="change",k="click";j={cls:c,width:c,height:c,dataSource:c,readDataSource:!0,title:c,textTemplate:"{text}",hrefTemplate:"{href}",targetTemplate:"{target}",frequencyTemplate:"{frequency}",minSize:90,maxSize:250,events:{}},g=h.extend({init:function(){h.fn.init.apply(this,arguments);var f,a=this,e=b(a.element),c=a.options,g=c.title,i=c.dieOnError,j=c.dataSource,k=c.cls;return"div"!==e.prop("tagName").toLowerCase()?void m("shieldTagCloud: Underlying element is not DIV.",i):(f=a._eventNS=".shieldTagCloud"+a.getInstanceId(),e.empty(),g&&e.append('<div class="sui-tagcloud-title">'+g+"</div>"),a._contentEl=b('<div class="sui-tagcloud-content">').appendTo(e),e.addClass("sui-tagcloud"+(k?" "+k:"")),d(c.width)&&e.css("width",c.width),d(c.height)&&e.css("height",c.height),j?(a.dataSource=r.create(j),a.dataSource.on(l+f,n(a._dsChange,a)),void(c.readDataSource&&a.dataSource.read())):(a.destroy(),void m("shieldTagCloud: No dataSource or underlying UL element found.",i)))},_dsChange:function(){this._render()},_render:function(){var a=this,d=a._contentEl,b=a.dataSource.view||[],c=a._getMinMax(b);d.empty().append(o(b,function(b){return a._createItem(b,c[0],c[1])}))},_createItem:function(c,l,s){var g,q,p,o,m,j=this,a=j.options,r=a.minSize,t=a.maxSize,d=b('<div class="sui-tagcloud-item" />'),h=e(a.textTemplate,c);return f(h)&&(g=e(a.hrefTemplate,c),f(g)?(o=b('<a href="'+g+'" class="sui-tagcloud-link">'+h+"</a>").appendTo(d),m=e(a.targetTemplate,c),f(m)&&o.attr("target",m)):d.html(h)),p=i(e(a.frequencyTemplate,c)),q=s>l?(p-l)*(t-r)/(s-l)+r:100,d.css("font-size",q+"%").on(k,n(j._itemClick,j,c)),d},_itemClick:function(b,a){var c=this,d=c.trigger(k,{item:b});d.isDefaultPrevented()&&a&&a.preventDefault()},_getMinMax:function(f){var a,g=this,b=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY;return p(f||[],function(h,f){a=i(e(g.options.frequencyTemplate,f)),(!d(c)||a>c)&&(c=a),(!d(b)||b>a)&&(b=a)}),[b,c]},destroy:function(){var a=this,c=a.element,d=a.options,b=d.cls;a.dataSource&&a.dataSource.off(l+a._eventNS),c.removeClass("sui-tagcloud"+(b?" "+b:"")).empty(),h.fn.destroy.call(a)}}),g.defaults=j,a.ui.plugin("TagCloud",g)}(jQuery,shield,this);
!function(a,b,n,c){var m,j,i=b.ui.Widget,s=(b.Class,b.DataSource),q=(b.ui.Position,b.support),h=a.proxy,y=b.error,e=b.format,d=b.is.defined,f=b.is.func,u=b.is["boolean"],g=b.is.string,z=b.is["null"],r=b.is.integer,o=b.to["int"],t="change",k="centered",v="right",w="width",x="height",p="click",l="sui-timeline-ds-item";m={cls:c,dataSource:c,readDataSource:!0,layout:k,animation:{enabled:!0,expandDuration:200,collapseDuration:150},positionTemplate:c,iconTemplate:"{icon}",titleTemplate:"{title}",textTemplate:"{text}",collapsedTemplate:"{collapsed}",iconUrlTemplate:"{iconUrl}",iconClsTemplate:"{iconCls}",collapsible:!0,width:c,height:c,events:{}},j=i.extend({init:function(){i.fn.init.apply(this,arguments);var d,b=this,e=a(b.element),c=b.options,j=c.dieOnError,f=c.dataSource,g=c.cls;return d=b._eventNS=".shieldTimeline"+b.getInstanceId(),e.empty(),e.addClass("sui-timeline sui-timeline-"+c.layout+(c.collapsible?" sui-timeline-collapsible":"")+(g?" "+g:"")),b._initAxis(e),f?(b.dataSource=s.create(f),a(n).on("resize"+d,h(b._winResize,b)),b.dataSource.on(t+d,h(b._dsChange,b)),void(c.readDataSource&&b.dataSource.read())):(b.destroy(),void y("shieldTimeline: dataSource option is required.",j))},_initAxis:function(c){var e,f=this,b=f.options;d(b.width)&&c.css(w,b.width),d(b.height)&&c.css(x,b.height),e=a('<div class="sui-timeline-inner"/>').appendTo(c),f._axis=a('<div class="sui-timeline-axis sui-timeline-axis-'+b.layout+'"/>').appendTo(e)},_dsChange:function(){this._render()},_winResize:function(){this._recalcEventWidths()},_recalcEventWidths:function(){var b=this,c=o(a(b.element).innerWidth());c!==b._width&&(b._setEventWidths(c),b._width=c)},_setEventWidths:function(c){var b=this,f=b.options.layout,d=q.scrollbar(),e=a(b._axis).outerWidth(),g=o(f===k?(c-d)/2-e:c-d-e);a(b._axis).children(".sui-timeline-event").each(function(){a(this).outerWidth(g),a(this).hasClass("sui-timeline-event-left")&&b._positionEventLeft(a(this))})},_render:function(){var i,f,s,t,u,m,r,o,v,j,k,q,b=this,n=b.options,w=n.collapsible,x=b.dataSource.view||[],y=x.length;for(q=0;y>q;q++)i=x[q],f=a('<div class="sui-timeline-event"/>').data(l,i).appendTo(b._axis),u=a('<div class="sui-timeline-event-title">'+e(n.titleTemplate,i)+"</div>").appendTo(f),m=e(n.textTemplate,i),r=d(m)&&!z(m)&&"undefined"!==m&&""!==m?a('<div class="sui-timeline-event-text">'+m+"</div>").appendTo(f):c,b._positionEventElement(f,i,q),j=e(n.iconUrlTemplate,i),g(j)&&"undefined"!==j||(j=c),k=e(n.iconClsTemplate,i),g(k)&&"undefined"!==k||(k=c),(j||k)&&(s=a('<span class="sui-timeline-event-icon'+(w&&d(r)?" sui-timeline-event-icon-collapsible":"")+'"/>').insertBefore(f),t=a('<span class="sui-timeline-event-icon-inner"/>').appendTo(s),j?t.append('<img src="'+j+'"/>'):t.addClass(k)),w&&d(r)&&(f.addClass("sui-timeline-event-collapsible"),u.on(p,h(b._eventTitleClicked,b,f)),(j||k)&&s.on(p,h(b._eventTitleClicked,b,f)),o=e(n.collapsedTemplate,i),v=g(o)?"true"===o||"1"===o:o===!0,v&&b._collapse(f,!1,!0));b._recalcEventWidths()},_positionEventElement:function(i,l,b){var a,c,d=this,j=d.options,h=j.positionTemplate;switch(j.layout){case k:f(h)||g(h)?(a=e(h,l,b),c=g(a)?"undefined"===a?b%2:"true"===a||"1"===a?!0:!1:!!a):c=b%2,c&&d._positionEventLeft(i);break;case v:d._positionEventLeft(i)}},_positionEventLeft:function(b){b.addClass("sui-timeline-event-left").css("left",-1*a(b).width())},_isExpanded:function(b){return!a(b).hasClass("sui-timeline-event-collapsed")},_getEventItem:function(b){return a(b).data(l)},_expand:function(b,g,h,c){var d,a=this,e=a.options.animation;return a._isExpanded(b)?void(f(c)&&c.call(a)):void(g&&(d=a.trigger("expand",{element:b,item:a._getEventItem(b)}),d.isDefaultPrevented())||b.find(".sui-timeline-event-text").first().slideDown(e.enabled&&!h?e.expandDuration:0,function(){b.removeClass("sui-timeline-event-collapsed"),f(c)&&c.call(a)}))},_collapse:function(b,g,h,c){var d,a=this,e=a.options.animation;return a._isExpanded(b)?void(g&&(d=a.trigger("collapse",{element:b,item:a._getEventItem(b)}),d.isDefaultPrevented())||b.find(".sui-timeline-event-text").first().slideUp(e.enabled&&!h?e.collapseDuration:0,function(){b.addClass("sui-timeline-event-collapsed"),f(c)&&c.call(a)})):void(f(c)&&c.call(a))},_eventTitleClicked:function(a,c){var b=this;b._isExpanded(a)?b._collapse(a,!0,!1):b._expand(a,!0,!1)},_getEvent:function(b){return a(r(b)?a(this._axis).children(".sui-timeline-event")[b]:b)},expanded:function(){var b=this,a=[].slice.call(arguments),f=u(a[0])?a.shift():c,e=b._getEvent(a[0]);return d(f)?void(f?b._expand(e,!1,!1,a[1]):b._collapse(e,!1,!1,a[1])):b._isExpanded(e)},expandAll:function(){var b=this;a(b._axis).children(".sui-timeline-event").each(function(){b._expand(a(this),!1,!1)})},collapseAll:function(){var b=this;a(b._axis).children(".sui-timeline-event").each(function(){b._collapse(a(this),!1,!1)})},destroy:function(){var b=this,e=b.element,f=b.options,c=f.cls,d=b._eventNS;a(n).off(d),b.dataSource&&b.dataSource.off(d),e.removeClass("sui-timeline"+(c?" "+c:"")).empty(),b._width=null,i.fn.destroy.call(b)}}),j.defaults=m,b.ui.plugin("Timeline",j)}(jQuery,shield,this);
!function(a,b,c,d){var i,g,e=b.ui.Widget,k=(b.Class,b.Constants,b.format),s=document,f=(a.extend,a.map,a.each,a.proxy),p=b.error,j=b.is["boolean"],y=b.is.object,u=b.is.defined,w=(b.is.integer,b.to["int"],b.to.number,b.support,"close"),x="minimize",q="maximize",l="resize",m="scroll",t="pin",h="overflow",v="hidden",o="px",n="center",r=function(b){return a("<div/>").text(b).html()};i={title:"",titleBarButtons:["pin","minimize","maximize","close"],content:d,cls:d,visible:!0,pinned:!1,modal:!1,width:400,height:300,resizable:{maxWidth:d,maxHeight:d,minWidth:200,minHeight:150},draggable:!0,position:d,appendToBody:!1,events:{}},g=e.extend({init:function(){e.fn.init.apply(this,arguments),u(this.initialOptions.titleBarButtons)&&(this.options.titleBarButtons=this.initialOptions.titleBarButtons);var w,v,c=this,d=c.options,n=d.cls,o=d.dieOnError,m=d.titleBarButtons,l=d.resizable,i=d.draggable,h=d.content,t=d.position,g=a(c.element),q=!1;return"div"!==a(g).prop("tagName").toLowerCase()?void p("shieldWindow: Underlying element is not DIV",o):m&&m.length>0&&!b.ui.Button?void p("shieldWindow: The titleBarButtons setting requires ShieldUI Button to be loaded",o):(c._eventNS="shieldWindow"+c.getInstanceId(),d.appendToBody?(g.appendTo(s.body),c._parentIsBody=!0):c._parentIsBody="body"==g.parent().prop("tagName").toLowerCase(),c._origHtml=g.html(),g.empty(),g.addClass("sui-window"+(n?" "+n:"")),g.css({width:d.width,height:d.height,position:"absolute"}),c.titleBarEl=w=a('<div class="sui-window-titlebar"><div class="sui-window-title">'+d.title+'</div><div class="sui-window-icons"></div></div>').appendTo(g),c._initTitleBarButtons(),c.contentEl=v=a('<div class="sui-window-content"></div>').appendTo(g),c._fixContent(),y(t)?g.css(t):q=!0,l&&(j(l)&&(l={}),c.resizable=new b.ui.Resizable(g,l),c.resizable.on("resized",f(c._fixContent,c))),i&&(j(i)&&(i={}),i.handle=c.titleBarEl,c.draggable=new b.ui.Draggable(g,i)),c._hasIframe=!1,h?h.template?h.template.dataUrl?a.ajax({url:h.template.dataUrl,dataType:"json",success:function(a,b,d){c.content(k(h.template.body,a)),c._focusFirst()},error:function(d,a,b){c.content("Error occured while reading URL: "+a+" - "+b)}}):(c.content(k(h.template.body,h.template.data)),c._focusFirst()):h.remote?h.remote.iframe?(c._hasIframe=!0,c.content('<iframe class="sui-window-iframe" src="'+h.remote.url+'" style="border:none; border-width:0px; width:100%; height:100%;"></iframe>'),c._focusFirst()):c.contentEl.load(h.remote.url,function(){c._focusFirst()}):(c.content(c._origHtml),c._focusFirst()):(c.content(c._origHtml),c._focusFirst()),c._minimized=!1,c._maximized=!1,c._destroyed=!1,g.attr("role","dialog").attr("aria-labelledby",r(d.title)),c.pinned(!!d.pinned),c.visible(!!d.visible),void(q&&c.center()))},_focusFirst:function(){var b=a(this.contentEl).find(".sui-checkbox:not(.sui-checkbox-disabled), .sui-radiobutton:not(.sui-radiobutton-disabled), .sui-input:not(.sui-input-disabled), .sui-combobox:not(.sui-combobox-disabled), .sui-dropdown:not(.sui-dropdown-disabled), .sui-listbox:not(.sui-listbox-disabled), .sui-switch:not(.sui-switch-disabled), a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]").filter(":visible").first();a(b).length>0&&a(b).focus()},_initTitleBarButtons:function(){var g,h,b,d,c=this,i=c.options,e=i.titleBarButtons,j=i.modal;if(c.titleBarButtons={},e&&e.length>0){for(g=c.titleBarEl.find(".sui-window-icons"),d=0;d<e.length;d++)b=e[d],("pin"===b||"minimize"===b||"maximize"===b||"close"===b)&&(j&&"close"!==b||(h="pin"==b?"_onPin":"minimize"==b?"_onMinimize":"maximize"==b?"_onMaximize":b,c.titleBarButtons[b]=a('<button type="button"><div class="sui-sprite sui-window-button-icon sui-window-button-icon-'+b+'"></div></button>').appendTo(g).shieldButton({cls:"sui-window-button",events:{click:f(c[h],c,!0)}}).swidget()));g.on("mousedown",function(a){return a.preventDefault(),a.stopPropagation(),!1})}},_destroyTitleBarButtons:function(){var a,c=this,b=c.titleBarButtons;for(a in b)b.hasOwnProperty(a)&&b[a].destroy();c.titleBarButtons={}},_createModal:function(){var b=this,d=a(b._parentIsBody?c:b.element.parent()),e=a(d).scrollTop(),f=a(d).scrollLeft();b._lockScroll(),b._modal=a('<div class="sui-window-modal"></div>').insertBefore(b.element).css({top:e,left:f})},_closeModal:function(){var b=this;a(b._modal).remove(),b._unlockScroll()},_lockScroll:function(){var b=this,c=b.element.parent();b._scrollTop=a(c).scrollTop(),b._scrollLeft=a(c).scrollLeft(),b._parentOverflow=a(c).css(h),c.css(h,v).scrollTop(b._scrollTop).scrollLeft(b._scrollLeft)},_unlockScroll:function(){var a=this,b=a.element.parent();b.css(h,a._parentOverflow).scrollTop(a._scrollTop).scrollLeft(a._scrollLeft)},_fixContent:function(){var b=this;a(b.contentEl).outerWidth(a(b.element).innerWidth()).innerHeight(a(b.element).innerHeight()-a(b.titleBarEl).outerHeight()),b._hasIframe&&a(b.contentEl).find(".sui-window-iframe").width(a(b.contentEl).width()).height(a(b.contentEl).height())},center:function(){var d=this,e=a(d.element);b.ui.Position.Set(e,d._parentIsBody?c:e.parent(),{source:n,target:n})},position:function(b){a(this.element).css(b)},getHeight:function(){a(this.element).css("height")},getWidth:function(){a(this.element).css("width")},getPosition:function(){var b=a(this.element);return{left:b.css("left"),top:b.css("top")}},content:function(){var d=this,b=a(d.contentEl),c=[].slice.call(arguments);return c.length>0?(b.empty(),void b.append(c[0])):b.html()},resize:function(b){a(this.element).css(b),this._fixContent()},_scroll:function(f){var b=this,d=a(b.element),e=b._parentIsBody;b._pinned&&d.css({left:b.originalPosition.left+a(e?c:d.parent()).scrollLeft()+o,top:b.originalPosition.top+a(e?c:d.parent()).scrollTop()+o})},_onPin:function(a){this.pinned(!this._pinned,a)},pinned:function(){var d,i,b=this,e=[].slice.call(arguments),g=a(b.element),j=b._parentIsBody,h=b.titleBarEl,k=h.find(".sui-window-button-icon-pin").length>0?h.find(".sui-window-button-icon-pin"):h.find(".sui-window-button-icon-unpin");return e.length<=0?b._pinned:(d=!!e[0],void(b._pinned!=d&&(e[1]&&(i=b.trigger(t,{pinned:d}),i.isDefaultPrevented())||(b._pinned=d,k.removeClass("sui-window-button-icon-pin sui-window-button-icon-unpin"),k.addClass(b._pinned?"sui-window-button-icon-pin":"sui-window-button-icon-unpin"),b._pinned?(b.originalPosition=g.position(),a(j?c:g.parent()).on(m+"."+b._eventNS,f(b._scroll,b)),b.draggable&&b.draggable.enabled(!1)):(a(j?c:g.parent()).off(m+"."+b._eventNS),b.origininalPosition=null,b.draggable&&b.draggable.enabled(!0))))))},_onMinimize:function(a){this.minimized(!0,a)},minimized:function(){var e,c,h,b=this,f=[].slice.call(arguments),g=a(b.element),i=a(b.contentEl),d=b.titleBarEl,j=b.titleBarButtons.minimize;return f.length<=0?b._minimized:(c=!!f[0],void(b._minimized!=c&&(f[1]&&(h=b.trigger(x,{minimized:c}),h.isDefaultPrevented())||(b._minimized=c,e=d.find(".sui-window-button-icon-minimize").length>0?d.find(".sui-window-button-icon-minimize"):d.find(".sui-window-button-icon-unminimize"),e.removeClass("sui-window-button-icon-minimize sui-window-button-icon-unminimize"),e.addClass(b._minimized?"sui-window-button-icon-unminimize":"sui-window-button-icon-minimize"),c?(b._onMinCurrHeight=g.height(),g.height(d.height()),i.hide(),b.resizable&&b.resizable.enabled(!1)):(g.height(b._onMinCurrHeight),i.show(),b.resizable&&b.resizable.enabled(!0)),j&&j.visible(!c)))))},_onMaximize:function(b){var a=this;a._minimized?a.minimized(!1,b):a.maximized(!a._maximized,b)},maximized:function(){var g,k,h,m,b=this,i=[].slice.call(arguments),d=a(b.element),e=b._beforeMaximize,j=a(b.titleBarEl);return i.length>0?(g=!!i[0],k=!!i[1],b._minimized&&b.minimized(!1,!1),b._maximized!=g&&(k&&(m=b.trigger(q,{maximized:g}),m.isDefaultPrevented())||(b._maximized=!!g,h=j.find(".sui-window-button-icon-maximize").length>0?j.find(".sui-window-button-icon-maximize"):j.find(".sui-window-button-icon-restore"),h.removeClass("sui-window-button-icon-maximize sui-window-button-icon-restore"),h.addClass(b._maximized?"sui-window-button-icon-restore":"sui-window-button-icon-maximize"),b._maximized?(b._beforeMaximize={top:d.css("top"),left:d.css("left"),width:d.width(),height:d.height()},b.resize({width:"100%",height:a(b._parentIsBody?c:d.parent()).height()}),b._lockScroll(),b.center(),b._parentIsBody&&a(c).on(l+"."+b._eventNS,f(b._onWinResizeMax,b))):(e&&(d.css({top:e.top,left:e.left}),b.resize({width:e.width,height:e.height})),b._unlockScroll(),b._parentIsBody&&(a(c).off(l+"."+b._eventNS),b._winResize=null)))),void 0):b._maximized},_onWinResizeMax:function(){var b=this;a(b.element).height(a(c).height()),b._fixContent()},close:function(c){var a,b=this;c&&(a=b.trigger(w),a.isDefaultPrevented())||b.destroy()},visible:function(){var a=this,b=[].slice.call(arguments);if(!a._destroyed)return b.length>0&&a.options.modal&&(b[0]?a._createModal():a._closeModal()),e.fn.visible.apply(a,arguments)},destroy:function(){var b=this,c=b.options.cls;b.visible(!1),b._destroyed=!0,b.resizable&&(b.resizable.destroy(),b.resizable=null),b.draggable&&(b.draggable.destroy(),b.draggable=null),b._destroyTitleBarButtons(),b.maximized(!1),b.pinned(!1),a(b.element).removeClass("sui-window"+(c?" "+c:"")),b._origHtml&&(a(b.element).html(b._origHtml),b._origHtml=null),e.fn.destroy.call(b)}}),g.defaults=i,b.ui.plugin("Window",g)}(jQuery,shield,this);