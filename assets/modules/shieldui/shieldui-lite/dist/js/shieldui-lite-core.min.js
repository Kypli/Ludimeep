/* Shield UI Lite 1.7.31 | Copyright 2013-2017 Shield UI Ltd. | https://www.shieldui.com */

/*Shield UI Lite

Copyright (c) 2013-2017 ShieldUI Ltd., https://www.shieldui.com

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

====

All files located in the node_modules, bower_components and external 
directories are externally maintained libraries used by this software which 
have their own licenses; we recommend you read them, as their terms may 
differ from the terms above.
*/

!function(b,g,j){function aa(a){var b,c="";a=Math.abs(a);do b=a%26,c=String.fromCharCode(b+97)+c,a=(a-b)/26;while(a>0);return c}function V(){return E+aa(Q++)}function y(){return R++}function _(){var b=[8,9,"a","b"],a=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return a()+a()+"-"+a()+"-4"+a().substr(0,3)+"-"+b[Math.floor(4*Math.random())]+a().substr(0,3)+"-"+a()+a()+a()}function Y(a,b){return typeof Globalize===f&&typeof Globalize.format===f?Globalize.parseDate(a,b):new Date(a)}function X(b){var c;return c=a.defined(b)&&typeof Globalize===f&&typeof Globalize.parseFloat===f?Globalize.parseFloat(b):Number(b),isNaN(c)?null:c}function z(c){if(!a.defined(c)||""===c)return"";var d=/\{([\.\d\w\:\-\/\' \[\]]+)\}/g,b=arguments,e=b&&b.length>1&&typeof b[1]===s,g=typeof Globalize===f&&typeof Globalize.format===f;return c.replace(d,function(i,a){var c,d,f=a.indexOf(":");if(f>0){var h=a;a=h.substring(0,f),d=h.substring(f+1)}return c=e?/^\d+$/.test(a)?b[parseInt(a,10)+1]:C(b[1],a):b[parseInt(a,10)+1],d&&g&&(c=Globalize.format(c,d)),c})}function u(b){if(a.func(b)){var c=[].slice.call(arguments);return c.shift(),b.apply(this,c)}return z.apply(this,arguments)}function N(){return typeof Globalize===f&&Globalize.cultures&&Globalize.cultures[Globalize.cultureSelector]&&Globalize.cultures[Globalize.cultureSelector].calendar?Globalize.cultures[Globalize.cultureSelector].calendar:{days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},firstDay:0,months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]}}}function U(){return typeof Globalize===f&&Globalize.cultures&&Globalize.cultures[Globalize.cultureSelector]&&Globalize.cultures[Globalize.cultureSelector].numberFormat?Globalize.cultures[Globalize.cultureSelector].numberFormat.currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}}function T(a,b){if(b=b!==j?b:l.dieOnError)throw new Error(a);g.console&&(g.console.error?console.error(a):console.log(a))}function d(a){var b=Object.prototype.toString.call(a);return null===a?"null":a===j?"undefined":b.substr(8,b.length-9).toLowerCase()}function t(f){var g,h,e,i,c,l=Array.apply(null,arguments),m=a.array(f)&&f.length&&!q(f,function(b){return!a.func(b)}).length,d=l[1],n=function(a,b){return a instanceof b};if(!m)return k.apply(b,l);for(a.object(d)||a.array(d)||(d={}),h=2;h<l.length;h++)if(g=l[h])for(e in g)g.hasOwnProperty(e)&&(c=g[e],i=d[e],c&&q(f,A(n,null,c)).length?d[e]=c:a.object(c)||a.array(c)?(a.object(i)||(i=d[e]=a.array(c)?[]:{}),d[e]=t(f,i,c)):a.date(c)?d[e]=new Date(c.getTime()):c!==j&&(d[e]=c));return d}function B(b){var a,c=[];for(a in b)b.hasOwnProperty(a)&&c.push(a);return c}function C(d,b){var c;if(!a.string(b))throw new Error("shield.get: parameter 'path' must be a string.");if(b=F(b),c=x[b])return c(d);try{c=new Function("a","try{return a"+b+"}catch(e){return arguments[1];}")}catch(e){throw new Error("shield.get: invalid 'path' parameter")}return x[b]=c,c(d)}function S(d,b,e){var c;if(!a.string(b))throw new Error("shield.set: parameter 'path' must be a string");if(b=F(b),c=J[b])return c(d,e);try{c=new Function("obj,val","obj"+b+"=val;")}catch(f){throw new Error("shield.set: invalid 'path' parameter")}return J[b]=c,c(d,e),d}function F(g){var d,b,f,a,e,c=g.split(".");for(b=0,f=c.length;f>b;b++)a=c[b],d=a.indexOf("["),a&&(0>d?(e=a.indexOf("'")<0?"'":'"',a=c[b]="["+e+a+e+"]"):d>0&&(a=c[b]="."+a));return c.join("")}function H(d,e){var c,a,f=[],g=b(d).length,h=e?p+"-"+e:p;for(a=0;g>a;a++)c=b(b(d)[a]).data(h),c&&f.push(c);return f}function P(a,c){l.ui[a]=c,b.fn[E+a]=function(d){var e,g=this;return typeof d===G?(e=[].slice.call(arguments,1),this.each(function(){var c,h,i=b(this).data(p);if(!i)throw new Error(u("shield: cannot call method '{0}' on uninitialized {1}.",d,a));if(c=i[d],typeof c!==f)throw new Error(u("shield: cannot find method '{0}' of {1}",d,a));return h=c.apply(i,e),h!==j?(g=h,!1):void 0}),g):this.each(function(){var e=new c(this,d);b(this).data(p,e),b(this).data(p+"-"+a,e)})}}function i(a){a?e.onselectstart==i.handler&&(e.onselectstart=i.onselectstart,e.ondragstart=i.ondragstart):e.onselectstart!=i.handler&&(i.onselectstart=e.onselectstart,i.ondragstart=e.ondragstart,e.onselectstart=e.ondragstart=i.handler)}var l=g.shield=g.shield||{},k=b.extend,q=b.grep,A=b.proxy,c=navigator.userAgent,e=document,E="shield",p="shieldWidget",s="object",G="string",f="function",v="array",w="number",K="date",O="boolean",M="null",L="undefined",D="sui-vc-top",r=function(){},Q=100,R=1e3,h={},x={},J={},n=function(){},W={SVG_NS:"http://www.w3.org/2000/svg",XHTML_NS:"http://www.w3.org/1999/xhtml",KeyCode:{BACK:8,TAB:9,ENTER:13,CTRL:17,ESC:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DEL:46}};n.extend=function(a){var f,b,c,h,g=this,e=a&&a.init?a.init:function(){g.apply(this,arguments)},i=function(){};i.prototype=g.prototype,f=e.fn=e.prototype=new i;for(b in a)a.hasOwnProperty(b)&&(c=a[b],h=d(c),c&&typeof c===s?f[b]=k(!0,h===v?[]:{},g.prototype[b],c):f[b]=c);return f.constructor=e,e.extend=g.extend,e},Date.prototype.toISOString||!function(){function a(b){var a=String(b);return 1===a.length&&(a="0"+a),a}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}();var m=n.extend({init:function(b){var a,d=this,c=(b||{}).events;d.events={},b=b||{};for(a in c)typeof c[a]===f&&d.on(a,c[a])},on:function(b,f,m){var h,c,e,l,i,g=this,k=g.events,d=o.array(b),j=a.func(f);if(a.object(b)){d=[];for(i in b)b.hasOwnProperty(i)&&d.push(i);j=!1,f=b}for(e=0,l=d.length;l>e;e++)b=d[e],h=g._eventType(b),c=j?f:f[b],a.func(c)&&(m&&(c=g._one(b,c)),(k[h]||(k[h]=[])).push({name:b,handler:c}));return g},_one:function(b,c){var d=this,a=function(){d.off(b,a),c.apply(this,arguments)};return a},_eventType:function(a){var b=(a+="").indexOf(".");return b>-1?a.substring(0,b):a},_eventNameMatch:function(f,g){var d,c,h,e,j=this,k=j._eventType(f),i=j._eventType(g);if(f+="",g+="",(k===i||!i)&&(d=f.split("."),d.shift(),d=q(d,function(b){return a.string(b)&&b.length>0}),c=g.split("."),i&&c.shift(),c=q(c,function(b){return a.string(b)&&b.length>0}),d&&c)){for(h=0,e=0;e<c.length;e++)b.inArray(c[e],d)>-1&&h++;return h>=c.length}return!1},one:function(a,b){this.on(a,b,!0)},off:function(c,g){var e,d,f,k,b,m,i=this,h=i.events,l=o.array(c),n=a.func(g);if(a.object(c)){l=[];for(m in c)c.hasOwnProperty(m)&&l.push(m);n=!1,g=c}if(a.string(c)&&0===c.indexOf(".")){for(e in h)if(h.hasOwnProperty(e)){for(d=h[e]||[],f=n?g:g||j,b=d.length-1;b>=0;b--)!i._eventNameMatch(d[b].name,c)||a.defined(f)&&d[b].handler!==f||d.splice(b,1);d.length||delete h[e]}}else for(k=0;k<l.length;k++){for(c=l[k],e=i._eventType(c),d=h[e]||[],f=n?g:(g||{})[c],b=d.length-1;b>=0;b--)!i._eventNameMatch(d[b].name,c)||a.defined(f)&&d[b].handler!==f||d.splice(b,1);d.length||delete h[e]}return i},trigger:function(e,f){var a,c,b=this,g=b._eventType(e),d=(b.events[g]||[]).slice();for(a=0,c=d.length;c>a;a++)d[a].handler.apply(b,[].slice.call(arguments,1));return f},destroy:function(){this.events={}}}),I=n.extend({init:function(c){var a=!1,b=!1;k(this,{timeStamp:(new Date).getTime(),isDefaultPrevented:function(){return a},isPropagationStopped:function(){return b},preventDefault:function(){a=!0},stopPropagation:function(){b=!0}},c)}}),Z=m.extend({init:function(e,a){var c=this,d=c.constructor;a=a||{},c.element=b(e),c.initialOptions=a,c.options=k(!0,{},d.defaults,(d.themes||{})[a.theme],a),c._iid=y(),m.fn.init.call(c,a)},getInstanceId:function(){return this._iid},refresh:function(a){this.refreshWithElement(this.element,a)},refreshWithElement:function(b,c){var a=this,d=t([n],a.options,c);a.destroy(),a.init(b,d)},hide:function(){b(this.element).hide()},show:function(){b(this.element).show()},isVisible:function(){return b(this.element).is(":visible")},visible:function(){var a=this,b=[].slice.call(arguments);return b.length>0?void(b[0]?a.show():a.hide()):a.isVisible()},focus:function(){b(this.element).focus()},trigger:function(g,c,h){var d,e=this;return c=a.event(c)?{domEvent:c}:c,!c||!c.domEvent||c.domEvent instanceof b.Event||(c.domEvent=b.Event(c.domEvent)),d=new I(k({type:g,target:e},c)),m.fn.trigger.call(e,g,d),typeof h!==f||d.isDefaultPrevented()||h.call(e,d),d}}),$=m.extend({options:{total:0,pageBuffer:2,createContainer:r,getItems:r,eventNS:".shieldVirtualized",skipRender:!1},init:function(d,c){var a=this;c=a.options=k({},a.options,c),a.element=b(d),m.fn.init.call(a,c),c.skipRender||a.render()},_elements:function(){var c,e,a=this,f=a.element,d=a.options;c=a.wrapper=f.off(d.eventNS).empty().css({overflow:"auto",position:"relative"}).on("scroll"+d.eventNS,A(a.scroll,a)).append('<div class="sui-virtualized"/>').find(".sui-virtualized").css({position:"relative",overflow:"visible"}),e=a.container=b(d.createContainer(c)),c.children().css({position:"absolute",top:0}),a._positionedContainer=c.children().first()},_dimensions:function(){var c=this,d=c.options,e=d.total,a=d.itemHeight,f=Math.min(e*a,l.support.maxElementHeight),b=c.element.height(),g=Math.ceil(b/a),h=g*a,i=f-b;return{total:e,itemHeight:a,totalHeight:f,viewportHeight:b,itemsPerPage:g,pageHeight:h,totalScrollableHeight:i}},render:function(){var b,a=this,d=a.element,c=a.options;a._elements(),a.prevScroll=0,b=a.dimensions=a._dimensions(),d.find(".sui-virtualized").height(b.totalHeight),a._renderItems(0,Math.min(c.total,(c.pageBuffer+1)*b.itemsPerPage))},_renderItems:function(d,e,c){var b=this;b.options.getItems(d,e,function(f,d){var e,g=f.length;for(d=a.defined(d)?!!d:!0,d&&b.container.empty(),e=0;g>e;e++)b.container.append(f[e]);c&&c()})},scroll:function(){var e,i,j,b=this,m=b.options,d=m.pageBuffer,a=b.dimensions,f=b.element.scrollTop(),p=b.prevScroll,k=f-p,g=f/a.totalScrollableHeight,h=b._positionedContainer,l=h.data(D)||0,c=f-g*(a.pageHeight-a.viewportHeight),o=k>0&&c-l>(d/4+1)*a.pageHeight,n=0>k&&c-l<=d/4*a.pageHeight;(n||o)&&(i=Math.min(a.total,Math.floor(g*a.total-g*a.itemsPerPage)),e=Math.max(0,i-d/2*a.itemsPerPage),j=Math.min(a.total,e+(d+1)*a.itemsPerPage),c=Math.max(0,c-(i-e)*a.itemHeight),b._renderItems(e,j,function(){h.css("top",c),h.data(D,c)})),b.prevScroll=f},scrollTop:function(b){var d=this,c=d.element;return a.defined(b)?void c.scrollTop(b):c.scrollTop()},destroy:function(){var a=this,b=a.options;a.element.off(b.eventNS),a.element=null,b.createContainer=r,b.getItems=r,m.fn.destroy.call(a)}});b.fn.swidget=function(b){var a=H(this,b);return a.length?a.length>1?a:a[0]:null},b.fn.swidgets=function(a){return H(this,a)};var a={string:function(a){return d(a)===G},number:function(a){return d(a)===w},integer:function(a){return d(a)===w&&/^[\+\-]?\d+$/.test(a+"")},"float":function(a){return d(a)===w&&/^[\+\-]?\d+\.\d+$/.test(a+"")},func:function(a){return d(a)===f},object:function(a){return d(a)===s},array:function(a){return d(a)===v},date:function(a){return d(a)===K},"boolean":function(a){return d(a)===O},"null":function(a){return d(a)===M},undefined:function(a){return d(a)===L},defined:function(a){return a!==j&&null!==a},event:function(a){return typeof g.Event==f&&a instanceof g.Event||a&&a.altKey!==j}},o={"int":function(a,b){return parseInt(a,b||10)},"float":function(a){return parseFloat(a)},number:function(a){return X(a+"")},array:function(a){return a instanceof Array?a:a!==j?[a]:[]},string:function(a){return a+""},key:function(a){var g,c,e,f,h=d(a);switch(h){case M:case L:return h;case s:return g=B(a).sort(),c=[],b.each(g,function(d,b){c.push(b+":"+o.key(a[b]))}),"{"+c.join(",")+"}";case v:for(c="[",e=0,f=a.length;f>e;e++)c+=o.key(a[e]),f-1>e&&(c+=",");return c+="]";case K:return a.toISOString();default:return a+""}}};!function(){h.stableSort=function(){var a="abcdefghijklmnopqrstuvwxyz";return"xyzvwtursopqmnklhijfgdeabc"==a.split("").sort(function(b,c){return~~(a.indexOf(c)/2.3)-~~(a.indexOf(b)/2.3)}).join("")}(),h.scrollbar=function(){var b,a=e.createElement("div");return a.style.cssText="overflow:scroll;overflow-x:hidden;zoom:1;clear:both",a.innerHTML="&nbsp;",e.body.appendChild(a),b=a.offsetWidth-a.scrollWidth,e.body.removeChild(a),b},h.isRtl=function(a){return b(a).closest(".sui-rtl").length>0},h.transitions=function(){var b,c=(e.body||e.documentElement).style,d="Transition",f=["Moz","webkit","Webkit","Khtml","O","ms"];if(a.string(c[d.toLowerCase()]))return!0;for(b=0;b<f.length;b++)if(a.string(c[f[b]+d]))return!0;return!1}(),h.hasScrollbarY=function(c){var a=b(c).get(0);return a.scrollHeight>a.clientHeight},h.hasScrollbarX=function(c){var a=b(c).get(0);return a.scrollWidth>a.clientWidth}}(),function(){l.rAF=function(a){return(g.requestAnimationFrame||g.webkitRequestAnimationFrame||g.mozRequestAnimationFrame||function(a){return this.setTimeout(a,1e3/60)}).call(g,a)},l.cAF=function(a){return(g.cancelAnimationFrame||g.clearTimeout)(a)}}(),function(){var b=/MSIE/i.test(c),d=/Trident/i.test(c),e=/Firefox/i.test(c),f=/Opera/i.test(c),g=/Safari/i.test(c),a=/Chrome/i.test(c),i=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(c);h.browser={ie:b||d,firefox:e,opera:f,safari:!a&&g,chrome:a,mobile:i,version:b?parseInt(c.substr(c.indexOf("MSIE ")+5),10):d?parseInt(c.substr(c.indexOf("rv:")+3),10):e?parseInt(c.substr(c.indexOf("Firefox/")+8),10):f?parseInt(c.substr(c.indexOf("Version/")+8),10):a?parseInt(c.substr(c.indexOf("Chrome/")+7),10):g?parseInt(c.substr(c.indexOf("Version/")+8),10):0}}(),b(function(){for(var a,f=1e6,g=1e9,c=b('<div style="display:none;"/>').appendTo(e.body),d=f;;){if(a=d+f,c.css("height",a),a>g||c.height()!==a)break;d=a}c.remove(),h.maxElementHeight=d}),i.handler=function(){return!1},k(l,{Class:n,Dispatcher:m,Event:I,Constants:W,format:u,formatString:z,parseDate:Y,getCalendarInfo:N,getCurrencyInfo:U,error:T,dieOnError:!0,iid:y,strid:V,guid:_,support:h,extend:t,selection:i,type:d,is:a,to:o,keys:B,get:C,set:S,ui:k({},l.ui||{},{Widget:Z,VirtualizedContainer:$,plugin:P})})}(jQuery,this),function(d,i,W,f){function t(b,c){var a,d,e=[];if(b.map)return b.map(c);for(a=0,d=b.length;d>a;a++)e[a]=c(b[a],a,b);return e}function x(d,e,b,h){var a=g(d,e);return a===f?b&&(a=c.def(b,h,!0)):a=c.convert(a,b),a}var P,L,r,e,u,b,y,m,K,p,H,G,F,M,c,n=i.Class,o=i.Dispatcher,I=Math.min,z=Math.max,a=i.is,A=i.to,g=i.get,D=i.set,q=(i.support,i.type),E=function(){},h=d.extend,j=d.proxy,k=d.each,C=d.grep,J=d.inArray,w=d.Deferred,v="function",B="array",N="object",T="string",l="change",s="error",R="start",Q="complete",S="save",O="afterset",U="insert",V="remove";P=n.extend({init:function(a){this.data=a},read:function(c,a,d,b){return a(this.data,!1,b)},modify:function(c,a,d,b){a(b)}}),L=n.extend({init:function(a,b){this.options=a,this.cache=b},read:function(c,g,j,e){var i,l=this.options,b=l.read,k=this.cache;return a.func(b)?void b(c,g,j,e):(b=a.string(b)?{url:b}:h(!0,{},b),a.func(b.data)&&(c=b.data(c,e)),i=k.get(c),void(i!==f?g(i,!0,e):(b.data=c,b.error=j,b.success=function(a){k.set(c,a),g(a,!1,e)},d.ajax(b))))},modify:function(i,n,p,k){var c,b,m,f,e,q=this.options,l=q.modify||{},o=["create","update","remove"],r=["added","edited","removed"],g=[],s=function(a){return a.data};if(a.func(l))return void l(i,n,p,k);for(e=0;e<o.length;e++)m=o[e],f=r[e],b=l[m],i[f].length?(a.string(b)&&(b={url:b,type:"POST"}),a.func(b)?(c=g[e]=new w,b(i[f],j(c.resolve,c),j(c.reject,c),k)):a.object(b)?(b=h(!0,{},b),a.func(b.data)?b.data=b.data(i[f],k):(b.data={},b.data[f]=t(i[f],s)),c=g[e]=d.ajax(b)):(c=g[e]=new w,c.resolve())):(c=g[e]=new w,c.resolve());d.when.apply(d,g).then(n,p)}}),r=n.extend({init:function(){this.values={}},get:function(a){return this.values[A.key(a)]},set:function(b,a){return this.values[A.key(b)]=a,a},remove:function(b){var a=A.key(b),c=this.values[a];return delete this.values[a],c},clear:function(){this.values=[]}}),r.noop={get:E,set:E},u=n.extend({init:function(b,c){a.object(b)?b=A.array(b):a.string(b)&&(b=[{path:b,desc:!!c}]),this._expr=b},build:function(){var b=this._expr,c=u.cache;return a.func(b)?function(a){return function(b,c){var d=a(b.item,c.item);return 0!==d?d:b.index-c.index}}(b):a.array(b)?c.get(b)||c.set(b,function(b){return function(k,l){var i,e,f,h,m,c,d,j;for(h=0,m=b.length;m>h;h++)if(c=k.item,d=l.item,i=b[h]||{},e=i.path,f=i.desc?-1:1,a.string(e)?(c=g(c,e),d=g(d,e)):a.func(e)&&(c=e(c),d=e(d)),a.date(c)&&(c=c.getTime()),a.date(d)&&(d=d.getTime()),c!==d&&(null!=c||null!=d)){if(null==c)return-1*f;if(null==d)return 1*f;if(a.number(c)&&a.number(d)||(c=c.toString(),d=d.toString()),c.localeCompare){if(j=c.localeCompare(d),0===j)continue;return j*f}if(c>d)return 1*f;if(d>c)return-1*f}return k.index-l.index}}([].concat(b))):void 0}}),u.cache=new r,b=n.extend({init:function(a){this._expr=a||[]},build:function(){var c=this,e=b.cache,d=c._expr,a=c._func||(c._func=e.get(d));return a||(a=c._buildRecursive(d,!0),a&&e.set(d,a)),a},_single:function(c){var d;if(c){if(a.func(c.filter))return c.filter;if(d=b.filters[b.filterAliases[c.filter]])return function(a,b,c,d){return function(e){return b(g(e,a),c,d)}}(c.path,d,c.value,c.sensitive)}},_multiple:function(a,b){return function(e){var c,d=!0,f=a.length;for(c=0;f>c;c++)if(d=a[c](e),b){if(!d)break}else if(d)break;return d}},_buildRecursive:function(b,g){var c,f,d=this,e=[];if(a.array(b)){for(c=0,f=b.length;f>c;c++)e.push(d._buildRecursive(b[c]));return e.length>1?d._multiple(e,g):e[0]}return b.and||b.or?d._buildRecursive(b.and||b.or,!!b.and):d._single(b)}}),b.cache=new r,b.normalize={equatable:function(c,d,e){return a.date(c)?{a:c.getTime(),b:new Date(d).getTime()}:b.normalize.string(c,d,e)},string:function(a,b,c){return{a:c?a+"":(a+"").toLowerCase(),b:c?b+"":(b+"").toLowerCase()}},scalar:function(b,c){return a.date(b)?{a:b.getTime(),b:new Date(c).getTime()}:isNaN(parseFloat(b))?{a:b,b:c}:{a:parseFloat(b),b:parseFloat(c)}}},b.filters={eq:function(c,d,e){var a=b.normalize.equatable(c,d,e);return a.a===a.b},neq:function(c,d,e){var a=b.normalize.equatable(c,d,e);return a.a!==a.b},con:function(c,d,e){var a=b.normalize.string(c,d,e);return a.a.indexOf(a.b)>-1},notcon:function(c,d,e){var a=b.normalize.string(c,d,e);return a.a.indexOf(a.b)<0},starts:function(c,d,e){var a=b.normalize.string(c,d,e);return 0===a.a.indexOf(a.b)},ends:function(c,d,e){var a=b.normalize.string(c,d,e);return a.a.indexOf(a.b)===a.a.length-a.b.length},gt:function(c,d){var a=b.normalize.scalar(c,d);return a.a>a.b},lt:function(c,d){var a=b.normalize.scalar(c,d);return a.a<a.b},gte:function(c,d){var a=b.normalize.scalar(c,d);return a.a>=a.b},lte:function(c,d){var a=b.normalize.scalar(c,d);return a.a<=a.b},isnull:function(a){return null==a},notnull:function(a){return null!=a}},b.filterAliases={eq:"eq",equal:"eq",equals:"eq","==":"eq",neq:"neq",ne:"neq",doesnotequal:"neq",notequal:"neq",notequals:"neq","!=":"neq",con:"con",contains:"con",notcon:"notcon",doesnotcontain:"notcon",notcontains:"notcon",starts:"starts",startswith:"starts",ends:"ends",endswith:"ends",gt:"gt",greaterthan:"gt",">":"gt",lt:"lt",lessthan:"lt","<":"lt",gte:"gte",ge:"gte",greaterthanorequal:"gte",">=":"gte",lte:"lte",le:"lte",lessthanorequal:"lte","<=":"lte",isnull:"isnull","null":"isnull",notnull:"notnull",isnotnull:"notnull"},y=n.extend({init:function(){},build:function(b){var d=this,c=y.cache,a=c.get(b);return a||(a=d._build(b),a&&c.set(b,a)),a},_build:function(e){if(!e)return null;var g=e.field,d=e.aggregate,b=e.type||Number,h=function(a){return a===f?c.def(b):c.convert(a,b)};return a.func(d)?d:"count"==d?function(a){return a.length}:"sum"==d?function(e){var c,d,f=0,i=e.length;for(c=0;i>c;c++)d=x(e[c],g,b),f+=b==Date&&a.date(d)?d.getTime():d;return h(f)}:"average"==d?function(e){var c,d,f=0,i=e.length;for(c=0;i>c;c++)d=x(e[c],g,b),f+=b==Date&&a.date(d)?d.getTime():d;return h(f/i)}:"min"==d?function(a){return h(I.apply(null,t(a,function(a){return x(a,g,b)})))}:"max"==d?function(a){return h(z.apply(null,t(a,function(a){return x(a,g,b)})))}:f}}),y.cache=new r,e=n.extend({init:function(c,d,f,g,e){var b=this;b.data=c,b.total=null!=d?d:c?c.length:0,b.aggregates=f,b.groups=g,b.indices=a.array(e)?e.slice(0):t(c||[],function(b,a){return a})},filter:function(k){var c,h,f,a=this,i=new b(k).build(),g=a.data,d=[],j=[];if(i){for(c=0,h=g.length;h>c;c++)f=g[c],i(f)&&(d.push(f),j.push(a.indices[c]));a.indices=j}else d=g.slice(0);return new e(d,d.length,a.aggregates,a.groups,a.indices)},aggregate:function(c){var d,f,g,i,b=this,k=new y,j=b.data;for(a.array(c)||(c=[c]),b.aggregates=[],d=0;d<c.length;d++)f=c[d],g=k.build(f),g&&(i=g(j,f)),b.aggregates.push(h({},f,{value:i}));return new e(j.slice(0),b.total,b.aggregates,b.groups,b.indices)},aggregateGroups:function(c){var a=this,b=a.data.slice(0),d=new e(a._getInnerMostItems(b),null,null,null,null).aggregate(c);return new e(b,a.total,d.aggregates,a.groups,a.indices)},_getInnerMostItems:function(b){var a=[];return k(this._getInnerMostGroups(b),function(c,b){a=a.concat(b.items)}),a},_getInnerMostGroups:function(c){var b=this,a=[];return k(c||[],function(d,c){a=a.concat(b._hasInnerGroups(c)?b._getInnerMostGroups(c.items):c)}),a},_hasInnerGroups:function(b){return b&&b.items&&b.items.length>0?b.items[0].field&&a.array(b.items[0].items):!1},group:function(c){var d,b=this,f=b.data.slice(0);return a.array(c)||(c=[c]),c.length>0&&(d=b._groupData(c,f,b.indices),f=d[0],b.indices=d[1]),new e(f,b.total,b.aggregates,b.groups,b.indices)},_groupData:function(B,y,q){var r,j,o,b,d,z=this,c=[],m=[],l=B.slice(0),i=l.shift(),x=i.field,t=i.aggregate,v=i.order,w={};if(k(y,function(d,b){j=g(b,x),o=w[j],a.defined(o)?c[o].items.push({item:b,index:q[d]}):(w[j]=c.length,c.push(h({},i,{value:j,items:[{item:b,index:q[d]}]})))}),v&&(r=new u("value","desc"==v).build())){for(b=0;b<c.length;b++)c[b]={item:c[b],index:b};for(c.sort(r),b=0;b<c.length;b++)c[b]=c[b].item}for(b=0;b<c.length;b++)for(d=0;d<c[b].items.length;d++)m.push(c[b].items[d].index),c[b].items[d]=c[b].items[d].item;if(t&&k(c,function(a,b){c[a].aggregate=new e(b.items).aggregate(t).aggregates}),l&&l.length>0){var p=0,n=[];for(b=0;b<c.length;b++){var f=c[b],A=m.slice(p,p+(f.items?f.items.length:0)),s=z._groupData(l,f.items,A);c[b].items=s[0],n=n.concat(s[1]),p+=f.items?f.items.length:0}m=n}return[c,m]},sort:function(h,i){var a,b=this,f=new u(h,i).build(),c=b.data.slice(0),d=[],g=c?c.length:0,j=b.indices;if(f){for(a=0;g>a;a++)d.push({index:j[a],item:c[a]});for(d.sort(f),a=0;g>a;a++)c[a]=d[a].item,b.indices[a]=d[a].index}return new e(c,b.total,b.aggregates,b.groups,b.indices)},sortGroups:function(g,h){var b,a=this,f=a.data.slice(0),c=[],d=0;return b=function(f){if(a._hasInnerGroups(f))k(f.items,function(c,a){b(a)});else{var i=new e(f.items,null,null,null,a.indices.slice(d,d+(f.items?f.items.length:0))).sort(g,h);f.items=i.data,c=c.concat(i.indices),d+=f.items?f.items.length:0}},k(f,function(c,a){b(a)}),new e(f,a.total,a.aggregates,a.groups,c)},_sliceGroups:function(f,g,b,c){var d,l=this,h=0,i=[],e=[],j=a.defined(c);return 0!==b||j?(d=function(i){if(l._hasInnerGroups(i)){var q=[],r=0;return k(i.items,function(c,a){var b=d(a);b>0&&(q.push(a),r+=b)}),i.items=q,r}var m,n,f=h,o=i.items.length,p=f+o-1;return j?c-1>=p?p>=b&&(m=z(0,b-f),n=o):c-1>=f&&p>=b&&(m=z(0,b-f),n=I(o,c-f)):f>=b?(m=0,n=o):b>=f&&p>=b&&(m=z(0,b-f),n=o),a.defined(m)&&a.defined(n)&&n>m?(i.items=i.items.slice(m,n),e=e.concat(g.slice(f+m,f+n))):i.items=[],h+=o,i.items.length},k(f,function(c,a){var b=d(a);b>0&&i.push(a)}),[i,e]):[f.slice(0),g.slice(0)]},skip:function(b){var a=this;return new e(a.data.slice(b),a.total,a.aggregates,a.groups,a.indices.slice(b))},skipGroups:function(c){var a=this,b=a._sliceGroups(a.data,a.indices,c);return new e(b[0],a.total,a.aggregates,a.groups,b[1])},take:function(b){var a=this;return new e(a.data.slice(0,b),a.total,a.aggregates,a.groups,a.indices.slice(0,b))},takeGroups:function(c){var a=this,b=a._sliceGroups(a.data,a.indices,0,c);return new e(b[0],a.total,a.aggregates,a.groups,b[1])}}),e.create=function(c,a,d,f,g){a=a||{};var b=new e(c,d,f,g),h=a.remoteOperations||[],i=h.join(" "),j=i.indexOf("group")>-1;return a.group||j?(a.group?(a.filter&&(b=b.filter(a.filter)),b=b.group(a.group)):b.data=b.groups,a.aggregate&&(b=b.aggregateGroups(a.aggregate)),a.sort&&(b=b.sortGroups(a.sort)),a.skip&&(b=b.skipGroups(a.skip)),a.take&&(b=b.takeGroups(a.take))):(a.filter&&(b=b.filter(a.filter)),a.aggregate&&(b=b.aggregate(a.aggregate)),a.sort&&(b=b.sort(a.sort)),a.skip&&(b=b.skip(a.skip)),a.take&&(b=b.take(a.take))),b},m=o.extend({init:function(d){var b=this,c=b.options=a.array(d)?{data:d}:d||{},e=c.schema||{},f=m.schemas[e.type||"json"];b.data=null,b.filter=c.filter,b.sort=c.sort,b.skip=c.skip,b.take=c.take,b.group=c.group,b.aggregate=c.aggregate,b.schema=new f(e),b.remote=c.remote,b.cache=new r,b._recursive=!!c.resursive,o.fn.init.call(b,c)},isRecursive:function(){return this._recursive},trigger:i.ui.Widget.fn.trigger,_client:function(){var b=this,c=b.remote;return a.object(c)?new L(c,c.cache?b.cache:r.noop):new P(b.options.data)},_params:function(){var a,b=this,d=["filter","aggregate","group","sort","skip","take"],e=b.remote,f=b._remoteOperations().join(" "),c={local:{},remote:{}};return k(d,function(g,d){a=b[d],null!=a&&(e&&f.indexOf(d)>-1?c.remote[d]=a:c.local[d]=a)}),c},_remoteOperations:function(){var a=this.remote;return a&&a.read?a.read.operations||a.operations||[]:[]},_success:function(d,e,f,c,g){var a=this,h=a.schema,b=h.process(f);a.data=b.data,a._pTotal=b.total,a._pAggregates=b.aggregates,a._pGroups=b.groups,a._createView(b.data,e),a.trigger(Q),a.trigger(l,{fromCache:!!c,extra:g}),d.resolve(a.view,!!c)},_createView:function(c,d){var a=this,b=e.create(c,h({},d||a._params().local,{remoteOperations:a._remoteOperations()}),a._pTotal,a._pAggregates,a._pGroups);a.view=b.data,a.total=b.total,a._indices=b.indices,a.aggregates=b.aggregates},_error:function(c,d,e,a,f){var b=this;c.reject(a),d&&b.trigger(Q),b.trigger(s,{errorType:"transport",error:a,operation:e,extra:f})},read:function(d){var a=this,b=new w,c=a._params(),e=a.trigger(R,{params:c,extra:d});return e.isDefaultPrevented()?b.resolve():(a.cancel(),a._client().read(c.remote,j(a._success,a,b,c.local),j(a._error,a,b,!0,"read"),d)),b.promise()},_ensureTracker:function(){var b=this,c=b.tracker,d=b.data;if(!c){if(!d||!a.array(d))throw new Error("shield.DataSource: cannot modify when no data array is available.");c=b.tracker=new M({data:d,model:b.schema.model,events:{change:function(a){b._createView(b.data),a&&a.afterset||b.trigger(l)},error:function(a){b.trigger(s,{errorType:"tracker",path:a?a.path:"undefined path",value:a?a.value:"undefined value",error:a?a.reason:"undefined error",model:a?a.target:"undefined target model"})}}}),b.data=c.data}},getDataIndex:function(a){return this._indices[a]},add:function(a){return this._ensureTracker(),this.tracker.add(a)},insert:function(a,b){return this._ensureTracker(),this.tracker.insert(a,b)},remove:function(a){return this._ensureTracker(),this.tracker.remove(a)},removeAt:function(a){return this._ensureTracker(),this.tracker.removeAt(a)},edit:function(a){return this._ensureTracker(),this.tracker.edit(a)},insertView:function(a,b){return this.insert(this._indices[a],b)},removeAtView:function(a){return this.removeAt(this._indices[a])},editView:function(a){return this.edit(this._indices[a])},save:function(f,m){var h,g,e,k,b=this,d=b.tracker,i=d?d.changes:{added:[],edited:[],removed:[]},n=d&&b.trigger(S,{changes:i}),c=new w;if(f=a.defined(f)?!!f:!0,n&&!n.isDefaultPrevented()){for(h=b.data=d.original,g=d.data,h.length=0,e=0;e<g.length;e++)h[e]=g[e];b.options.data&&!a.func(b.options.data)&&c.done(j(b._syncLocalData,b)),b._client().modify(i,j(c.resolve,c),j(b._error,b,c,!1,"save"),m),d.destroy(),d=b.tracker=null}else c.resolve(i);return f&&(k=function(){b._createView(b.data),b.trigger(l,{extra:m})},c.then(k,k)),c.promise()},_syncLocalData:function(){var b,c=this,d=c.schema,f=(d.options.fields,c.data),e=[],g=a.array(d.getReverseDataFirstItem(c.options.data));for(b=0;b<f.length;b++)e[b]=g?[]:{},d.reverseFields(f[b],e[b]);d.reverseData(e,c.options.data)},cancel:function(){var b=this,a=b.tracker,c=a&&(a.changes.added.length||a.changes.edited.length||a.changes.removed.length);a&&(b.data=a.original,a.destroy(),a=b.tracker=null,c&&(b._createView(b.data),b.trigger(l)))},destroy:function(){var b,a=this,c=["options","data","total","aggregates","filter","sort","aggregate","group","skip","take","schema","remote","view","cache"];for(a.cancel(),a.cache&&a.cache.clear(),b=0;b<c.length;b++)delete a[c[b]];o.fn.destroy.call(a)}}),m.create=function(b,c){return b instanceof m?b:new m(a.array(b)?h({data:b},c):h({},b,c))},p=n.extend({init:function(a){this.options=a},parse:function(b){var c=this.options.parse;if(a.func(c))return c(b);if(a.string(b))try{b=d.parseJSON(b)}catch(e){}return b},data:function(c){var b=this.options.data;return a.func(b)?b(c):a.string(b)?g(c,b):c},aggregates:function(c){var b=this.options.aggregates;return a.func(b)?b(c):a.string(b)?g(c,b):f},groups:function(c){var b=this.options.groups;return a.func(b)?b(c):a.string(b)?g(c,b):f},reverseData:function(d,b){var c,e=this.options.data;if(a.func(e))e(d,b);else if(a.string(e))D(b,e,d);else if(a.array(b))for(b.length=0,c=0;c<d.length;c++)b[c]=d[c]},getReverseDataFirstItem:function(c){var b=this.data(c);return a.array(b)&&b.length>0?b[0]:f},total:function(b,d){var c=this.options.total;return b=b||[],d=d||[],a.func(c)?c(b):a.string(c)?g(b,c):d.length},fields:function(a){var b=this,d=b.options.fields,e=b.model=c.define(d);return d?t(a,function(a){return p.mapFields(a,e.fn.fields)}):a},reverseFields:function(){var c,d,b,j=this,e=j.options.fields,f=[].slice.call(arguments),g=f[0],i=f.length<=1,h=i?g:f[1];for(b in e)e.hasOwnProperty(b)&&(c=e[b],d=g[b],a.string(c.path)?D(h,c.path,d):a.func(c.path)?c.path(g,d):h[b]=d,i&&delete h[b])},process:function(b){var a=this,c=a.parse(b),e=a.aggregates(b),f=a.groups(b),d=a.fields(a.data(c));return{data:d,aggregates:e,groups:f,total:a.total(c,d)}}}),p.mapFields=function(e,i){var h,b,d,j={};e=e||{};for(h in i)i.hasOwnProperty(h)&&(b=i[h],a.string(b.path)?(d=g(e,b.path),d===f&&(d=g(e,h))):d=a.func(b.path)?b.path(e):e[h],d===f?b.type&&(d=c.def(b.type,b.def,b.nullable)):d=c.convert(d,b.type),j[h]=d);return j},H=p.extend({parse:function(b){var c=this,e=c.options;if(a.func(e.parse))b=e.parse(b);else if(a.string(b))try{b=d.parseXML(b)}catch(f){}return b&&9===b.nodeType&&(b=c._json(c._root(b))),b},_root:function(d){var a,c,b=d.childNodes;for(a=0,c=b.length;c>a;a++)if(1===b[a].nodeType)return b[a];return null},_json:function(g){var b,d,e,h,c={},i={},f="";for(e=0,h=g.attributes.length;h>e;e++)b=g.attributes[e],c["_"+b.nodeName]=b.nodeValue;for(e=0,h=g.childNodes.length;h>e;e++)switch(b=g.childNodes[e],d=b.nodeName,b.nodeType){case 1:i[d]?(a.array(c[d])||(c[d]=[c[d]]),c[d].push(this._json(b))):(c[d]=this._json(b),i[d]=!0);break;case 3:f+=b.nodeValue;break;case 4:c._cdata=b.nodeValue}return f=f.replace(/^\s+(.*)\s+$/gim,"$1"),f&&(c._text=f),c}}),G=p.extend({parse:function(c){var e,b=this.options,h=b.parse,f=d(c),g=[],i=[];if(a.func(h))return h(c);if(b.result)return b.result;if(!f[0]||"table"!==f[0].tagName.toLowerCase())return c;f.eq(0).find("thead th").each(function(){i.push(d(this).text())}).end().find("tbody tr").each(function(){e={},d(this).children().each(function(a){e[i[a]]=d(this).text()}),g.push(e)});return b.result=g,g}}),F=p.extend({parse:function(c){var b=this.options,g=b.parse,e=d(c),f=[];return a.func(g)?g(c):b.result?b.result:e[0]&&"select"===e[0].tagName.toLowerCase()?(e.find("option").each(function(b){var a=d(this);f.push({value:a.attr("value"),text:a.text(),selected:a.is(":selected")})}),b.result=f,f):c}}),m.schemas={json:p,xml:H,table:G,select:F},M=o.extend({init:function(a){var b=this;
b.original=a.data,b.data=Array.apply(null,a.data),b.model=a.model,b.changes={added:[],edited:[],removed:[]},o.fn.init.call(this,a)},_model:function(c){var a=this,b=new a.model(c);return b.on(l,j(a.trigger,a,l)),b.on(s,j(a.trigger,a,s)),b.on(O,j(a.trigger,a,l,{afterset:!0})),b},add:function(a){return this.insert(this.data.length,a)},insert:function(b,e){var a,c=this,d=c.data,f=c.changes;if(0>b||b>d.length)throw new Error("shield.DataSource: invalid item index.");return a=c._model(e),f.added.push(a),d.splice(b,0,a.data),c.trigger(l,{operation:U,index:b,model:a}),a},edit:function(a){var b,d=this,c=d.data,e=d.changes;if(isNaN(a)||0>a||a>=c.length)throw new Error("shield.DataSource: invalid item index.");return(b=C(e.added.concat(e.edited),function(b){return b.data===c[a]})[0])?b:(b=d._model(c[a]),e.edited.push(b),c[a]=b.data,b)},remove:function(d){var a=this,e=a.changes,f=C(e.added.concat(e.edited),function(a){return a===d})[0],b=-1;return d instanceof c?f&&(b=J(f.data,a.data)):b=J(d,a.data),b>-1?a.removeAt(b):void 0},removeAt:function(a){var c=this,d=c.data,e=c.changes,b=C(e.added.concat(e.edited),function(b){return b.data===d[a]})[0];if(0>a||a>d.length)throw new Error("shield.DataSource: invalid item index.");return b?b.destroy():b=new c.model(d[a]),e.removed.push(b),d.splice(a,1),c.trigger(l,{operation:V,index:a,model:b}),b},destroy:function(){var b,c=this,a=c.changes,d=a.added.concat(a.edited).concat(a.removed);for(b=0;b<d.length;b++)d[b].destroy();a.added.length=a.edited.length=a.removed.length=0,c.data=c.original=null,o.fn.destroy.call(c)}}),c=o.extend({init:function(b,c){var a=this;o.fn.init.call(a,c),a.fields=h(!0,{},a.constructor.prototype.fields),a.data=h(!0,{},b)},trigger:i.ui.Widget.fn.trigger,get:function(a){return g(this.data,a)},set:function(c,a){var b=this;a=b.validate(c,a),a!==f&&(D(b.data,c,a),b.trigger(O))},validate:function(e,a){var d,h,i=this,b=g(i.fields,e);if(!b)return a;if(q(b.validator)===v)d=b.validator;else if(q(b.type.validate)===v)d=b.type.validate;else{var j=b.type.toString().split("(")[0].split(" ")[1].toLowerCase();d=c.validators[j]}if(d){if(h=d(a),h===f)return void i.trigger(s,{errorType:"validation",path:e,value:a,error:"validation error"});a=h}return null===a&&b.nullable===!1?void i.trigger(s,{errorType:"validation",path:e,value:a,error:"null value not allowed"}):a}}),c.define=function(a){return c.extend({fields:c.normalize(h(!0,{},a))})},c.normalize=function(a){var b,c,d;a=a||{};for(b in a)a.hasOwnProperty(b)&&(c=a[b],d=q(c),d===v?a[b]={type:c}:d===B?a[b]={type:c}:d===T&&(a[b]={path:c}));return a},c.def=function(a,b,d){var c;return b!==f?q(b)===v?b():b:d?null:a===String?"":a===Number?0:a===Date?new Date:a===Boolean?!1:a===Array?[]:a===Object?{}:(c=q(a),c===B?[]:c===N?{}:c===v?a():null)},c.convert=function(b,d){var c;return null==b?b:d===String?b.toString():d===Number?(c=parseFloat(b),isNaN(c)?b:c):d===Date?(c=new Date(b),isNaN(c.getTime())?b:c):d===Boolean?a.string(b)?!/^(false|0)$/i.test(b):!!b:b},c.validators={string:function(a){return null==a?null:a.toString()},number:function(a){return null===a?null:isNaN(+a)?f:+a},date:function(a){return null===a?null:a instanceof Date?a:(a=new Date(a),isNaN(a.getTime())?f:a)},"boolean":function(a){return null===a?null:null==a?f:!!a},array:function(a){return null===a?null:q(a)===B?a:f},object:function(a){return null===a?null:q(a)===N?a:f}},K=m.extend({init:function(a){h(a,{resursive:!0}),m.fn.init.call(this,a)}}),h(i,{map:t,DataSource:m,RecursiveDataSource:K,DataQuery:e,Model:c})}(jQuery,shield,this),function(a,e,w,b){function $(){if(f(L))return L;var d,c,b=a('<div style="width:50px;position:absolute;overflow:hidden;height:50px;display:block;"><div style="width:auto;height:100px;"></div></div>'),e=b.children()[0];return a(g.body).append(b),d=e.offsetWidth,b.css(wa,I),c=e.offsetWidth,d===c&&(c=b[0].clientWidth),b.remove(),L=d-c}function Ta(a){var b=a.isWindow||a.isDocument?"":a.element.css(Ia),c=a.isWindow||a.isDocument?"":a.element.css(xa),d=b===I||b===sa&&a.width<a.element[0].scrollWidth,e=c===I||c===sa&&a.height<a.element[0].scrollHeight;return{width:e?$():0,height:d?$():0}}function ua(e){var b=a(e||w),c=la(b[0]),d=!!b[0]&&9===b[0].nodeType;return{element:b,isWindow:c,isDocument:d,offset:c?{left:0,top:0}:b.offset()||{left:0,top:0},scrollLeft:b.scrollLeft(),scrollTop:b.scrollTop(),width:c||d?b.width():b.outerWidth(),height:c||d?b.height():b.outerHeight()}}function U(a,b,c){return[T(a[0])*(Z.test(a[0])?b/100:1),T(a[1])*(Z.test(a[1])?c/100:1)]}function h(b,c){var a=b.css(c);return a?Ma(a)||0:0}function Sa(a){var b=a[0];return 9===b.nodeType?{width:a.width(),height:a.height(),offset:{top:0,left:0}}:la(b)?{width:a.width(),height:a.height(),offset:{top:a.scrollTop(),left:a.scrollLeft()}}:b.preventDefault?{width:0,height:0,offset:{top:b.pageY,left:b.pageX}}:{width:a.outerWidth(),height:a.outerHeight(),offset:a.offset()}}function na(c,d){var b=0,e=f(d)?a(d).find(c):a(c);return e.each(function(c){b=j(b,h(a(this),"z-index"))}),b}function qa(a){return a.pageX||a.pageY?{x:a.pageX,y:a.pageY}:{x:a.clientX+g.body.scrollLeft-g.body.clientLeft,y:a.clientY+g.body.scrollTop-g.body.clientTop}}var L,q,E,y,A,r,c,Q,Y,O,aa,N,ma,m=e.ui.Widget,Ra=(e.Class,e.Constants.KeyCode),Qa=e.error,g=document,d=Math.abs,D=Math.min,j=Math.max,ga=Math.round,ha=Math.floor,ia=a.extend,o=a.proxy,ka=a.each,la=a.isWindow,f=e.is.defined,z=e.is.func,Pa=e.is.number,M=e.is.object,Oa=(e.is["null"],e.is.string),Na=e.is.array,Ma=e.to["int"],T=e.to.number,La=e.to.string,V=/left|center|right/,W=/top|center|bottom/,X=/[\+\-]\d+(\.[\d]+)?%?/,va=/^\w+/,Z=/%$/,t="mousedown",_="mouseup",C="mousemove",Ka="keydown",ca="start",da="stop",Ja="resize",Ua="resized",Aa="drag",za="drop",ya="cancel",R="disabled",n="px",k="left",v="right",l="top",x="bottom",pa="middle",i="center",wa="overflow",sa="auto",p="position",B="absolute",ra="relative",Ia="overflow-x",xa="overflow-y",I="scroll",H="horizontal",G="vertical",Ba="my",Ca="at",Da="marginLeft",Ea="marginRight",Fa="marginTop",Ga="marginBottom",Ha="flip",fa="pointer",ea="fit",ba="intersect",J="sui-resizable",S=J+"-"+R,u="sui-draggable",ta=u+"-"+R,oa=u+"-dragging",s="sui-unselectable",F="sui-droppable",K=F+"-"+R,P=F+"-over",ja=0;y={},y.GetWithinInfo=ua,y.GetMaxZIndex=na,y.GetCoordinates=qa,e.ui.Util=y,q=function(){return ja++,E?E:(this.init(),void(E=this))},q.prototype={_pos:null,init:function(){var b=this;a(g).on(C+".suiMouseTracker",o(b._onMouseMove,b))},_onMouseMove:function(a){this._pos=this.getPosFromEvent(a)},getPosFromEvent:function(a){return qa(a)},getPosition:function(b){var a=this;return null===a._pos&&f(b)&&(a._pos=a.getPosFromEvent(b)),a._pos},isInWindow:function(g){var h=this,b=h.getPosition(g),c=b.x,d=b.y,e=a(w).scrollTop(),f=a(w).scrollLeft();return c>=f&&c<=f+a(w).width()&&d>=e&&d<=e+a(w).height()},destroy:function(){--ja>0||(a(g).off(C+".suiMouseTracker"),E=null)}},e.MouseTracker=q,A={},A.Set=function(J,C,n){if(!J||!C||!n)throw"Invalid arguments passed to Position.Set";var s,f,g,q,m,u,c={my:n.source,at:n.target,collision:n.overflow,inside:n.inside},B=a(C),E=ua(c.inside),D=Ta(E),t=(c.collision||Ha).split(" "),y={};u=Sa(B),B[0].preventDefault&&(c.at="left top"),f=u.width,g=u.height,q=u.offset,m=ia({},q),ka([Ba,Ca],function(){var b,d,e=this,a=(c[e]||"").split(" ");1===a.length&&(a=V.test(a[0])?a.concat([i]):W.test(a[0])?[i].concat(a):[i,i]),a[0]=V.test(a[0])?a[0]:i,a[1]=W.test(a[1])?a[1]:i,b=X.exec(a[0]),d=X.exec(a[1]),y[e]=[b?b[0]:0,d?d[0]:0],c[e]=[va.exec(a[0])[0],va.exec(a[1])[0]]}),1===t.length&&(t[1]=t[0]),c.at[0]===v?m.left+=f:c.at[0]===i&&(m.left+=f/2),c.at[1]===x?m.top+=g:c.at[1]===i&&(m.top+=g/2),s=U(y.at,f,g),m.left+=s[0],m.top+=s[1];var F,A,e=a(J),p=e.outerWidth(),o=e.outerHeight(),K=h(e,Da),I=h(e,Fa),M=p+K+h(e,Ea)+D.width,L=o+I+h(e,Ga)+D.height,b=ia({},m),w=U(y.my,e.outerWidth(),e.outerHeight());c.my[0]===v?b.left-=p:c.my[0]===i&&(b.left-=p/2),c.my[1]===x?b.top-=o:c.my[1]===i&&(b.top-=o/2),b.left+=w[0],b.top+=w[1],b.left=ga(b.left),b.top=ga(b.top),F={marginLeft:K,marginTop:I},ka([k,l],function(a,d){r[t[a]]&&r[t[a]][d](b,{targetWidth:f,targetHeight:g,elemWidth:p,elemHeight:o,collisionPosition:F,collisionWidth:M,collisionHeight:L,offset:[s[0]+w[0],s[1]+w[1]],my:c.my,at:c.at,within:E,elem:e})}),z(n.callback)&&(A=function(){var c=q.left-b.left,m=c+f-p,h=q.top-b.top,r=h+g-o,a={target:{element:B,left:q.left,top:q.top,width:f,height:g},element:{element:e,left:b.left,top:b.top,width:p,height:o},horizontal:0>m?k:c>0?v:i,vertical:0>r?l:h>0?x:pa};p>=f&&d(c+m)<=f&&(a.horizontal=i),o>=g&&d(h+r)<=g&&(a.vertical=pa),j(d(c),d(m))>j(d(h),d(r))?a.important=H:a.important=G,n.callback(a)}),e.offset(b),A&&A()},r={fit:{left:function(a,c){var i,f=c.within,d=f.isWindow?f.scrollLeft:f.offset.left,g=f.width,h=a.left-c.collisionPosition.marginLeft,b=d-h,e=h+c.collisionWidth-g-d;c.collisionWidth>g?b>0&&0>=e?(i=a.left+b+c.collisionWidth-g-d,a.left+=b-i):e>0&&0>=b?a.left=d:b>e?a.left=d+g-c.collisionWidth:a.left=d:b>0?a.left+=b:e>0?a.left-=e:a.left=j(a.left-h,a.left)},top:function(a,b){var i,g=b.within,d=g.isWindow?g.scrollTop:g.offset.top,f=b.within.height,h=a.top-b.collisionPosition.marginTop,c=d-h,e=h+b.collisionHeight-f-d;b.collisionHeight>f?c>0&&0>=e?(i=a.top+c+b.collisionHeight-f-d,a.top+=c-i):e>0&&0>=c?a.top=d:c>e?a.top=d+f-b.collisionHeight:a.top=d:c>0?a.top+=c:e>0?a.top-=e:a.top=j(a.top-h,a.top)}},flip:{left:function(c,a){var i,h,b=a.within,p=b.offset.left+b.scrollLeft,l=b.width,j=b.isWindow?b.scrollLeft:b.offset.left,m=c.left-a.collisionPosition.marginLeft,n=m-j,o=m+a.collisionWidth-l-j,e=a.my[0]===k?-a.elemWidth:a.my[0]===v?a.elemWidth:0,g=a.at[0]===k?a.targetWidth:a.at[0]===v?-a.targetWidth:0,f=-2*a.offset[0];0>n?(i=c.left+e+g+f+a.collisionWidth-l-p,(0>i||i<d(n))&&(c.left+=e+g+f)):o>0&&(h=c.left-a.collisionPosition.marginLeft+e+g+f-j,(h>0||d(h)<o)&&(c.left+=e+g+f))},top:function(b,a){var k,j,f=a.within,p=f.offset.top+f.scrollTop,n=f.height,m=f.isWindow?f.scrollTop:f.offset.top,o=b.top-a.collisionPosition.marginTop,h=o-m,i=o+a.collisionHeight-n-m,q=a.my[1]===l,e=q?-a.elemHeight:a.my[1]===x?a.elemHeight:0,c=a.at[1]===l?a.targetHeight:a.at[1]===x?-a.targetHeight:0,g=-2*a.offset[1];0>h?(j=b.top+e+c+g+a.collisionHeight-n-p,b.top+e+c+g>h&&(0>j||j<d(h))&&(b.top+=e+c+g)):i>0&&(k=b.top-a.collisionPosition.marginTop+e+c+g-m,b.top+e+c+g>i&&(k>0||d(k)<i)&&(b.top+=e+c+g))}},flipfit:{left:function(){r.flip.left.apply(this,arguments),r.fit.left.apply(this,arguments)},top:function(){r.flip.top.apply(this,arguments),r.fit.top.apply(this,arguments)}}},e.ui.Position=A,ma={enabled:!0,cls:b,iframeFix:!1,resizeCls:b,delta:1,handles:["e","w","n","s","se","sw","ne","nw"],handleWidth:8,handleZIndex:105,minHeight:16,minWidth:16,maxHeight:b,maxWidth:b,events:{}},N=m.extend({init:function(){m.fn.init.apply(this,arguments),f(this.initialOptions.handles)&&(this.options.handles=this.initialOptions.handles);var b=this,e=a(b.element),c=b.options,d=c.cls;b._eventNS=".shieldResizable"+b.getInstanceId(),b.mouseTracker=new q,e.addClass(J+(d?" "+d:"")),b._initHandles(),b.enabled(c.enabled)},_initHandles:function(){var h,d,e,b=this,l=a(b.element),p=(l.width(),l.height()),j=b.options,m=j.handles,k=j.handleWidth,i=k+n,f=k+2+n,c="-"+(k-2)+n,q=j.handleZIndex;for(b.handles=[],e=0;e<m.length;e++){switch(h=La(m[e]).toLowerCase(),d={},h){case"e":d={width:i,height:p+n,top:0,right:c};break;case"w":d={width:i,height:p+n,top:0,left:c};break;case"n":d={width:"100%",height:i,top:c};break;case"s":d={width:"100%",height:i,bottom:c};break;case"se":d={width:f,height:f,bottom:c,right:c};break;case"sw":d={width:f,height:f,bottom:c,left:c};break;case"ne":d={width:f,height:f,top:c,right:c};break;case"nw":d={width:f,height:f,top:c,left:c}}d.zIndex=q,b.handles[e]={type:h},b.handles[e][t]=o(b._handleMouseDown,b,e),b.handles[e].element=a('<div class="sui-resizable-handle sui-resizable-dir-'+h+'"></div>').appendTo(l).css(d).on(t,b.handles[e][t])}a(g).on(_+b._eventNS,o(b._handleMouseUp,b)).on(C+b._eventNS,o(b._handleMouseMove,b))},_destroyHandles:function(){var b,c=this,d=c.handles;for(a(g).off(c._eventNS),b=0;b<d.length;b++)a(c.handles[b].element).off(t,c.handles[b][t]).remove();c.handles=[]},_fixIframes:function(){var c,d=this,b=d.options.iframeFix;b&&(c=b===!0?"iframe":b,d._fixedFrames=a(g.body).find(c).map(function(){var b=a(this);return a("<div/>").css(p,B).appendTo(b.parent()).outerWidth(b.outerWidth()).outerHeight(b.outerHeight()).offset(b.offset())[0]}))},_unfixIframes:function(){var b=this;b._fixedFrames&&(a(b._fixedFrames).remove(),delete b._fixedFrames)},_handleMouseDown:function(c,d){var b=this;b._enabled&&!b.resizing&&(b.resizing=!0,b.resizingHandle=c,b.oldPos=b.mouseTracker.getPosition(d),b.startSent=!1,a(b.element).addClass(s),b._fixIframes())},_handleMouseMove:function(G){var s,x,y,m,j,c,b,i,g,v,w,q,o,t,e=this,p=a(e.element),r=e.options,u=r.delta,z=r.minWidth,A=r.maxWidth,B=r.minHeight,C=r.maxHeight,E=r.resizeCls,F=e.resizingHandle,D=e.handles,H=e.mouseTracker,I=e.oldPos;if(H.isInWindow(G)&&e.resizing&&f(F)&&(y=H.getPosition(G),m=y.x-I.x,j=y.y-I.y,s=D[F],x=s.type,d(m)>=u||d(j)>=u)){switch(/^(se|sw|ne|nw)$/i.test(x)||(/^(e|w)$/i.test(x)?j=0:m=0),d(m)<u&&(m=0),d(j)<u&&(j=0),c=m,b=j,i=0,g=0,x){case"w":c=-m,i=-c;break;case"n":b=-j,g=-b;break;case"nw":c=-m,b=-j,i=-c,g=-b;break;case"sw":c=-m,i=-c;break;case"ne":b=-j,g=-b}if(q=p.width(),o=p.height(),v=h(p,l),w=h(p,k),c>0?(f(A)&&q+c>A&&(c=A-q,0!==i&&(i=-c)),0>w+i&&(c-=w-i,i=-c)):0>c&&f(z)&&z>q+c&&(c=z-q,0!==i&&(i=-c)),b>0?(f(C)&&o+b>C&&(b=C-o,0!==g&&(g=-b)),0>v+g&&(b-=v-g,g=-b)):0>b&&f(B)&&B>o+b&&(b=B-o,0!==g&&(g=-b)),0!==c||0!==b){e.startSent||(e.startSent=!0,e.trigger(ca),E&&p.addClass(E));var J=e.trigger(Ja,{deltaX:c,deltaY:b});if(!J.isDefaultPrevented()){if(p.width(q+c).height(o+b),(0!==i||0!==g)&&p.css({top:v+g+n,left:w+i+n}),e.oldPos.x=e.oldPos.x+m,e.oldPos.y=e.oldPos.y+j,0!==j)for(t=0;t<D.length;t++)s=D[t],/^(e|w)$/i.test(s.type)&&a(s.element).height(o+b);e.trigger(Ua)}}}},_handleMouseUp:function(f){var c=this,e=!!c.startSent,d=c.options.resizeCls;c._unfixIframes(),c.resizing&&(c.resizing=!1,c.resizingHandle=b,c.oldPos=b,c.startSent=!1,e&&c.trigger(da),a(c.element).removeClass(s+(d?" "+d:"")))},resize:function(c,d){var e=this,b=e.options;c=j(D(c,b.maxWidth),b.minWidth),d=j(D(d,b.maxHeight),b.minHeight),a(e.element).width(c).height(d)},enabled:function(){var b,c=this,d=a(c.element),e=[].slice.call(arguments);return e.length>0?(b=!!e[0],b?d.removeClass(S):d.addClass(S),c._enabled=b,void 0):c._enabled},destroy:function(){var b=this,c=b.options.cls;b.mouseTracker.destroy(),b.mouseTracker=null,a(b.element).removeClass(J+(c?" "+c:"")),b._destroyHandles(),m.fn.destroy.call(b)}}),N.defaults=ma,e.ui.plugin("Resizable",N),c={droppables:{"default":[]},Register:function(b){var a=b.options.scope;c.droppables[a]=c.droppables[a]||[],c.droppables[a].push(b)},UnRegister:function(d){var a,e=d.options.scope,b=c.droppables[e];for(a=0;a<b.length;a++)b[a]===d&&b.splice(a,1)},PrepareOffsets:function(e,i){var f,g,b,d=c.droppables[e.options.scope]||[],h=a(e.helper||e.element);for(b=0;b<d.length;b++)f=d[b].enabled(),g=d[b].visible(),d[b].ddIsEnabled=f,d[b].ddIsVisible=g,!f||!g||e&&!d[b].accepts(e.element)||e&&e.element.get(0)===d[b].element.get(0)||(d[b].ddOffset=d[b].element.offset(),d[b].proportions({width:d[b].element[0].offsetWidth,height:d[b].element[0].offsetHeight}));e.proportions({width:h[0].offsetWidth,height:h[0].offsetHeight})},DragStart:function(a,b){c.PrepareOffsets(a,b)},Drag:function(d,e){var f,a,b=c.droppables[d.options.scope]||[],g=b.length;for(a=0;g>a;a++)!b[a].ddIsEnabled||!b[a].ddIsVisible||d&&!b[a].accepts(d.element)||d&&d.element.get(0)===b[a].element.get(0)||(f=c.Intersects(d,b[a],e),f?b[a].ddIsOver||(b[a].ddIsOver=!0,b[a].over(d,e)):b[a].ddIsOver&&(b[a].ddIsOver=!1,b[a].out(d,e)))},Drop:function(d,f){var g,a,h,i,e,b=c.droppables[d.options.scope]||[],j=b.length;for(a=0;j>a;a++)!b[a].ddIsEnabled||!b[a].ddIsVisible||d&&!b[a].accepts(d.element)||d&&d.element.get(0)===b[a].element.get(0)||(b[a].stop(),g=c.Intersects(d,b[a],f),b[a].ddIsOver=!1,g&&(e=b[a].drop(d,f),e.isDefaultPrevented()&&(h=!0),e.skipAnimation&&(i=!0)));return{cancelled:h,skipAnimation:i}},Intersects:function(m,s,x){var o,u,h,i,j,k,e,f,g,l=s.options.tolerance,t=M(l)?l.x:l,r=M(l)?l.y:l,w=s.proportions(),v=s.ddOffset,n=w.width,p=w.height,d=v.left,b=v.top;if(t==fa){var y=new q;g=y.getPosition(x),y.destroy(),o=d<=g.x&&d+n>=g.x}else h=m.proportions(),i=h.width,j=h.height,k=a(m.helper||m.element).offset(),e=k.left,f=k.top,o=t==ea?c._linesOverlap(e,e+i,d,d+n,i):t==ba?c._linesOverlap(e,e+i,d,d+n,i/2):c._linesOverlap(e,e+i,d,d+n,0);if(!o)return!1;if(r==fa){if(!g){var z=new q;g=z.getPosition(x),z.destroy()}u=b<=g.y&&b+p>=g.y}else h||(h=m.proportions(),i=h.width,j=h.height,k=a(m.helper||m.element).offset(),e=k.left,f=k.top),u=r==ea?c._linesOverlap(f,f+j,b,b+p,j):r==ba?c._linesOverlap(f,f+j,b,b+p,j/2):c._linesOverlap(f,f+j,b,b+p,0);return o&&u},_linesOverlap:function(b,c,d,e,a){return f(a)||(a=0),d>b&&e>c?c-d>a:b>d&&c>e?e-b>a:!0}},e.ui.DDManager=c,Y={enabled:!0,iframeFix:!1,cls:b,dragCls:b,scope:"default",handle:b,direction:b,min:b,max:b,step:b,allowedPositions:b,stack:!0,helper:b,appendTo:"parent",animation:{enabled:!0,revertDuration:200},events:{}},Q=m.extend({init:function(){m.fn.init.apply(this,arguments);var c,b=this,d=a(b.element),e=b.options,f=e.cls;b._eventNS=".shieldDraggable"+b.getInstanceId(),b.mouseTracker=new q,d.addClass(u+(f?" "+f:"")),c=d.css(p),c!==ra&&c!==B&&(b._origPosStyle=c,d.css(p,ra)),b.enabled(e.enabled),b.startSent=!1},proportions:function(){var a=this;return arguments.length>0?void(a._proportions=arguments[0]):a._proportions?a._proportions:a._proportions={width:a.element[0].offsetWidth,height:a.element[0].offsetHeight}},_fixIframes:function(){var c,d=this,b=d.options.iframeFix;b&&(c=b===!0?"iframe":b,d._fixedFrames=a(g.body).find(c).map(function(){var b=a(this);return a("<div/>").css(p,B).appendTo(b.parent()).outerWidth(b.outerWidth()).outerHeight(b.outerHeight()).offset(b.offset())[0]}))},_unfixIframes:function(){var b=this;b._fixedFrames&&(a(b._fixedFrames).remove(),delete b._fixedFrames)},_handleMouseDown:function(d){var b=this,c=b._eventNS;b._enabled&&!b._dragging&&(a(g.body).addClass(s),b._dragging=!0,b.startSent=!1,b.helper=b._isCustomHelper=null,b.stepPosition=b.mousePos=b.mouseTracker.getPosition(d),a(g).on(C+c,o(b._handleMouseMove,b)).on(_+c,o(b._handleMouseUp,b)).on(Ka+c,o(b._handleKeyDown,b)),b._fixIframes())},_initHelper:function(n){var b,c=this,e=c.element,f=c.options,d=f.helper,i=f.appendTo,j=f.cls,m=f.dragCls;c._helperInitialized||(d&&"original"!==d?(b=z(d)?d.call(c,{position:c.oriPosition,event:n}):"clone"==d?e.clone():a(d),b.parents("body").length||("parent"===i?e.after(b):i&&"body"!==i?b.appendTo(a(i)):b.appendTo(g.body)),/(fixed|absolute)/i.test(b.css(p))||b.css(p,B),A.Set(b,e,{source:"left top",target:"left top",overflow:"none"}),c._isCustomHelper=!0):(b=e,c._isCustomHelper=!1),c.helper=b,b.addClass(s+" "+u+(j?" "+j:"")+" "+oa+(m?" "+m:"")),c.oriPosition={left:h(b,k),top:h(b,l)},c._helperInitialized=!0)},_handleMouseMove:function(r){var u,q,p,C,A,n,o,i,m,g,O,N,e=this,B=e.options,E=B.step,I=B.direction,s=B.allowedPositions,U=s!==b&&s.length>0,v=B.min,w=B.max,T=e.mouseTracker,y=T.getPosition(r);if(T.isInWindow(r)&&e._dragging){if(e._initHelper(r),g=a(e.helper),O=g.width(),N=g.height(),C=h(g,l),A=h(g,k),U){var R,S,K,L,x,t,F=b,J=b,P=b,Q=b;for(R=y.x-e.stepPosition.x,S=y.y-e.stepPosition.y,K=A+R,L=C+S,x=0;x<s.length;x++)t=s[x],t.x!==b&&(P===b||P>d(K-t.x))&&(P=d(K-t.x),F=x),t.y!==b&&(Q===b||Q>d(L-t.y))&&(Q=d(L-t.y),J=x);n=A,o=C,F!==b&&(n=s[F].x,e.stepPosition.x+=s[F].x-A),J!==b&&(o=s[J].y,e.stepPosition.y+=s[J].y-C)}else{if(i=I==G?0:y.x-e.mousePos.x,m=I==H?0:y.y-e.mousePos.y,f(E)){if(u=z(E)?E.call(this,{deltaX:i,deltaY:m,element:g,domEvent:r,helperLeft:h(g,k),helperTop:h(g,l),mouse:y}):E,Pa(u)?q=p=u:M(u)&&(q=u.x,p=u.y),f(q)&&d(i)<q&&f(p)&&d(m)<p)return;f(q)&&q>1&&i%q!==0&&(i=(i>=0?1:-1)*ha(d(i)/q)*q),f(p)&&p>1&&m%p!==0&&(m=(m>=0?1:-1)*ha(d(m)/p)*p)}n=A+i,o=j(0,C+m)}I==H&&(v!==b&&(n=j(v,n),n===v&&(i=0)),w!==b&&(n=D(w-O,n),n===w-O&&(i=0))),I==G&&(v&&(o=j(v,o),o===v&&(m=0)),w&&(o=D(w-N,o),o===w-N&&(m=0))),g.css({left:n,top:o}),e.mousePos=y,e.startSent||(e.startSent=!0,e.trigger(ca,{element:g,domEvent:r}),e._adjustZIndex(),c.DragStart(e,r)),e.trigger(Aa,{deltaX:i,deltaY:m,element:g,domEvent:r}),c.Drag(e,r)}},_handleMouseUp:function(n){var e,j,f,i,b=this,p=b.element,d=b.helper,m=b.options.animation;b._unfixIframes(),a(g.body).removeClass(s),b._dragging&&(b.startSent?(j=c.Drop(b,n),f=j.cancelled,i=j.skipAnimation,e=b.trigger(da,{left:h(d,k),top:h(d,l),element:d,domEvent:n,cancelled:f,skipAnimation:i}),i=e.skipAnimation,f=e.cancelled,f===!0||e.isDefaultPrevented()?a(d).animate({left:b.oriPosition.left,top:b.oriPosition.top},!i&&m&&m.enabled?m.revertDuration:0,o(b._endDrag,b)):(b._isCustomHelper&&(A.Set(p,d,{source:"left top",target:"left top",overflow:"none"}),b._adjustZIndex(p)),b._endDrag())):b._endDrag())},_adjustZIndex:function(b){var d=this,c=d.options.stack;c!==!1&&(f(b)||(b=d.helper),a(b).css("z-index",na(c===!0?"."+u:c)+1))},_handleKeyDown:function(b){var a=this,c=b.keyCode;switch(c){case Ra.ESC:a._dragging&&(a.helper.css({left:a.oriPosition.left+n,top:a.oriPosition.top+n}),a.trigger(ya),a._unfixIframes(),a._endDrag())}},_endDrag:function(){var b=this,c=b.options.dragCls;b._dragging=!1,b._isCustomHelper?a(b.helper).remove():a(b.helper).removeClass(s+" "+oa+(c?" "+c:"")),a(g).off(b._eventNS),b.mousePos=b.oriPosition=b.helper=b._isCustomHelper=b._helperInitialized=null},enabled:function(){var c,b=this,d=a(b.element),e=b.options,f=e.handle?a(e.handle):d,g=[].slice.call(arguments);return g.length>0?(c=!!g[0],c?(d.removeClass(ta),b._mouseDownProxy||(b._mouseDownProxy=o(b._handleMouseDown,b),f.on(t,b._mouseDownProxy))):(d.addClass(ta),b._mouseDownProxy&&(f.off(t,b._mouseDownProxy),b._mouseDownProxy=null)),b._enabled=c,void 0):b._enabled},destroy:function(){var b=this,c=b.options.cls;b.mouseTracker&&(b.mouseTracker.destroy(),b.mouseTracker=null),a(b.element).removeClass(u+(c?" "+c:"")),b._origPosStyle&&(a(b.element).css(p,b._origPosStyle),b._origPosStyle=null),m.fn.destroy.call(b)}}),Q.defaults=Y,e.ui.plugin("Draggable",Q),aa={enabled:!0,accepts:"*",cls:b,hoverCls:b,tolerance:"intersect",scope:"default",events:{}},O=m.extend({init:function(){m.fn.init.apply(this,arguments);var b=this,g=a(b.element),d=b.options,h=d.dieOnError,e=d.accepts,f=d.cls;return Oa(e)||Na(e)||e instanceof a||z(e)?(b._eventNS=".shieldDroppable"+b.getInstanceId(),g.addClass(F+(f?" "+f:"")),c.Register(b),void b.enabled(d.enabled)):void Qa("shieldDroppable: The accepts option must be a string, array, function or jQuery object.",h)},accepts:function(c){var b=this.options.accepts;return z(b)?b.call(this,c):a(c).is(b)},proportions:function(){var a=this;return arguments.length>0?void(a._proportions=arguments[0]):a._proportions?a._proportions:a._proportions={width:a.element[0].offsetWidth,height:a.element[0].offsetHeight}},over:function(d,e){var b=this,c=b.options.hoverCls,f=b.trigger("over",{draggable:d.element,droppable:this.element,domEvent:e});f.isDefaultPrevented()||a(b.element).addClass(P+(c?" "+c:""))},out:function(d,e){var b=this,c=b.options.hoverCls;b.trigger("out",{draggable:d.element,droppable:this.element,domEvent:e}),a(b.element).removeClass(P+(c?" "+c:""))},stop:function(){var b=this.options.hoverCls;a(this.element).removeClass(P+(b?" "+b:""))},drop:function(b,a){return this.trigger(za,{draggable:b.element,droppable:this.element,cancelled:a.cancelled,skipAnimation:a.skipAnimation,domEvent:a})},enabled:function(){var c,b=this,d=[].slice.call(arguments);return d.length>0?(c=!!d[0],c?a(b.element).removeClass(K):a(b.element).addClass(K),b._enabled=c,void 0):b._enabled},destroy:function(){var d=this,e=d.options.cls;c.UnRegister(d),a(d.element).removeClass(F+K+s+(e?" "+e:"")),d._enabled=d._proportions=b,m.fn.destroy.call(d)}}),O.defaults=aa,e.ui.plugin("Droppable",O)}(jQuery,shield,this);
shield.version='1.7.31';